<!DOCTYPE html>
<html lang="ko">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2TKFD0YE2L"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-2TKFD0YE2L');
</script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ë§Œë‚˜ - ì„±ê²½ ë¬µìƒ ì•±</title>
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸš</text></svg>">
    <!-- ë©”íƒ€ íƒœê·¸ -->
    <meta name="description" content="ì˜¤ëŠ˜ì˜ ë§Œë‚˜ - 2025ë…„ ì„±ê²½ ë¬µìƒ ì•±">
    <meta name="keywords" content="ì„±ê²½, ë¬µìƒ, ë§ì”€, ì˜¤ëŠ˜ì˜ ë§Œë‚˜">
    <meta name="color-scheme" content="light dark">
<style>
    /* ========================================
       1. CSS ë³€ìˆ˜ ì‹œìŠ¤í…œ (ì»¬ëŸ¬ íŒ”ë ˆíŠ¸)
    ======================================== */
    :root {
        /* Primary Colors */
        --color-primary: #4A6FA5;
        --color-primary-hover: #3D5D8A;
        --color-primary-light: #6B8FC5;

        /* Secondary Colors */
        --color-secondary: #6C757D;
        --color-secondary-hover: #5A6268;

        /* Accent Colors */
        --color-accent: #E8A838;
        --color-accent-hover: #D49A2E;

        /* Status Colors */
        --color-success: #28A745;
        --color-success-bg: #D4EDDA;
        --color-success-text: #155724;
        --color-error: #DC3545;
        --color-error-bg: #F8D7DA;
        --color-error-text: #721C24;
        --color-info: #17A2B8;
        --color-info-bg: #D1ECF1;
        --color-info-text: #0C5460;

        /* Background Colors */
        --bg-primary: #F8FAFC;
        --bg-secondary: #FFFFFF;
        --bg-tertiary: #F1F5F9;
        --bg-card: #FFFFFF;

        /* Text Colors */
        --text-primary: #1E293B;
        --text-secondary: #64748B;
        --text-muted: #94A3B8;
        --text-inverse: #FFFFFF;

        /* Border Colors */
        --border-color: #E2E8F0;
        --border-color-dark: #CBD5E1;

        /* Shadows */
        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08);

        /* Spacing */
        --spacing-xs: 4px;
        --spacing-sm: 8px;
        --spacing-md: 16px;
        --spacing-lg: 24px;
        --spacing-xl: 32px;

        /* Border Radius */
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 16px;
        --radius-full: 9999px;

        /* Typography */
        --font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        --font-size-xs: 12px;
        --font-size-sm: 14px;
        --font-size-base: 16px;
        --font-size-lg: 18px;
        --font-size-xl: 20px;
        --font-size-2xl: 24px;
        --font-size-3xl: 30px;

        /* Transitions */
        --transition-fast: 150ms ease;
        --transition-normal: 250ms ease;
        --transition-slow: 350ms ease;
    }

    /* ========================================
       2. ë‹¤í¬ ëª¨ë“œ ë³€ìˆ˜
    ======================================== */
    @media (prefers-color-scheme: dark) {
        :root {
            --color-primary: #6B8FC5;
            --color-primary-hover: #8AAAD5;
            --color-primary-light: #4A6FA5;

            --color-secondary: #9CA3AF;
            --color-secondary-hover: #D1D5DB;

            --bg-primary: #0F172A;
            --bg-secondary: #1E293B;
            --bg-tertiary: #334155;
            --bg-card: #1E293B;

            --text-primary: #F1F5F9;
            --text-secondary: #CBD5E1;
            --text-muted: #64748B;

            --border-color: #334155;
            --border-color-dark: #475569;

            --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
            --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.3);

            --color-success-bg: #064E3B;
            --color-success-text: #6EE7B7;
            --color-error-bg: #7F1D1D;
            --color-error-text: #FCA5A5;
            --color-info-bg: #164E63;
            --color-info-text: #67E8F9;
        }
    }

    /* ìˆ˜ë™ ë‹¤í¬ëª¨ë“œ í† ê¸€ ì§€ì› */
    [data-theme="dark"] {
        --color-primary: #6B8FC5;
        --color-primary-hover: #8AAAD5;
        --color-primary-light: #4A6FA5;

        --color-secondary: #9CA3AF;
        --color-secondary-hover: #D1D5DB;

        --bg-primary: #0F172A;
        --bg-secondary: #1E293B;
        --bg-tertiary: #334155;
        --bg-card: #1E293B;

        --text-primary: #F1F5F9;
        --text-secondary: #CBD5E1;
        --text-muted: #64748B;

        --border-color: #334155;
        --border-color-dark: #475569;

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.5);
        --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.3);

        --color-success-bg: #064E3B;
        --color-success-text: #6EE7B7;
        --color-error-bg: #7F1D1D;
        --color-error-text: #FCA5A5;
        --color-info-bg: #164E63;
        --color-info-text: #67E8F9;
    }

    [data-theme="light"] {
        --color-primary: #4A6FA5;
        --color-primary-hover: #3D5D8A;
        --color-primary-light: #6B8FC5;

        --color-secondary: #6C757D;
        --color-secondary-hover: #5A6268;

        --bg-primary: #F8FAFC;
        --bg-secondary: #FFFFFF;
        --bg-tertiary: #F1F5F9;
        --bg-card: #FFFFFF;

        --text-primary: #1E293B;
        --text-secondary: #64748B;
        --text-muted: #94A3B8;

        --border-color: #E2E8F0;
        --border-color-dark: #CBD5E1;

        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
        --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.07);
        --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
        --shadow-card: 0 2px 8px rgba(0, 0, 0, 0.08);

        --color-success-bg: #D4EDDA;
        --color-success-text: #155724;
        --color-error-bg: #F8D7DA;
        --color-error-text: #721C24;
        --color-info-bg: #D1ECF1;
        --color-info-text: #0C5460;
    }

    /* ========================================
       3. ê¸°ë³¸ ìŠ¤íƒ€ì¼ & ë¦¬ì…‹
    ======================================== */
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

    *, *::before, *::after {
        box-sizing: border-box;
    }

    body {
        font-family: var(--font-family);
        margin: 0;
        padding: var(--spacing-md);
        background-color: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        font-size: var(--font-size-base);
        transition: background-color var(--transition-normal), color var(--transition-normal);
    }

    /* ========================================
       4. ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ
    ======================================== */
    .app-container {
        max-width: 1100px;
        margin: 0 auto;
    }

    /* ========================================
       5. í—¤ë” ìŠ¤íƒ€ì¼
    ======================================== */
    .app-header {
        text-align: center;
        margin-bottom: var(--spacing-lg);
        position: relative;
    }

    .app-title {
        font-size: var(--font-size-3xl);
        font-weight: 700;
        color: var(--color-primary);
        margin: 0 0 var(--spacing-sm) 0;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm);
    }

    .app-subtitle {
        font-size: var(--font-size-sm);
        color: var(--text-muted);
        margin: 0;
    }

    /* í…Œë§ˆ í† ê¸€ ë²„íŠ¼ */
    .theme-toggle {
        position: absolute;
        top: 0;
        right: 0;
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-full);
        padding: var(--spacing-sm) var(--spacing-md);
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
        transition: all var(--transition-fast);
        box-shadow: var(--shadow-sm);
    }

    .theme-toggle:hover {
        background: var(--bg-tertiary);
        border-color: var(--border-color-dark);
    }

    .theme-icon {
        font-size: var(--font-size-lg);
    }

    /* ========================================
       6. ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
    ======================================== */
    .card {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        box-shadow: var(--shadow-card);
        border: 1px solid var(--border-color);
        overflow: hidden;
        transition: box-shadow var(--transition-fast), border-color var(--transition-fast);
    }

    .card:hover {
        box-shadow: var(--shadow-md);
    }

    .card-header {
        padding: var(--spacing-md) var(--spacing-lg);
        border-bottom: 1px solid var(--border-color);
        background: var(--bg-tertiary);
    }

    .card-title {
        font-size: var(--font-size-lg);
        font-weight: 600;
        color: var(--text-primary);
        margin: 0;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
    }

    .card-title-icon {
        font-size: var(--font-size-xl);
    }

    .card-body {
        padding: var(--spacing-lg);
    }

    /* ========================================
       7. ë©”ì¸ ë ˆì´ì•„ì›ƒ (2ì»¬ëŸ¼)
    ======================================== */
    .main-layout {
        display: grid;
        grid-template-columns: 1fr 1.2fr;
        gap: var(--spacing-lg);
        align-items: start;
    }

    @media (max-width: 900px) {
        .main-layout {
            grid-template-columns: 1fr;
        }
    }

    /* ========================================
       8. í¼ ìš”ì†Œ ìŠ¤íƒ€ì¼
    ======================================== */
    .form-group {
        margin-bottom: var(--spacing-md);
    }

    .form-label {
        display: block;
        margin-bottom: var(--spacing-xs);
        font-weight: 500;
        font-size: var(--font-size-sm);
        color: var(--text-secondary);
    }

    .form-label-main {
        font-size: var(--font-size-base);
        color: var(--text-primary);
        font-weight: 600;
    }

    .form-input,
    .form-select,
    .form-textarea {
        width: 100%;
        padding: var(--spacing-sm) var(--spacing-md);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-sm);
        font-size: var(--font-size-base);
        font-family: var(--font-family);
        background: var(--bg-secondary);
        color: var(--text-primary);
        transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
    }

    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.15);
    }

    .form-textarea {
        resize: vertical;
        min-height: 80px;
    }

    .form-divider {
        border: none;
        border-top: 2px solid var(--color-primary);
        margin: var(--spacing-lg) 0;
        opacity: 0.3;
    }

    .form-divider-light {
        border-top: 1px dashed var(--border-color-dark);
    }

    /* ========================================
       9. ë²„íŠ¼ ì‹œìŠ¤í…œ
    ======================================== */
    .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm);
        padding: var(--spacing-sm) var(--spacing-lg);
        border: none;
        border-radius: var(--radius-sm);
        font-size: var(--font-size-base);
        font-family: var(--font-family);
        font-weight: 500;
        cursor: pointer;
        transition: all var(--transition-fast);
        text-decoration: none;
        white-space: nowrap;
    }

    .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    /* Primary Button - ì£¼ìš” ì•¡ì…˜ */
    .btn-primary {
        background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-hover) 100%);
        color: var(--text-inverse);
        box-shadow: var(--shadow-sm);
    }

    .btn-primary:hover:not(:disabled) {
        background: linear-gradient(135deg, var(--color-primary-hover) 0%, var(--color-primary) 100%);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
    }

    .btn-primary:active:not(:disabled) {
        transform: translateY(0);
    }

    /* Secondary Button - ë³´ì¡° ì•¡ì…˜ */
    .btn-secondary {
        background: var(--bg-tertiary);
        color: var(--text-primary);
        border: 1px solid var(--border-color-dark);
    }

    .btn-secondary:hover:not(:disabled) {
        background: var(--border-color);
        border-color: var(--text-muted);
    }

    /* Accent Button - ê°•ì¡° ì•¡ì…˜ */
    .btn-accent {
        background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%);
        color: var(--text-inverse);
        box-shadow: var(--shadow-sm);
    }

    .btn-accent:hover:not(:disabled) {
        background: linear-gradient(135deg, var(--color-accent-hover) 0%, var(--color-accent) 100%);
        box-shadow: var(--shadow-md);
        transform: translateY(-1px);
    }

    /* Ghost Button - íˆ¬ëª… ë°°ê²½ */
    .btn-ghost {
        background: transparent;
        color: var(--color-primary);
        border: 1px solid var(--color-primary);
    }

    .btn-ghost:hover:not(:disabled) {
        background: var(--color-primary);
        color: var(--text-inverse);
    }

    /* ë²„íŠ¼ í¬ê¸° */
    .btn-sm {
        padding: var(--spacing-xs) var(--spacing-md);
        font-size: var(--font-size-sm);
    }

    .btn-lg {
        padding: var(--spacing-md) var(--spacing-xl);
        font-size: var(--font-size-lg);
    }

    .btn-block {
        width: 100%;
    }

    /* ë²„íŠ¼ ê·¸ë£¹ */
    .btn-group {
        display: flex;
        gap: var(--spacing-sm);
        margin-top: var(--spacing-md);
    }

    .btn-group .btn {
        flex: 1;
    }

    /* ========================================
       10. ìƒíƒœ í‘œì‹œ (í† ìŠ¤íŠ¸)
    ======================================== */
    .toast-container {
        position: fixed;
        bottom: var(--spacing-lg);
        right: var(--spacing-lg);
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm);
    }

    .toast {
        padding: var(--spacing-md) var(--spacing-lg);
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-lg);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
        font-weight: 500;
        transform: translateX(120%);
        opacity: 0;
        transition: all var(--transition-normal);
        max-width: 350px;
    }

    .toast.show {
        transform: translateX(0);
        opacity: 1;
    }

    .toast-success {
        background: var(--color-success-bg);
        color: var(--color-success-text);
        border: 1px solid var(--color-success);
    }

    .toast-error {
        background: var(--color-error-bg);
        color: var(--color-error-text);
        border: 1px solid var(--color-error);
    }

    .toast-info {
        background: var(--color-info-bg);
        color: var(--color-info-text);
        border: 1px solid var(--color-info);
    }

    .toast-icon {
        font-size: var(--font-size-xl);
    }

    /* ì¸ë¼ì¸ ìƒíƒœ í‘œì‹œ */
    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-xs);
        padding: var(--spacing-xs) var(--spacing-md);
        border-radius: var(--radius-full);
        font-size: var(--font-size-sm);
        font-weight: 500;
    }

    .status-loading {
        background: var(--color-info-bg);
        color: var(--color-info-text);
    }

    .status-success {
        background: var(--color-success-bg);
        color: var(--color-success-text);
    }

    .status-error {
        background: var(--color-error-bg);
        color: var(--color-error-text);
    }

    /* ========================================
       11. ë¬µìƒ ê²°ê³¼ ì˜ì—­
    ======================================== */
    .result-card {
        position: sticky;
        top: var(--spacing-md);
    }

    .devotional-container {
        margin-bottom: var(--spacing-lg);
    }

    .devotional-container:last-child {
        margin-bottom: 0;
    }

    .devotional-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-md);
        margin-bottom: var(--spacing-sm);
    }

    .devotional-date {
        font-size: var(--font-size-lg);
        font-weight: 600;
        color: var(--color-primary);
        display: flex;
        align-items: center;
        gap: var(--spacing-xs);
    }

    .devotional-content {
        background: var(--bg-tertiary);
        border-radius: var(--radius-md);
        padding: var(--spacing-lg);
        border-left: 4px solid var(--color-primary);
        line-height: 1.8;
        font-size: var(--font-size-base);
        max-height: 500px;
        overflow-y: auto;
    }

    /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
    .devotional-content::-webkit-scrollbar {
        width: 6px;
    }

    .devotional-content::-webkit-scrollbar-track {
        background: var(--bg-tertiary);
        border-radius: 3px;
    }

    .devotional-content::-webkit-scrollbar-thumb {
        background: var(--border-color-dark);
        border-radius: 3px;
    }

    .devotional-content::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
    }

    /* íƒ€ì´í¬ê·¸ë˜í”¼ - ì„±ê²½ ë³¸ë¬¸ */
    .devotional-content .bible-title {
        font-size: var(--font-size-lg);
        font-weight: 700;
        color: var(--color-primary);
        margin: var(--spacing-md) 0 var(--spacing-sm) 0;
    }

    .devotional-content .verse {
        margin-bottom: var(--spacing-sm);
    }

    .devotional-content .verse-number {
        font-weight: 700;
        color: var(--color-primary);
        margin-right: var(--spacing-xs);
    }

    .devotional-content .meta-info {
        font-size: var(--font-size-sm);
        color: var(--text-muted);
    }

    .devotional-content .divider {
        border: none;
        border-top: 1px dashed var(--border-color-dark);
        margin: var(--spacing-md) 0;
    }

    .devotional-content .guide-section {
        background: var(--bg-secondary);
        padding: var(--spacing-md);
        border-radius: var(--radius-sm);
        margin-top: var(--spacing-md);
    }

    .devotional-content .guide-title {
        font-weight: 600;
        color: var(--color-accent);
        margin-bottom: var(--spacing-sm);
    }

    /* ë³µì‚¬ ë²„íŠ¼ ê·¸ë£¹ (3ì¼ ì—°ì†ìš©) */
    .copy-buttons-group {
        display: flex;
        gap: var(--spacing-sm);
        padding: var(--spacing-md);
        background: var(--bg-tertiary);
        border-radius: var(--radius-md);
        margin-bottom: var(--spacing-lg);
        flex-wrap: wrap;
        border: 1px solid var(--border-color);
    }

    .copy-buttons-group .btn {
        flex: 1;
        min-width: 140px;
    }

    /* Placeholder ìƒíƒœ */
    .placeholder-text {
        color: var(--text-muted);
        text-align: center;
        padding: var(--spacing-xl);
        font-size: var(--font-size-base);
    }

    .placeholder-icon {
        font-size: 48px;
        display: block;
        margin-bottom: var(--spacing-md);
    }

    /* ========================================
       12. ë¡œë”© ìŠ¤í”¼ë„ˆ
    ======================================== */
    .spinner {
        width: 20px;
        height: 20px;
        border: 2px solid var(--border-color);
        border-radius: 50%;
        border-top-color: var(--color-primary);
        animation: spin 0.8s linear infinite;
        display: inline-block;
    }

    .spinner-lg {
        width: 40px;
        height: 40px;
        border-width: 3px;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* ========================================
       13. í‘¸í„°
    ======================================== */
    .app-footer {
        text-align: center;
        margin-top: var(--spacing-xl);
        padding-top: var(--spacing-lg);
        border-top: 1px solid var(--border-color);
        font-size: var(--font-size-sm);
        color: var(--text-muted);
    }

    /* ========================================
       14. ë°˜ì‘í˜• ë””ìì¸
    ======================================== */
    @media (max-width: 768px) {
        body {
            padding: var(--spacing-sm);
        }

        .app-title {
            font-size: var(--font-size-2xl);
        }

        .theme-toggle {
            position: static;
            margin: var(--spacing-md) auto 0;
        }

        .card-body {
            padding: var(--spacing-md);
        }

        .btn-group {
            flex-direction: column;
        }

        .copy-buttons-group {
            flex-direction: column;
        }

        .copy-buttons-group .btn {
            min-width: 100%;
        }

        .devotional-header {
            flex-direction: column;
            align-items: flex-start;
        }

        .toast-container {
            left: var(--spacing-md);
            right: var(--spacing-md);
            bottom: var(--spacing-md);
        }

        .toast {
            max-width: 100%;
        }

        .result-card {
            position: static;
        }
    }

    /* ========================================
       15. ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
    ======================================== */
    .text-center { text-align: center; }
    .text-muted { color: var(--text-muted); }
    .mt-md { margin-top: var(--spacing-md); }
    .mb-md { margin-bottom: var(--spacing-md); }
    .hidden { display: none !important; }
</style>
</head>
<body>
    <div class="app-container">
        <!-- í—¤ë” -->
        <header class="app-header">
            <h1 class="app-title">
                <span>ğŸš</span>
                <span>ë§Œë‚˜ ìƒì„±ê¸°</span>
                <span>ğŸš</span>
            </h1>
            <p class="app-subtitle">ë§¤ì¼ì˜ ì„±ê²½ ë¬µìƒì„ ìœ„í•œ ë„ìš°ë¯¸</p>

            <button class="theme-toggle" id="themeToggle" title="í…Œë§ˆ ë³€ê²½">
                <span class="theme-icon" id="themeIcon">ğŸŒ™</span>
                <span id="themeText">ë‹¤í¬ ëª¨ë“œ</span>
            </button>
        </header>

        <!-- ìƒíƒœ í‘œì‹œ -->
        <div id="statusContainer" class="text-center mb-md">
            <span id="status" class="status-badge status-loading">
                <span class="spinner"></span>
                <span>ì„±ê²½ ë°ì´í„° ë¡œë”© ì¤‘...</span>
            </span>
        </div>

        <!-- ë©”ì¸ ë ˆì´ì•„ì›ƒ -->
        <main class="main-layout">
            <!-- ì„¤ì • íŒ¨ë„ -->
            <section class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">âš™ï¸</span>
                        <span>ì„¤ì •</span>
                    </h2>
                </div>
                <div class="card-body">
                    <!-- ë¹ ë¥¸ ì„¤ì • -->
                    <div class="form-group">
                        <label class="form-label" for="parseInput">ğŸ“‹ ë¹ ë¥¸ ì„¤ì • (ì´ì „ ë¬µìƒ ë¶™ì—¬ë„£ê¸°)</label>
                        <textarea id="parseInput" class="form-textarea" placeholder="ì˜ˆ: ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - 12/5(ê¸ˆ)&#10;ê³ ë¦°ë„ì „ì„œ 5ì¥ ë° ì ì–¸ 10ì¥ ì…ë‹ˆë‹¤"></textarea>
                        <button id="parseButton" class="btn btn-secondary btn-block mt-md">
                            <span>ğŸ”„</span>
                            <span>ë‹¤ìŒ ë‚ ì§œë¡œ ìë™ ì„¤ì •</span>
                        </button>
                    </div>

                    <hr class="form-divider">

                    <!-- ë‚ ì§œ ì„ íƒ -->
                    <div class="form-group">
                        <label class="form-label form-label-main" for="date">1. ë‚ ì§œ ì„ íƒ</label>
                        <input type="date" id="date" class="form-input">
                    </div>

                    <!-- ì²« ë²ˆì§¸ ì„±ê²½ì±… -->
                    <div class="form-group">
                        <label class="form-label form-label-main" for="book">2. ì„±ê²½ì±… ì„ íƒ</label>
                        <select id="book" class="form-select">
                            <option value="" disabled selected>ì„±ê²½ì±…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label form-label-main" for="chapter">3. ì¥ ì„ íƒ</label>
                        <select id="chapter" class="form-select">
                            <option value="" disabled selected>ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        </select>
                    </div>

                    <hr class="form-divider form-divider-light">

                    <!-- ë‘ ë²ˆì§¸ ì„±ê²½ì±… (ì„ íƒ) -->
                    <div class="form-group">
                        <label class="form-label" for="secondBook">4. ì¶”ê°€ ì„±ê²½ì±… (ì„ íƒì‚¬í•­)</label>
                        <select id="secondBook" class="form-select">
                            <option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="secondChapter">5. ì¶”ê°€ ì¥ (ì„ íƒì‚¬í•­)</label>
                        <select id="secondChapter" class="form-select">
                            <option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>
                        </select>
                    </div>

                    <!-- ë²„íŠ¼ ê·¸ë£¹ -->
                    <div class="btn-group">
                        <button id="generateButton" class="btn btn-primary btn-lg" disabled>
                            <span>âœ¨</span>
                            <span>ë¬µìƒ ìƒì„±</span>
                        </button>
                        <button id="generate3DaysButton" class="btn btn-accent btn-lg" disabled>
                            <span>ğŸ“…</span>
                            <span>3ì¼ ì—°ì†</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- ê²°ê³¼ íŒ¨ë„ -->
            <section class="card result-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <span class="card-title-icon">ğŸ“–</span>
                        <span>ì˜¤ëŠ˜ì˜ ë§Œë‚˜</span>
                    </h2>
                </div>
                <div class="card-body">
                    <div id="devotionalContainer">
                        <div class="devotional-container">
                            <div id="devotional" class="placeholder-text">
                                <span class="placeholder-icon">ğŸ“š</span>
                                <p>ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•œ í›„<br>"ë¬µìƒ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”</p>
                            </div>
                            <button id="copyButton" class="btn btn-ghost btn-block mt-md hidden">
                                <span>ğŸ“‹</span>
                                <span>í´ë¦½ë³´ë“œì— ë³µì‚¬</span>
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- í‘¸í„° -->
        <footer class="app-footer">
            <p>ì´ ì•±ì€ GitHubì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” ì„±ê²½ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
        </footer>
    </div>

    <!-- í† ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ -->
    <div id="toastContainer" class="toast-container"></div>

    <script>
    /* ========================================
       ì•± ëª¨ë“ˆ êµ¬ì¡°
    ======================================== */
    const App = {
        // ========== ìƒíƒœ ê´€ë¦¬ ==========
        state: {
            bibleData: null,
            rawDevotionalText: '',
            currentTheme: 'system'
        },

        // ========== DOM ìš”ì†Œ ìºì‹± ==========
        elements: {},

        // ========== ìƒìˆ˜ ==========
        constants: {
            STORAGE_KEY: 'mannaGenerator',
            BIBLE_DATA_URL: 'https://raw.githubusercontent.com/jeriong/bible-data/refs/heads/main/%EC%84%B1%EA%B2%BD.json',
            STANDARD_BOOKS: [
                'ì°½ì„¸ê¸°', 'ì¶œì• êµ½ê¸°', 'ë ˆìœ„ê¸°', 'ë¯¼ìˆ˜ê¸°', 'ì‹ ëª…ê¸°', 'ì—¬í˜¸ìˆ˜ì•„', 'ì‚¬ì‚¬ê¸°', 'ë£»ê¸°',
                'ì‚¬ë¬´ì—˜ìƒ', 'ì‚¬ë¬´ì—˜í•˜', 'ì—´ì™•ê¸°ìƒ', 'ì—´ì™•ê¸°í•˜', 'ì—­ëŒ€ìƒ', 'ì—­ëŒ€í•˜', 'ì—ìŠ¤ë¼', 'ëŠí—¤ë¯¸ì•¼',
                'ì—ìŠ¤ë”', 'ìš¥ê¸°', 'ì‹œí¸', 'ì ì–¸', 'ì „ë„ì„œ', 'ì•„ê°€', 'ì´ì‚¬ì•¼', 'ì˜ˆë ˆë¯¸ì•¼', 'ì˜ˆë ˆë¯¸ì•¼ì• ê°€',
                'ì—ìŠ¤ê²”', 'ë‹¤ë‹ˆì—˜', 'í˜¸ì„¸ì•„', 'ìš”ì—˜', 'ì•„ëª¨ìŠ¤', 'ì˜¤ë°”ëŒœ', 'ìš”ë‚˜', 'ë¯¸ê°€', 'ë‚˜í›”', 'í•˜ë°•êµ­',
                'ìŠ¤ë°”ëƒ', 'í•™ê°œ', 'ìŠ¤ê°€ë´', 'ë§ë¼ê¸°', 'ë§ˆíƒœë³µìŒ', 'ë§ˆê°€ë³µìŒ', 'ëˆ„ê°€ë³µìŒ', 'ìš”í•œë³µìŒ',
                'ì‚¬ë„í–‰ì „', 'ë¡œë§ˆì„œ', 'ê³ ë¦°ë„ì „ì„œ', 'ê³ ë¦°ë„í›„ì„œ', 'ê°ˆë¼ë””ì•„ì„œ', 'ì—ë² ì†Œì„œ', 'ë¹Œë¦½ë³´ì„œ',
                'ê³¨ë¡œìƒˆì„œ', 'ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ', 'ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ', 'ë””ëª¨ë°ì „ì„œ', 'ë””ëª¨ë°í›„ì„œ', 'ë””ë„ì„œ',
                'ë¹Œë ˆëª¬ì„œ', 'íˆë¸Œë¦¬ì„œ', 'ì•¼ê³ ë³´ì„œ', 'ë² ë“œë¡œì „ì„œ', 'ë² ë“œë¡œí›„ì„œ', 'ìš”í•œ1ì„œ', 'ìš”í•œ2ì„œ',
                'ìš”í•œ3ì„œ', 'ìœ ë‹¤ì„œ', 'ìš”í•œê³„ì‹œë¡'
            ],
            WEEKDAYS: ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ']
        },

        // ========== ì´ˆê¸°í™” ==========
        init() {
            this.cacheElements();
            this.initTheme();
            this.bindEvents();
            this.setTodayAsDefault();
            this.loadSavedSettings();
            this.loadBibleData();
        },

        cacheElements() {
            this.elements = {
                status: document.getElementById('status'),
                statusContainer: document.getElementById('statusContainer'),
                themeToggle: document.getElementById('themeToggle'),
                themeIcon: document.getElementById('themeIcon'),
                themeText: document.getElementById('themeText'),
                parseInput: document.getElementById('parseInput'),
                parseButton: document.getElementById('parseButton'),
                dateInput: document.getElementById('date'),
                bookSelect: document.getElementById('book'),
                chapterSelect: document.getElementById('chapter'),
                secondBookSelect: document.getElementById('secondBook'),
                secondChapterSelect: document.getElementById('secondChapter'),
                generateButton: document.getElementById('generateButton'),
                generate3DaysButton: document.getElementById('generate3DaysButton'),
                devotionalContainer: document.getElementById('devotionalContainer'),
                devotional: document.getElementById('devotional'),
                copyButton: document.getElementById('copyButton'),
                toastContainer: document.getElementById('toastContainer')
            };
        },

        bindEvents() {
            const { elements } = this;

            elements.themeToggle.addEventListener('click', () => this.toggleTheme());
            elements.parseButton.addEventListener('click', () => this.parseAndSetNext());
            elements.bookSelect.addEventListener('change', () => {
                this.updateChapterOptions();
                this.saveSettings();
            });
            elements.chapterSelect.addEventListener('change', () => {
                this.checkFormValidity();
                this.saveSettings();
            });
            elements.secondBookSelect.addEventListener('change', () => {
                this.updateSecondChapterOptions();
                this.saveSettings();
            });
            elements.secondChapterSelect.addEventListener('change', () => {
                this.checkFormValidity();
                this.saveSettings();
            });
            elements.generateButton.addEventListener('click', () => this.generateDevotional());
            elements.generate3DaysButton.addEventListener('click', () => this.generate3DaysDevotional());
            elements.copyButton.addEventListener('click', () => this.copyDevotionalText());
            elements.dateInput.addEventListener('keydown', (e) => this.handleDateKeydown(e));
            elements.dateInput.addEventListener('change', () => this.saveSettings());
        },

        // ========== í…Œë§ˆ ê´€ë¦¬ ==========
        initTheme() {
            const saved = this.getStoredData().theme || 'system';
            this.state.currentTheme = saved;
            this.applyTheme(saved);
        },

        toggleTheme() {
            const themes = ['system', 'light', 'dark'];
            const currentIndex = themes.indexOf(this.state.currentTheme);
            const nextTheme = themes[(currentIndex + 1) % themes.length];
            this.state.currentTheme = nextTheme;
            this.applyTheme(nextTheme);
            this.saveSettings();
        },

        applyTheme(theme) {
            const { themeIcon, themeText } = this.elements;

            if (theme === 'system') {
                document.documentElement.removeAttribute('data-theme');
                themeIcon.textContent = 'ğŸ’»';
                themeText.textContent = 'ì‹œìŠ¤í…œ';
            } else if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeIcon.textContent = 'ğŸŒ™';
                themeText.textContent = 'ë‹¤í¬';
            } else {
                document.documentElement.setAttribute('data-theme', 'light');
                themeIcon.textContent = 'â˜€ï¸';
                themeText.textContent = 'ë¼ì´íŠ¸';
            }
        },

        // ========== localStorage ê´€ë¦¬ ==========
        getStoredData() {
            try {
                const data = localStorage.getItem(this.constants.STORAGE_KEY);
                return data ? JSON.parse(data) : {};
            } catch {
                return {};
            }
        },

        saveSettings() {
            const { dateInput, bookSelect, chapterSelect, secondBookSelect, secondChapterSelect } = this.elements;

            const data = {
                theme: this.state.currentTheme,
                date: dateInput.value,
                book: bookSelect.value,
                chapter: chapterSelect.value,
                secondBook: secondBookSelect.value,
                secondChapter: secondChapterSelect.value,
                savedAt: new Date().toISOString()
            };

            try {
                localStorage.setItem(this.constants.STORAGE_KEY, JSON.stringify(data));
            } catch (e) {
                console.warn('ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', e);
            }
        },

        loadSavedSettings() {
            const saved = this.getStoredData();
            if (!saved.book) return;

            // ì €ì¥ëœ ë‚ ì§œê°€ ì˜¤ëŠ˜ë³´ë‹¤ ì´ì „ì´ë©´ ì˜¤ëŠ˜ ë‚ ì§œ ì‚¬ìš©
            if (saved.date) {
                const savedDate = new Date(saved.date);
                const today = new Date();
                today.setHours(0, 0, 0, 0);

                if (savedDate >= today) {
                    this.elements.dateInput.value = saved.date;
                }
            }

            // ì„±ê²½ì±…ê³¼ ì¥ì€ ë°ì´í„° ë¡œë“œ í›„ ì„¤ì •
            this.state.savedSettings = saved;
        },

        applySavedSettings() {
            const saved = this.state.savedSettings;
            if (!saved || !saved.book) return;

            const { bookSelect, chapterSelect, secondBookSelect, secondChapterSelect } = this.elements;

            if (saved.book && this.state.bibleData[saved.book]) {
                bookSelect.value = saved.book;
                this.updateChapterOptions();

                setTimeout(() => {
                    if (saved.chapter) {
                        chapterSelect.value = saved.chapter;
                    }

                    if (saved.secondBook && this.state.bibleData[saved.secondBook]) {
                        secondBookSelect.value = saved.secondBook;
                        this.updateSecondChapterOptions();

                        setTimeout(() => {
                            if (saved.secondChapter) {
                                secondChapterSelect.value = saved.secondChapter;
                            }
                            this.checkFormValidity();
                        }, 50);
                    } else {
                        this.checkFormValidity();
                    }
                }, 50);
            }
        },

        // ========== ë‚ ì§œ ê´€ë¦¬ ==========
        setTodayAsDefault() {
            const today = new Date();
            this.elements.dateInput.value = this.formatDateForInput(today);
        },

        formatDateForInput(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        },

        formatDateString(dateStr) {
            if (!dateStr) return null;

            const date = new Date(dateStr);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekday = this.constants.WEEKDAYS[date.getDay()];

            return {
                formattedDate: `${month}/${day}(${weekday})`,
                weekdayIndex: date.getDay()
            };
        },

        handleDateKeydown(e) {
            if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                e.preventDefault();

                const currentDate = new Date(this.elements.dateInput.value);
                const delta = e.key === 'ArrowDown' ? 1 : -1;
                currentDate.setDate(currentDate.getDate() + delta);

                this.elements.dateInput.value = this.formatDateForInput(currentDate);
                this.saveSettings();
            }
        },

        // ========== ë°ì´í„° ë¡œë“œ ==========
        async loadBibleData() {
            try {
                this.updateStatus('loading', 'ì„±ê²½ ë°ì´í„° ë¡œë”© ì¤‘...');

                const response = await fetch(this.constants.BIBLE_DATA_URL);

                if (!response.ok) {
                    throw new Error(`HTTP ì˜¤ë¥˜: ${response.status}`);
                }

                this.state.bibleData = await response.json();
                this.updateStatus('success', 'ì„±ê²½ ë°ì´í„° ë¡œë“œ ì™„ë£Œ');
                this.initializeUI();

                // 3ì´ˆ í›„ ìƒíƒœ í‘œì‹œ ìˆ¨ê¸°ê¸°
                setTimeout(() => {
                    this.elements.statusContainer.classList.add('hidden');
                }, 3000);

            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
                this.updateStatus('error', `ë¡œë“œ ì‹¤íŒ¨: ${error.message}`);
                this.useSampleData();
            }
        },

        useSampleData() {
            this.state.bibleData = {
                "ì°½ì„¸ê¸°": {
                    "1": {
                        "1": "íƒœì´ˆì— í•˜ë‚˜ë‹˜ì´ ì²œì§€ë¥¼ ì°½ì¡°í•˜ì‹œë‹ˆë¼",
                        "2": "ë•…ì´ í˜¼ëˆí•˜ê³  ê³µí—ˆí•˜ë©° í‘ì•”ì´ ê¹ŠìŒ ìœ„ì— ìˆê³  í•˜ë‚˜ë‹˜ì˜ ì˜ì€ ìˆ˜ë©´ ìœ„ì— ìš´í–‰í•˜ì‹œë‹ˆë¼",
                        "3": "í•˜ë‚˜ë‹˜ì´ ê°€ë¼ì‚¬ëŒ€ ë¹›ì´ ìˆìœ¼ë¼ í•˜ì‹œë§¤ ë¹›ì´ ìˆì—ˆê³ "
                    }
                },
                "ìš”í•œë³µìŒ": {
                    "3": {
                        "16": "í•˜ë‚˜ë‹˜ì´ ì„¸ìƒì„ ì´ì²˜ëŸ¼ ì‚¬ë‘í•˜ì‚¬ ë…ìƒìë¥¼ ì£¼ì…¨ìœ¼ë‹ˆ ì´ëŠ” ì €ë¥¼ ë¯¿ëŠ” ìë§ˆë‹¤ ë©¸ë§ì¹˜ ì•Šê³  ì˜ìƒì„ ì–»ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë‹ˆë¼"
                    }
                }
            };

            this.showToast('warning', 'ìƒ˜í”Œ ë°ì´í„°ë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤');
            this.initializeUI();
        },

        updateStatus(type, message) {
            const { status } = this.elements;

            status.className = `status-badge status-${type}`;

            if (type === 'loading') {
                status.innerHTML = `<span class="spinner"></span><span>${message}</span>`;
            } else {
                const icon = type === 'success' ? 'âœ“' : 'âš ';
                status.innerHTML = `<span>${icon}</span><span>${message}</span>`;
            }
        },

        // ========== UI ì´ˆê¸°í™” ==========
        initializeUI() {
            this.generateBookOptions();
            this.generateSecondBookOptions();
            this.checkFormValidity();
            this.applySavedSettings();
        },

        generateBookOptions() {
            const { bookSelect } = this.elements;
            const { bibleData } = this.state;

            bookSelect.innerHTML = '<option value="" disabled selected>ì„±ê²½ì±…ì„ ì„ íƒí•˜ì„¸ìš”</option>';

            const validBooks = this.constants.STANDARD_BOOKS.filter(book => book in bibleData);
            let inOldTestament = true;

            for (const book of validBooks) {
                if (inOldTestament && book === 'ë§ˆíƒœë³µìŒ') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "â”€â”€ ì‹ ì•½ â”€â”€";
                    bookSelect.appendChild(separator);
                    inOldTestament = false;
                }

                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                bookSelect.appendChild(option);
            }
        },

        generateSecondBookOptions() {
            const { secondBookSelect } = this.elements;
            const { bibleData } = this.state;

            secondBookSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';

            const validBooks = this.constants.STANDARD_BOOKS.filter(book => book in bibleData);
            let inOldTestament = true;

            for (const book of validBooks) {
                if (inOldTestament && book === 'ë§ˆíƒœë³µìŒ') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "â”€â”€ ì‹ ì•½ â”€â”€";
                    secondBookSelect.appendChild(separator);
                    inOldTestament = false;
                }

                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                secondBookSelect.appendChild(option);
            }
        },

        updateChapterOptions() {
            const { bookSelect, chapterSelect } = this.elements;
            const { bibleData } = this.state;

            chapterSelect.innerHTML = '<option value="" disabled selected>ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>';

            const selectedBook = bookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) return;

            const chapters = Object.keys(bibleData[selectedBook])
                .map(ch => parseInt(ch))
                .sort((a, b) => a - b);

            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}ì¥`;
                chapterSelect.appendChild(option);
            }

            this.checkFormValidity();
        },

        updateSecondChapterOptions() {
            const { secondBookSelect, secondChapterSelect } = this.elements;
            const { bibleData } = this.state;

            secondChapterSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';

            const selectedBook = secondBookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) return;

            const chapters = Object.keys(bibleData[selectedBook])
                .map(ch => parseInt(ch))
                .sort((a, b) => a - b);

            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}ì¥`;
                secondChapterSelect.appendChild(option);
            }

            this.checkFormValidity();
        },

        checkFormValidity() {
            const { bookSelect, chapterSelect, secondBookSelect, secondChapterSelect, generateButton, generate3DaysButton } = this.elements;

            const isValid = bookSelect.value && chapterSelect.value;
            const isSecondValid = !secondBookSelect.value || (secondBookSelect.value && secondChapterSelect.value);
            const formValid = isValid && isSecondValid;

            generateButton.disabled = !formValid;
            generate3DaysButton.disabled = !formValid;
        },

        // ========== ì„±ê²½ì±… ë„¤ë¹„ê²Œì´ì…˜ ==========
        getLastChapter(book) {
            const { bibleData } = this.state;
            if (!bibleData[book]) return null;

            const chapters = Object.keys(bibleData[book]).map(ch => parseInt(ch));
            return Math.max(...chapters);
        },

        getNextBookAndChapter(currentBook, currentChapter) {
            const { bibleData } = this.state;
            const { STANDARD_BOOKS } = this.constants;

            const lastChapter = this.getLastChapter(currentBook);

            if (currentChapter < lastChapter) {
                return { book: currentBook, chapter: currentChapter + 1 };
            }

            const currentIndex = STANDARD_BOOKS.indexOf(currentBook);
            if (currentIndex === -1 || currentIndex === STANDARD_BOOKS.length - 1) {
                return null;
            }

            for (let i = currentIndex + 1; i < STANDARD_BOOKS.length; i++) {
                const nextBook = STANDARD_BOOKS[i];
                if (bibleData[nextBook]) {
                    return { book: nextBook, chapter: 1 };
                }
            }

            return null;
        },

        // ========== í…ìŠ¤íŠ¸ íŒŒì‹± ==========
        parseAndSetNext() {
            const text = this.elements.parseInput.value.trim();
            if (!text) {
                this.showToast('error', 'í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”');
                return;
            }

            try {
                // ë‚ ì§œ íŒŒì‹±
                const dateMatch = text.match(/(\d{1,2})\/(\d{1,2})\([ì›”í™”ìˆ˜ëª©ê¸ˆí† ì¼]\)/);
                let parsedDate = null;

                if (dateMatch) {
                    const month = parseInt(dateMatch[1]);
                    const day = parseInt(dateMatch[2]);
                    const currentYear = new Date().getFullYear();
                    parsedDate = new Date(currentYear, month - 1, day);

                    // ë‹¤ìŒ ë‚ ì§œ (ì¼ìš”ì¼ ê±´ë„ˆë›°ê¸°)
                    parsedDate.setDate(parsedDate.getDate() + 1);
                    if (parsedDate.getDay() === 0) {
                        parsedDate.setDate(parsedDate.getDate() + 1);
                    }
                }

                // ì„±ê²½ì±… íŒŒì‹±
                const bookPattern = /([ê°€-í£0-9]+)\s+(\d+)ì¥/g;
                const matches = [...text.matchAll(bookPattern)];

                if (matches.length === 0) {
                    this.showToast('error', 'ì„±ê²½ì±… ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                    return;
                }

                const firstBook = matches[0][1];
                const firstChapter = parseInt(matches[0][2]);
                const nextFirstBook = this.getNextBookAndChapter(firstBook, firstChapter);

                if (!nextFirstBook) {
                    this.showToast('error', `${firstBook}ì˜ ë‹¤ìŒ ì¥ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
                    return;
                }

                let nextSecondBook = null;
                if (matches.length > 1) {
                    const secondBook = matches[1][1];
                    const secondChapter = parseInt(matches[1][2]);
                    nextSecondBook = this.getNextBookAndChapter(secondBook, secondChapter);
                }

                // UI ì—…ë°ì´íŠ¸
                const { dateInput, bookSelect, secondBookSelect, secondChapterSelect } = this.elements;

                if (parsedDate) {
                    dateInput.value = this.formatDateForInput(parsedDate);
                }

                bookSelect.value = nextFirstBook.book;
                this.updateChapterOptions();

                setTimeout(() => {
                    this.elements.chapterSelect.value = nextFirstBook.chapter;

                    if (nextSecondBook) {
                        secondBookSelect.value = nextSecondBook.book;
                        this.updateSecondChapterOptions();

                        setTimeout(() => {
                            secondChapterSelect.value = nextSecondBook.chapter;
                            this.checkFormValidity();
                            this.saveSettings();
                        }, 50);
                    } else {
                        secondBookSelect.value = '';
                        secondChapterSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';
                        this.checkFormValidity();
                        this.saveSettings();
                    }

                    this.showToast('success', 'ë‹¤ìŒ ë‚ ì§œë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤');
                }, 50);

            } catch (error) {
                console.error('íŒŒì‹± ì˜¤ë¥˜:', error);
                this.showToast('error', 'í…ìŠ¤íŠ¸ íŒŒì‹± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤');
            }
        },

        // ========== ë¬µìƒ ìƒì„± ==========
        generateDevotional() {
            try {
                const { bookSelect, chapterSelect, secondBookSelect, secondChapterSelect, dateInput } = this.elements;
                const { bibleData } = this.state;

                const selectedBook = bookSelect.value;
                const selectedChapter = chapterSelect.value;
                const secondSelectedBook = secondBookSelect.value;
                const secondSelectedChapter = secondChapterSelect.value;

                if (!selectedBook || !selectedChapter) {
                    this.showToast('error', 'ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”');
                    return;
                }

                if (secondSelectedBook && !secondSelectedChapter) {
                    this.showToast('error', 'ì¶”ê°€ ì„±ê²½ì±…ì˜ ì¥ë„ ì„ íƒí•´ì£¼ì„¸ìš”');
                    return;
                }

                let dateInfo = null;
                if (dateInput.value) {
                    dateInfo = this.formatDateString(dateInput.value);
                }

                // ì¼ìš”ì¼ ì²˜ë¦¬
                if (dateInfo && dateInfo.weekdayIndex === 0) {
                    this.state.rawDevotionalText = `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - ${dateInfo.formattedDate}\n\nì˜¤ëŠ˜ì€ ì¼ìš”ì¼ì…ë‹ˆë‹¤.\nì£¼ì¼ ì „í•´ì§€ëŠ” ë§ì”€ìœ¼ë¡œ í’ì„±í•œ í•˜ë£¨ ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.`;
                    this.displayDevotional(this.state.rawDevotionalText);
                    this.autoCopy();
                    return;
                }

                // ì²« ë²ˆì§¸ ì„±ê²½ ë°ì´í„°
                const chapterData = bibleData[selectedBook][selectedChapter];
                if (!chapterData) {
                    this.showToast('error', `${selectedBook} ${selectedChapter}ì¥ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
                    return;
                }

                // ë‘ ë²ˆì§¸ ì„±ê²½ ë°ì´í„°
                let secondChapterData = null;
                if (secondSelectedBook && secondSelectedChapter) {
                    secondChapterData = bibleData[secondSelectedBook][secondSelectedChapter];
                    if (!secondChapterData) {
                        this.showToast('error', `${secondSelectedBook} ${secondSelectedChapter}ì¥ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
                        return;
                    }
                }

                // í…ìŠ¤íŠ¸ ìƒì„±
                const devotionalText = this.createDevotionalText(
                    dateInfo,
                    selectedBook, selectedChapter, chapterData,
                    secondSelectedBook, secondSelectedChapter, secondChapterData
                );

                this.state.rawDevotionalText = devotionalText.raw;
                this.displayDevotional(devotionalText.raw, devotionalText.formatted);
                this.autoCopy();

            } catch (error) {
                console.error('ë¬µìƒ ìƒì„± ì˜¤ë¥˜:', error);
                this.showToast('error', `ì˜¤ë¥˜: ${error.message}`);
            }
        },

        createDevotionalText(dateInfo, book, chapter, chapterData, secondBook, secondChapter, secondChapterData) {
            let raw = '';
            let formatted = '';

            // í—¤ë”
            if (dateInfo) {
                raw += `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - ${dateInfo.formattedDate}\n\n`;
            } else {
                raw += `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš\n\n`;
            }

            if (secondBook && secondChapter) {
                raw += `${book} ${chapter}ì¥ ë° ${secondBook} ${secondChapter}ì¥ ì…ë‹ˆë‹¤\n`;
            } else {
                raw += `${book} ${chapter}ì¥ ì…ë‹ˆë‹¤\n`;
            }
            raw += "------------------------------------------------\n\n";

            // ì²« ë²ˆì§¸ ì„±ê²½
            raw += `**${book} ${chapter}ì¥**\n\n`;
            const verses = this.formatVerses(chapterData);
            raw += verses.join('\n\n');

            // ë‘ ë²ˆì§¸ ì„±ê²½
            if (secondChapterData) {
                raw += '\n\n----------------------------------------\n\n';
                raw += `**${secondBook} ${secondChapter}ì¥**\n\n`;
                const secondVerses = this.formatVerses(secondChapterData);
                raw += secondVerses.join('\n\n');
            }

            // ë¬µìƒ ê°€ì´ë“œ
            raw += '\n\n------------------------------------------------\n\n';
            raw += 'ğŸ’Œë¬µìƒë°©ë²•(ì°¸ê³ )ğŸ’Œ\n';
            raw += '1. ì‹œì‘ê¸°ë„ğŸ™ í›„ ë§ì”€ ì½ê¸°(ì²œì²œíˆ ê¹Šê²Œ)\n\n\n';
            raw += '2. ë¬µìƒí•˜ê¸°\n';
            raw += 'ğŸ‘‰ë‚˜ì—ê²Œ ë¬µìƒë˜ëŠ” ë§ì”€ë²”ìœ„(êµ¬ì ˆ)ì˜ "í•µì‹¬ì œëª©<Keyword >" ì ì–´ë³´ê¸°\n';
            raw += 'ğŸ‘‰"í•µì‹¬ì œëª©<Keyword >" ì— ë§ëŠ” ë¬µìƒ, ì£¼ë‹˜ê³¼ì˜ ì•½ì†/êµ¬ì²´ì  ì‹¤ì²œê³„íš ì„¸ì›Œë³´ê¸°\n\n\n';
            raw += '3. ë§ˆë¬´ë¦¬ê¸°ë„ğŸ™ í›„ ëŒ“ê¸€ë¡œ ë¬µìƒ ë‚˜ëˆ„ê¸° (ë§ì”€êµ¬ì ˆ/ë¬µìƒ/ì‹¤ì²œ ë“±ì„ ëŒ“ê¸€ë¡œ ë‹¬ì•„ ê³µìœ í•´ì£¼ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤!)\n';
            raw += '------------------------------------------------';

            // HTML í¬ë§·
            formatted = raw
                .replace(/\n/g, '<br>')
                .replace(/\*\*(.*?)\*\*/g, '<strong class="bible-title">$1</strong>');

            return { raw, formatted };
        },

        formatVerses(chapterData) {
            const sortedNumbers = Object.keys(chapterData)
                .map(v => parseInt(v))
                .sort((a, b) => a - b);

            return sortedNumbers.map(num => `${num}. ${chapterData[num.toString()]}`);
        },

        displayDevotional(rawText, formattedText = null) {
            const { devotional, copyButton, devotionalContainer } = this.elements;

            // ë‹¨ì¼ ë¬µìƒì¸ ê²½ìš° ê¸°ì¡´ êµ¬ì¡° ì‚¬ìš©
            devotionalContainer.innerHTML = `
                <div class="devotional-container">
                    <div class="devotional-content">${formattedText || rawText.replace(/\n/g, '<br>')}</div>
                    <button id="copyButton" class="btn btn-ghost btn-block mt-md">
                        <span>ğŸ“‹</span>
                        <span>í´ë¦½ë³´ë“œì— ë³µì‚¬</span>
                    </button>
                </div>
            `;

            // ë³µì‚¬ ë²„íŠ¼ ì´ë²¤íŠ¸ ì¬ë°”ì¸ë”©
            document.getElementById('copyButton').addEventListener('click', () => this.copyDevotionalText());
        },

        // ========== 3ì¼ ì—°ì† ìƒì„± ==========
        generate3DaysDevotional() {
            try {
                const { bookSelect, chapterSelect, secondBookSelect, secondChapterSelect, dateInput, devotionalContainer } = this.elements;
                const { bibleData } = this.state;

                const selectedBook = bookSelect.value;
                const selectedChapter = parseInt(chapterSelect.value);
                const secondSelectedBook = secondBookSelect.value;
                const secondSelectedChapter = parseInt(secondChapterSelect.value) || null;

                if (!selectedBook || !selectedChapter) {
                    this.showToast('error', 'ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”');
                    return;
                }

                let currentDate = dateInput.value ? new Date(dateInput.value) : new Date();
                devotionalContainer.innerHTML = '';

                let currentBookInfo = { book: selectedBook, chapter: selectedChapter };
                let currentSecondBookInfo = secondSelectedBook ?
                    { book: secondSelectedBook, chapter: secondSelectedChapter } : null;

                const devotionalData = [];
                let attempts = 0;

                while (devotionalData.length < 3 && attempts < 10) {
                    attempts++;

                    const dateInfo = this.formatDateString(currentDate.toISOString().split('T')[0]);

                    // ì¼ìš”ì¼ ê±´ë„ˆë›°ê¸°
                    if (dateInfo.weekdayIndex === 0) {
                        currentDate.setDate(currentDate.getDate() + 1);
                        continue;
                    }

                    const chapterData = bibleData[currentBookInfo.book]?.[currentBookInfo.chapter.toString()];
                    if (!chapterData) {
                        currentDate.setDate(currentDate.getDate() + 1);
                        const nextBook = this.getNextBookAndChapter(currentBookInfo.book, currentBookInfo.chapter);
                        if (nextBook) currentBookInfo = nextBook;
                        continue;
                    }

                    let secondChapterData = null;
                    if (currentSecondBookInfo) {
                        secondChapterData = bibleData[currentSecondBookInfo.book]?.[currentSecondBookInfo.chapter.toString()];
                    }

                    const devotionalText = this.createDevotionalText(
                        dateInfo,
                        currentBookInfo.book, currentBookInfo.chapter, chapterData,
                        currentSecondBookInfo?.book, currentSecondBookInfo?.chapter, secondChapterData
                    );

                    devotionalData.push({
                        dateStr: dateInfo.formattedDate,
                        rawText: devotionalText.raw,
                        formattedText: devotionalText.formatted
                    });

                    currentDate.setDate(currentDate.getDate() + 1);

                    const nextBook = this.getNextBookAndChapter(currentBookInfo.book, currentBookInfo.chapter);
                    if (nextBook) {
                        currentBookInfo = nextBook;
                    } else {
                        break;
                    }

                    if (currentSecondBookInfo) {
                        const nextSecondBook = this.getNextBookAndChapter(currentSecondBookInfo.book, currentSecondBookInfo.chapter);
                        if (nextSecondBook) {
                            currentSecondBookInfo = nextSecondBook;
                        } else {
                            currentSecondBookInfo = null;
                        }
                    }
                }

                if (devotionalData.length === 0) {
                    devotionalContainer.innerHTML = '<div class="placeholder-text">ë¬µìƒì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>';
                    return;
                }

                // ë³µì‚¬ ë²„íŠ¼ ê·¸ë£¹
                let html = '<div class="copy-buttons-group">';
                devotionalData.forEach((data, index) => {
                    const label = index === 0 ? `ğŸ“‹ 1ì¼ì°¨ (ìë™ë³µì‚¬)` : `ğŸ“‹ ${index + 1}ì¼ì°¨ ${data.dateStr}`;
                    html += `<button class="btn ${index === 0 ? 'btn-secondary' : 'btn-primary'}" onclick="App.copySpecificDevotional(${index})">${label}</button>`;
                });
                html += '</div>';

                // ê° ë‚ ì§œë³„ ë¬µìƒ
                devotionalData.forEach((data, index) => {
                    html += `
                        <div class="devotional-container">
                            <div class="devotional-header">
                                <div class="devotional-date">ğŸ“… ${data.dateStr}</div>
                            </div>
                            <div class="devotional-content">${data.formattedText}</div>
                        </div>
                    `;
                });

                devotionalContainer.innerHTML = html;

                // ë°ì´í„° ì €ì¥ (ë³µì‚¬ìš©)
                this.state.devotionalData = devotionalData;

                // 1ì¼ì°¨ ìë™ ë³µì‚¬
                this.copySpecificDevotional(0);

            } catch (error) {
                console.error('3ì¼ ì—°ì† ìƒì„± ì˜¤ë¥˜:', error);
                this.showToast('error', `ì˜¤ë¥˜: ${error.message}`);
            }
        },

        copySpecificDevotional(index) {
            const data = this.state.devotionalData?.[index];
            if (!data) return;

            navigator.clipboard.writeText(data.rawText)
                .then(() => {
                    this.showToast('success', `${index + 1}ì¼ì°¨ ë¬µìƒì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤`);
                })
                .catch(err => {
                    console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                    this.showToast('error', 'ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
                });
        },

        // ========== í´ë¦½ë³´ë“œ ==========
        autoCopy() {
            navigator.clipboard.writeText(this.state.rawDevotionalText)
                .then(() => {
                    this.showToast('success', 'í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');
                    this.updateCopyButton(true);
                })
                .catch(err => {
                    console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                });
        },

        copyDevotionalText() {
            if (!this.state.rawDevotionalText) return;

            navigator.clipboard.writeText(this.state.rawDevotionalText)
                .then(() => {
                    this.showToast('success', 'í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');
                    this.updateCopyButton(true);
                })
                .catch(err => {
                    console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                    this.showToast('error', 'ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
                });
        },

        updateCopyButton(copied) {
            const copyButton = document.getElementById('copyButton');
            if (!copyButton) return;

            if (copied) {
                copyButton.innerHTML = '<span>âœ“</span><span>ë³µì‚¬ë¨</span>';
                copyButton.classList.remove('btn-ghost');
                copyButton.classList.add('btn-secondary');

                setTimeout(() => {
                    copyButton.innerHTML = '<span>ğŸ“‹</span><span>í´ë¦½ë³´ë“œì— ë³µì‚¬</span>';
                    copyButton.classList.remove('btn-secondary');
                    copyButton.classList.add('btn-ghost');
                }, 3000);
            }
        },

        // ========== í† ìŠ¤íŠ¸ ì•Œë¦¼ ==========
        showToast(type, message) {
            const { toastContainer } = this.elements;

            const icons = {
                success: 'âœ“',
                error: 'âš ',
                warning: 'âš¡',
                info: 'â„¹'
            };

            const toast = document.createElement('div');
            toast.className = `toast toast-${type === 'warning' ? 'info' : type}`;
            toast.innerHTML = `
                <span class="toast-icon">${icons[type] || icons.info}</span>
                <span>${message}</span>
            `;

            toastContainer.appendChild(toast);

            // ì• ë‹ˆë©”ì´ì…˜ì„ ìœ„í•œ ì§€ì—°
            requestAnimationFrame(() => {
                toast.classList.add('show');
            });

            // ìë™ ì œê±°
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }
    };

    // ========== ì•± ì‹œì‘ ==========
    document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8SC89GL"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
</html>
