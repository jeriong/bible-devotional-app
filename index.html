<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ë§Œë‚˜ - ì„±ê²½ ë¬µìƒ ì•±</title>
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸš</text></svg>">
    <!-- ë©”íƒ€ íƒœê·¸ -->
    <meta name="description" content="ì˜¤ëŠ˜ì˜ ë§Œë‚˜ - 2025ë…„ ì„±ê²½ ë¬µìƒ ì•±">
    <meta name="keywords" content="ì„±ê²½, ë¬µìƒ, ë§ì”€, ì˜¤ëŠ˜ì˜ ë§Œë‚˜">
<style>
        /* í°íŠ¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        /* ì „ì²´ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        h1 {
            text-align: center;
            color: #4682B4;
            margin-bottom: 20px;
            font-weight: 700;
        }
        .status {
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-weight: 500;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .loading {
            background-color: #cce5ff;
            color: #004085;
        }
        
        /* ë ˆì´ì•„ì›ƒ */
        .columns {
            display: flex;
            gap: 20px;
        }
        .column {
            flex: 1;
        }
        
        /* í¼ ìš”ì†Œ */
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        select, button, input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 16px;
            font-family: 'Noto Sans KR', Arial, sans-serif;
        }
        select, input[type="date"] {
            background-color: white;
        }
        button {
            background-color: #4682B4;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #366b96;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        /* ë³µì‚¬ ë²„íŠ¼ */
        .copy-button {
            background-color: #28a745;
            margin-top: 10px;
            display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        }
        .copy-button:hover {
            background-color: #218838;
        }
        .copy-button.copied {
            background-color: #6c757d;
        }
        
        /* ì„¹ì…˜ ì œëª© */
        h2 {
            margin-top: 0;
            color: #4682B4;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
            font-weight: 500;
        }
        
        /* ë¬µìƒ ì˜ì—­ */
        .devotional-container {
            position: relative;
        }
        .devotional {
            white-space: pre-wrap;
            line-height: 1.6;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #4682B4;
        }
        strong {
            color: #366b96;
        }
        
        /* ë³µì‚¬ ì„±ê³µ ë©”ì‹œì§€ */
        .copy-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        .copy-message.show {
            opacity: 1;
        }
        
        /* ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ */
        @media (max-width: 768px) {
            .columns {
                flex-direction: column;
            }
            .container {
                padding: 15px;
            }
        }
        
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .spinner {
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #4682B4;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* í‘¸í„° */
        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 14px;
            color: #6c757d;
        }
        
        /* ì„±ê²½ì±… ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        .bible-grid-toggle {
            text-align: right;
            margin-bottom: 10px;
        }

        .toggle-button {
            background-color: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
            color: #334155;
            transition: all 0.2s;
            width: auto;
            margin-top: 0;
        }

        .toggle-button:hover {
            background-color: #e2e8f0;
        }

        .toggle-icon {
            margin-right: 5px;
        }

        .bible-grid {
            margin-top: 10px;
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .bible-categories {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .bible-category h3 {
            color: #4682B4;
            margin-top: 0;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 16px;
            font-weight: 600;
        }

        .bible-books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }

        .bible-book {
            background-color: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 70px;
        }

        .bible-book:hover {
            background-color: #e2e8f0;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .bible-book.selected {
            background-color: #4682B4;
            color: white;
            border-color: #366b96;
        }

        .book-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .book-name {
            font-size: 12px;
            line-height: 1.2;
            word-break: keep-all;
        }

        .old-testament .bible-book {
            background-color: #f3f8ff;
        }

        .new-testament .bible-book {
            background-color: #f0f9ff;
        }

        .old-testament .bible-book.selected {
            background-color: #5a8dcb;
        }

        .new-testament .bible-book.selected {
            background-color: #4682B4;
        }

        /* ë°˜ì‘í˜• ì¡°ì • */
        @media (max-width: 768px) {
            .bible-books-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .bible-book {
                height: 60px;
                padding: 8px 5px;
            }
            
            .book-icon {
                font-size: 20px;
                margin-bottom: 4px;
            }
            
            .book-name {
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš ë§Œë‚˜ ìƒì„±ê¸° ğŸš</h1>
        
        <div id="status" class="status loading">ì„±ê²½ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...<div class="spinner"></div></div>
        
        <div class="columns">
            <div class="column">
                <h2>ì„¤ì •</h2>
                
                <div class="form-group">
                    <label for="date">1. ë‚ ì§œ ì„ íƒ (ì„ íƒì‚¬í•­):</label>
                    <input type="date" id="date" class="date-picker">
                </div>
                
                <div class="form-group">
                    <label for="book">2. ì„±ê²½ì±… ì„ íƒ:</label>
                    <select id="book">
                        <option value="" disabled selected>ì„±ê²½ì±…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        <!-- ì„±ê²½ì±… ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="chapter">3. ì¥ ì„ íƒ:</label>
                    <select id="chapter">
                        <option value="" disabled selected>ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>
                        <!-- ì¥ ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                    </select>
                </div>
                
                <button id="generateButton">ë¬µìƒ ìƒì„±í•˜ê¸°</button>
                
                <hr style="margin: 20px 0; border-top: 1px dashed #ced4da;">
                
                <div class="form-group">
                    <label for="secondBook">4. ì¶”ê°€ ì„±ê²½ì±… ì„ íƒ (ì„ íƒì‚¬í•­):</label>
                    <select id="secondBook">
                        <option value="" selected>ì„ íƒí•˜ì§€ ì•ŠìŒ</option>
                        <!-- ì„±ê²½ì±… ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="secondChapter">5. ì¶”ê°€ ì¥ ì„ íƒ (ì„ íƒì‚¬í•­):</label>
                    <select id="secondChapter">
                        <option value="" selected>ì„ íƒí•˜ì§€ ì•ŠìŒ</option>
                        <!-- ì¥ ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                    </select>
                </div>
            </div>
            
            <div class="column">
                <h2>ì˜¤ëŠ˜ì˜ ë§Œë‚˜</h2>
                <div class="devotional-container">
                    <div id="devotional" class="devotional">
                        ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•œ í›„ "ë¬µìƒ ìƒì„±í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                    </div>
                    <button id="copyButton" class="copy-button">ğŸ“‹ ë³µì‚¬í•˜ê¸°</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>ì´ ì•±ì€ GitHubì—ì„œ í˜¸ìŠ¤íŒ…ë˜ëŠ” ì„±ê²½ ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
        </footer>
    </div>
    
    <!-- ë³µì‚¬ ì„±ê³µ ë©”ì‹œì§€ -->
    <div id="copyMessage" class="copy-message">í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let bibleData = null;
        let rawDevotionalText = ""; // ì›ë³¸ í…ìŠ¤íŠ¸ ì €ì¥ìš© ë³€ìˆ˜ ì¶”ê°€
        const statusElement = document.getElementById('status');
        const dateInput = document.getElementById('date'); // date inputìœ¼ë¡œ ë³€ê²½
        const bookSelect = document.getElementById('book');
        const chapterSelect = document.getElementById('chapter');
        const secondBookSelect = document.getElementById('secondBook');
        const secondChapterSelect = document.getElementById('secondChapter');
        const generateButton = document.getElementById('generateButton');
        const devotionalElement = document.getElementById('devotional');
        const copyButton = document.getElementById('copyButton');
        const copyMessage = document.getElementById('copyMessage');
        
        // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
        function setTodayAsDefault() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            dateInput.value = `${year}-${month}-${day}`;
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì •
        setTodayAsDefault();
        
        // GitHubì—ì„œ ì„±ê²½ ë°ì´í„° ë¡œë“œ
        async function loadBibleData() {
            try {
                statusElement.className = 'status loading';
                statusElement.innerHTML = 'ì„±ê²½ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...<div class="spinner"></div>';
                
                // GitHubì—ì„œ ë°ì´í„° ìš”ì²­
                const response = await fetch('https://raw.githubusercontent.com/jeriong/bible-data/refs/heads/main/%EC%84%B1%EA%B2%BD.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP ì˜¤ë¥˜: ${response.status}`);
                }
                
                bibleData = await response.json();
                
                // ë°ì´í„° ë¡œë“œ ì„±ê³µ ë©”ì‹œì§€
                statusElement.className = 'status success';
                statusElement.textContent = 'ì„±ê²½ ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!';
                
                // UI ì´ˆê¸°í™”
                initializeUI();
                
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                statusElement.className = 'status error';
                statusElement.textContent = `ì„±ê²½ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`;
                
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë°±ì—… ë°ì´í„° ì‚¬ìš©
                useSampleData();
            }
        }
        
        // ë°±ì—… ë°ì´í„° ì‚¬ìš© (ì˜¤ë¥˜ ì‹œ ìµœì†Œí•œì˜ ê¸°ëŠ¥ ì œê³µ)
        function useSampleData() {
            bibleData = {
                "ì°½ì„¸ê¸°": {
                    "1": {
                        "1": "íƒœì´ˆì— í•˜ë‚˜ë‹˜ì´ ì²œì§€ë¥¼ ì°½ì¡°í•˜ì‹œë‹ˆë¼",
                        "2": "ë•…ì´ í˜¼ëˆí•˜ê³  ê³µí—ˆí•˜ë©° í‘ì•”ì´ ê¹ŠìŒ ìœ„ì— ìˆê³  í•˜ë‚˜ë‹˜ì˜ ì˜ì€ ìˆ˜ë©´ ìœ„ì— ìš´í–‰í•˜ì‹œë‹ˆë¼",
                        "3": "í•˜ë‚˜ë‹˜ì´ ê°€ë¼ì‚¬ëŒ€ ë¹›ì´ ìˆìœ¼ë¼ í•˜ì‹œë§¤ ë¹›ì´ ìˆì—ˆê³ ",
                        "4": "ë¹›ì´ í•˜ë‚˜ë‹˜ì´ ë³´ì‹œê¸°ì— ì¢‹ì•˜ë”ë¼ í•˜ë‚˜ë‹˜ì´ ë¹›ê³¼ ì–´ë‘ ì„ ë‚˜ëˆ„ì‚¬"
                    }
                },
                "ìš”í•œë³µìŒ": {
                    "3": {
                        "16": "í•˜ë‚˜ë‹˜ì´ ì„¸ìƒì„ ì´ì²˜ëŸ¼ ì‚¬ë‘í•˜ì‚¬ ë…ìƒìë¥¼ ì£¼ì…¨ìœ¼ë‹ˆ ì´ëŠ” ì €ë¥¼ ë¯¿ëŠ” ìë§ˆë‹¤ ë©¸ë§ì¹˜ ì•Šê³  ì˜ìƒì„ ì–»ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë‹ˆë¼"
                    }
                },
                "ì‹œí¸": {
                    "23": {
                        "1": "ì—¬í˜¸ì™€ëŠ” ë‚˜ì˜ ëª©ìì‹œë‹ˆ ë‚´ê²Œ ë¶€ì¡±í•¨ì´ ì—†ìœ¼ë¦¬ë¡œë‹¤",
                        "2": "ê·¸ê°€ ë‚˜ë¥¼ í‘¸ë¥¸ ì´ˆì¥ì— ëˆ„ì´ì‹œë©° ì‰´ ë§Œí•œ ë¬¼ê°€ë¡œ ì¸ë„í•˜ì‹œëŠ”ë„ë‹¤"
                    }
                }
            };
            
            statusElement.innerHTML += "<br><small>(ì¼ë¶€ ì„±ê²½ êµ¬ì ˆë§Œ ì œê³µë©ë‹ˆë‹¤. ë°ì´í„° ì˜¤ë¥˜ê°€ ì§€ì†ë˜ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.)</small>";
            
            // UI ì´ˆê¸°í™”
            initializeUI();
        }
        
        // UI ì´ˆê¸°í™”
        function initializeUI() {
            // ì„±ê²½ì±… ì˜µì…˜ ìƒì„±
            generateBookOptions();
            generateSecondBookOptions();
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
            bookSelect.addEventListener('change', updateChapterOptions);
            chapterSelect.addEventListener('change', checkFormValidity);
            secondBookSelect.addEventListener('change', updateSecondChapterOptions);
            secondChapterSelect.addEventListener('change', checkFormValidity);
            generateButton.addEventListener('click', generateDevotional);
            copyButton.addEventListener('click', copyDevotionalText);
            
            // ì´ˆê¸° í¼ ìƒíƒœ í™•ì¸
            checkFormValidity();
        }
        
        // ì„±ê²½ 66ê¶Œ í‘œì¤€ ëª©ë¡
        const standardBooks = [
            'ì°½ì„¸ê¸°', 'ì¶œì• êµ½ê¸°', 'ë ˆìœ„ê¸°', 'ë¯¼ìˆ˜ê¸°', 'ì‹ ëª…ê¸°', 'ì—¬í˜¸ìˆ˜ì•„', 'ì‚¬ì‚¬ê¸°', 'ë£»ê¸°',
            'ì‚¬ë¬´ì—˜ìƒ', 'ì‚¬ë¬´ì—˜í•˜', 'ì—´ì™•ê¸°ìƒ', 'ì—´ì™•ê¸°í•˜', 'ì—­ëŒ€ìƒ', 'ì—­ëŒ€í•˜', 'ì—ìŠ¤ë¼', 'ëŠí—¤ë¯¸ì•¼',
            'ì—ìŠ¤ë”', 'ìš¥ê¸°', 'ì‹œí¸', 'ì ì–¸', 'ì „ë„ì„œ', 'ì•„ê°€', 'ì´ì‚¬ì•¼', 'ì˜ˆë ˆë¯¸ì•¼', 'ì˜ˆë ˆë¯¸ì•¼ì• ê°€',
            'ì—ìŠ¤ê²”', 'ë‹¤ë‹ˆì—˜', 'í˜¸ì„¸ì•„', 'ìš”ì—˜', 'ì•„ëª¨ìŠ¤', 'ì˜¤ë°”ëŒœ', 'ìš”ë‚˜', 'ë¯¸ê°€', 'ë‚˜í›”', 'í•˜ë°•êµ­',
            'ìŠ¤ë°”ëƒ', 'í•™ê°œ', 'ìŠ¤ê°€ë´', 'ë§ë¼ê¸°', 'ë§ˆíƒœë³µìŒ', 'ë§ˆê°€ë³µìŒ', 'ëˆ„ê°€ë³µìŒ', 'ìš”í•œë³µìŒ',
            'ì‚¬ë„í–‰ì „', 'ë¡œë§ˆì„œ', 'ê³ ë¦°ë„ì „ì„œ', 'ê³ ë¦°ë„í›„ì„œ', 'ê°ˆë¼ë””ì•„ì„œ', 'ì—ë² ì†Œì„œ', 'ë¹Œë¦½ë³´ì„œ',
            'ê³¨ë¡œìƒˆì„œ', 'ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ', 'ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ', 'ë””ëª¨ë°ì „ì„œ', 'ë””ëª¨ë°í›„ì„œ', 'ë””ë„ì„œ',
            'ë¹Œë ˆëª¬ì„œ', 'íˆë¸Œë¦¬ì„œ', 'ì•¼ê³ ë³´ì„œ', 'ë² ë“œë¡œì „ì„œ', 'ë² ë“œë¡œí›„ì„œ', 'ìš”í•œ1ì„œ', 'ìš”í•œ2ì„œ',
            'ìš”í•œ3ì„œ', 'ìœ ë‹¤ì„œ', 'ìš”í•œê³„ì‹œë¡'
        ];
        
        // ì„±ê²½ì±… ì˜µì…˜ ìƒì„±
        function generateBookOptions() {
            bookSelect.innerHTML = '<option value="" disabled selected>ì„±ê²½ì±…ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            // ë°ì´í„°ì— ìˆëŠ” ì„±ê²½ì±…ë§Œ í•„í„°ë§
            const validBooks = standardBooks.filter(book => book in bibleData);
            
            // êµ¬ì•½ê³¼ ì‹ ì•½ ì±… êµ¬ë¶„
            let inOldTestament = true;
            
            for (const book of validBooks) {
                // ë§ë¼ê¸°(êµ¬ì•½ ë§ˆì§€ë§‰ ì±…)ì™€ ë§ˆíƒœë³µìŒ(ì‹ ì•½ ì²« ì±…) ì‚¬ì´ì— êµ¬ë¶„ì„  ì¶”ê°€
                if (inOldTestament && book === 'ë§ˆíƒœë³µìŒ') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "-------------------------------------------";
                    bookSelect.appendChild(separator);
                    inOldTestament = false;
                }
                
                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                bookSelect.appendChild(option);
            }
        }
        
        // ë‘ ë²ˆì§¸ ì„±ê²½ì±… ì˜µì…˜ ìƒì„±
        function generateSecondBookOptions() {
            secondBookSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';
            
            // ë°ì´í„°ì— ìˆëŠ” ì„±ê²½ì±…ë§Œ í•„í„°ë§
            const validBooks = standardBooks.filter(book => book in bibleData);
            
            // êµ¬ì•½ê³¼ ì‹ ì•½ ì±… êµ¬ë¶„
            let inOldTestament = true;
            
            for (const book of validBooks) {
                // ë§ë¼ê¸°(êµ¬ì•½ ë§ˆì§€ë§‰ ì±…)ì™€ ë§ˆíƒœë³µìŒ(ì‹ ì•½ ì²« ì±…) ì‚¬ì´ì— êµ¬ë¶„ì„  ì¶”ê°€
                if (inOldTestament && book === 'ë§ˆíƒœë³µìŒ') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "-------------------------------------------";
                    secondBookSelect.appendChild(separator);
                    inOldTestament = false;
                }
                
                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                secondBookSelect.appendChild(option);
            }
        }
        
        // ì¥ ì˜µì…˜ ì—…ë°ì´íŠ¸
        function updateChapterOptions() {
            chapterSelect.innerHTML = '<option value="" disabled selected>ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            const selectedBook = bookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) {
                return;
            }
            
            // ì¥ ë²ˆí˜¸ë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ì •ë ¬
            const chapters = Object.keys(bibleData[selectedBook])
                .map(chapter => parseInt(chapter))
                .sort((a, b) => a - b);
            
            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}ì¥`;
                chapterSelect.appendChild(option);
            }
            
            // í¼ ìƒíƒœ í™•ì¸
            checkFormValidity();
        }
        
        // ë‘ ë²ˆì§¸ ì¥ ì˜µì…˜ ì—…ë°ì´íŠ¸
        function updateSecondChapterOptions() {
            secondChapterSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';
            
            const selectedBook = secondBookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) {
                return;
            }
            
            // ì¥ ë²ˆí˜¸ë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ì •ë ¬
            const chapters = Object.keys(bibleData[selectedBook])
                .map(chapter => parseInt(chapter))
                .sort((a, b) => a - b);
            
            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}ì¥`;
                secondChapterSelect.appendChild(option);
            }
            
            // í¼ ìƒíƒœ í™•ì¸
            checkFormValidity();
        }
        
        // í¼ ìƒíƒœ í™•ì¸ - ë‚ ì§œ ì„ íƒ ì—†ì´ë„ ìƒì„± ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •, ë‘ ë²ˆì§¸ ì¥ ì„ íƒì€ ì„ íƒì‚¬í•­
        function checkFormValidity() {
            // ì²« ë²ˆì§¸ ì„±ê²½ì±…ê³¼ ì¥ë§Œ í•„ìˆ˜ë¡œ ì„¤ì •
            const isValid = bookSelect.value && chapterSelect.value;
            
            // ë‘ ë²ˆì§¸ ì„±ê²½ì±… ì„ íƒ ì‹œ, ì¥ë„ ì„ íƒí•´ì•¼ ìœ íš¨
            const isSecondValid = !secondBookSelect.value || 
                                (secondBookSelect.value && secondChapterSelect.value);
            
            generateButton.disabled = !(isValid && isSecondValid);
        }
        
        // ë‚ ì§œ ë¬¸ìì—´ í¬ë§· ë³€í™˜ (YYYY-MM-DD -> M/D(ìš”ì¼))
        function formatDateString(dateStr) {
            if (!dateStr) return null;
            
            const date = new Date(dateStr);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            const weekday = weekdays[date.getDay()];
            
            return {
                formattedDate: `${month}/${day}(${weekday})`,
                weekdayIndex: date.getDay()
            };
        }
        
        // ë¬µìƒ ìƒì„±
        function generateDevotional() {
            try {
                // ì…ë ¥ê°’ í™•ì¸
                const selectedBook = bookSelect.value;
                const selectedChapter = chapterSelect.value;
                const secondSelectedBook = secondBookSelect.value;
                const secondSelectedChapter = secondChapterSelect.value;
                
                if (!selectedBook || !selectedChapter) {
                    alert('ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // ë‘ ë²ˆì§¸ ì„±ê²½ì±…ì´ ì„ íƒë˜ì—ˆì§€ë§Œ ì¥ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°
                if (secondSelectedBook && !secondSelectedChapter) {
                    alert('ë‘ ë²ˆì§¸ ì„±ê²½ì±…ì„ ì„ íƒí•œ ê²½ìš° ì¥ë„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // ë‚ ì§œ ì •ë³´ (ì„ íƒì )
                let dateInfo = null;
                if (dateInput.value) {
                    dateInfo = formatDateString(dateInput.value);
                }
                
                // ì¼ìš”ì¼ì´ê³  ë‚ ì§œê°€ ì„ íƒëœ ê²½ìš°
                if (dateInfo && dateInfo.weekdayIndex === 0) {
                    rawDevotionalText = `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - ${dateInfo.formattedDate}\n\nì˜¤ëŠ˜ì€ ì¼ìš”ì¼ì…ë‹ˆë‹¤.\nì£¼ì¼ ì „í•´ì§€ëŠ” ë§ì”€ìœ¼ë¡œ í’ì„±í•œ í•˜ë£¨ ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.`;
                    
                    devotionalElement.textContent = rawDevotionalText;
                    // ë³µì‚¬ ë²„íŠ¼ í‘œì‹œ
                    copyButton.style.display = 'block';
                    
                    // ìë™ìœ¼ë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬
                    navigator.clipboard.writeText(rawDevotionalText)
                        .then(() => {
                            copyButton.textContent = 'âœ“ ë³µì‚¬ë¨';
                            copyButton.classList.add('copied');
                            showCopyMessage();
                        })
                        .catch(err => {
                            console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                        });
                    
                    return;
                }
                
                // ì²« ë²ˆì§¸ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸°
                const chapterData = bibleData[selectedBook][selectedChapter];
                
                if (!chapterData) {
                    rawDevotionalText = `${selectedBook} ${selectedChapter}ì¥ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
                    devotionalElement.textContent = rawDevotionalText;
                    // ì´ ê²½ìš°ì—ëŠ” ë³µì‚¬ ë²„íŠ¼ ìˆ¨ê¹€
                    copyButton.style.display = 'none';
                    return;
                }
                
                // ë‘ ë²ˆì§¸ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸° (ì„ íƒì )
                let secondChapterData = null;
                if (secondSelectedBook && secondSelectedChapter) {
                    secondChapterData = bibleData[secondSelectedBook][secondSelectedChapter];
                    
                    if (!secondChapterData) {
                        rawDevotionalText = `${secondSelectedBook} ${secondSelectedChapter}ì¥ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
                        devotionalElement.textContent = rawDevotionalText;
                        // ì´ ê²½ìš°ì—ëŠ” ë³µì‚¬ ë²„íŠ¼ ìˆ¨ê¹€
                        copyButton.style.display = 'none';
                        return;
                    }
                }
                
                // ì²« ë²ˆì§¸ ì ˆ ë°ì´í„° ì²˜ë¦¬
                const verses = [];
                const sortedVerseNumbers = Object.keys(chapterData)
                    .map(verse => parseInt(verse))
                    .sort((a, b) => a - b);
                
                for (const verseNum of sortedVerseNumbers) {
                    verses.push(`${verseNum}. ${chapterData[verseNum.toString()]}`);
                }
                
                // ë‘ ë²ˆì§¸ ì ˆ ë°ì´í„° ì²˜ë¦¬ (ì„ íƒì )
                const secondVerses = [];
                if (secondChapterData) {
                    const sortedSecondVerseNumbers = Object.keys(secondChapterData)
                        .map(verse => parseInt(verse))
                        .sort((a, b) => a - b);
                    
                    for (const verseNum of sortedSecondVerseNumbers) {
                        secondVerses.push(`${verseNum}. ${secondChapterData[verseNum.toString()]}`);
                    }
                }
                
                // ë¬µìƒ ë‚´ìš© ìƒì„± (ì›ë³¸ í…ìŠ¤íŠ¸ ì €ì¥)
                rawDevotionalText = '';
                
                // ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ë‚ ì§œ ì •ë³´ ì¶”ê°€
                if (dateInfo) {
                    rawDevotionalText += `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - ${dateInfo.formattedDate}\n\n`;
                } else {
                    rawDevotionalText += `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš\n\n`;
                }
                
                // ì„ íƒëœ ì„±ê²½ì±… ì •ë³´ í‘œì‹œ
                if (secondSelectedBook && secondSelectedChapter) {
                    rawDevotionalText += `${selectedBook} ${selectedChapter}ì¥ ë° ${secondSelectedBook} ${secondSelectedChapter}ì¥ ì…ë‹ˆë‹¤\n`;
                } else {
                    rawDevotionalText += `${selectedBook} ${selectedChapter}ì¥ ì…ë‹ˆë‹¤\n`;
                }
                rawDevotionalText += "------------------------------------------------\n\n";
                
                // ì²« ë²ˆì§¸ ì„±ê²½ ë‚´ìš©
                rawDevotionalText += `**${selectedBook} ${selectedChapter}ì¥**\n\n`;
                rawDevotionalText += verses.join('\n\n');
                
                // ë‘ ë²ˆì§¸ ì„±ê²½ ë‚´ìš© (ì„ íƒì )
                if (secondSelectedBook && secondSelectedChapter && secondVerses.length > 0) {
                    rawDevotionalText += '\n\n';
                    rawDevotionalText += "----------------------------------------\n\n";
                    rawDevotionalText += `**${secondSelectedBook} ${secondSelectedChapter}ì¥**\n\n`;
                    rawDevotionalText += secondVerses.join('\n\n');
                }
                
                rawDevotionalText += '\n\n';
                rawDevotionalText += "------------------------------------------------\n\n";
                rawDevotionalText += "ğŸ’Œë¬µìƒë°©ë²•(ì°¸ê³ )ğŸ’Œ\n";
                rawDevotionalText += "1. ì‹œì‘ê¸°ë„ğŸ™ í›„ ë§ì”€ ì½ê¸°(ì²œì²œíˆ ê¹Šê²Œ)\n\n\n";
                rawDevotionalText += "2. ë¬µìƒí•˜ê¸°\n";
                rawDevotionalText += "ğŸ‘‰ë‚˜ì—ê²Œ ë¬µìƒë˜ëŠ” ë§ì”€ë²”ìœ„(êµ¬ì ˆ)ì˜ \"í•µì‹¬ì œëª©<Keyword >\" ì ì–´ë³´ê¸°\n";
                rawDevotionalText += "ğŸ‘‰\"í•µì‹¬ì œëª©<Keyword >\" ì— ë§ëŠ” ë¬µìƒ, ì£¼ë‹˜ê³¼ì˜ ì•½ì†/êµ¬ì²´ì  ì‹¤ì²œê³„íš ì„¸ì›Œë³´ê¸°\n\n\n";
                rawDevotionalText += "3. ë§ˆë¬´ë¦¬ê¸°ë„ğŸ™ í›„ ëŒ“ê¸€ë¡œ ë¬µìƒ ë‚˜ëˆ„ê¸° (ë§ì”€êµ¬ì ˆ/ë¬µìƒ/ì‹¤ì²œ ë“±ì„ ëŒ“ê¸€ë¡œ ë‹¬ì•„ ê³µìœ í•´ì£¼ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤!)\n";
                rawDevotionalText += "------------------------------------------------";
                
                // í…ìŠ¤íŠ¸ì—ì„œ **ë¡œ ê°ì‹¸ì§„ ë¶€ë¶„ì„ <strong> íƒœê·¸ë¡œ ë³€í™˜ (í™”ë©´ í‘œì‹œìš©)
                const formattedDevotional = rawDevotionalText
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                
                devotionalElement.innerHTML = formattedDevotional;
                
                // ë³µì‚¬ ë²„íŠ¼ í‘œì‹œ
                copyButton.style.display = 'block';
                copyButton.textContent = 'ğŸ“‹ ë³µì‚¬í•˜ê¸°';
                copyButton.classList.remove('copied');
                
                // ìë™ìœ¼ë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬
                navigator.clipboard.writeText(rawDevotionalText)
                    .then(() => {
                        copyButton.textContent = 'âœ“ ë³µì‚¬ë¨';
                        copyButton.classList.add('copied');
                        showCopyMessage();
                        
                        // 3ì´ˆ í›„ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
                        setTimeout(() => {
                            copyButton.textContent = 'ğŸ“‹ ë³µì‚¬í•˜ê¸°';
                            copyButton.classList.remove('copied');
                        }, 3000);
                    })
                    .catch(err => {
                        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                    });
                
            } catch (error) {
                console.error('ë¬µìƒ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                devotionalElement.textContent = `ì˜¤ë¥˜ ë°œìƒ: ${error.message}`;
                // ì˜¤ë¥˜ ì‹œ ë³µì‚¬ ë²„íŠ¼ ìˆ¨ê¹€
                copyButton.style.display = 'none';
            }
        }
        
        // ë¬µìƒ ë‚´ìš© ë³µì‚¬ ê¸°ëŠ¥
        function copyDevotionalText() {
            if (!rawDevotionalText) return;
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(rawDevotionalText)
                .then(() => {
                    // ì„±ê³µ ì‹œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
                    copyButton.textContent = 'âœ“ ë³µì‚¬ë¨';
                    copyButton.classList.add('copied');
                    
                    // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                    showCopyMessage();
                    
                    // 3ì´ˆ í›„ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
                    setTimeout(() => {
                        copyButton.textContent = 'ğŸ“‹ ë³µì‚¬í•˜ê¸°';
                        copyButton.classList.remove('copied');
                    }, 3000);
                })
                .catch(err => {
                    console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                    copyButton.textContent = 'âŒ ë³µì‚¬ ì‹¤íŒ¨';
                    
                    // 3ì´ˆ í›„ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
                    setTimeout(() => {
                        copyButton.textContent = 'ğŸ“‹ ë³µì‚¬í•˜ê¸°';
                    }, 3000);
                });
        }
        
        // ë³µì‚¬ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showCopyMessage() {
            copyMessage.classList.add('show');
            setTimeout(() => {
                copyMessage.classList.remove('show');
            }, 2000);
        }
        
        // ì•± ì‹œì‘
        loadBibleData();
    </script>
</body>
</html>
