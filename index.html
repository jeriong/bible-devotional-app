<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ë§Œë‚˜ - ì„±ê²½ ë¬µìƒ ì•±</title>
    <!-- íŒŒë¹„ì½˜ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸš</text></svg>">
    <!-- ë©”íƒ€ íƒœê·¸ -->
    <meta name="description" content="ì˜¤ëŠ˜ì˜ ë§Œë‚˜ - 2025ë…„ ì„±ê²½ ë¬µìƒ ì•±">
    <meta name="keywords" content="ì„±ê²½, ë¬µìƒ, ë§ì”€, ì˜¤ëŠ˜ì˜ ë§Œë‚˜">
    <!-- í°íŠ¸ì–´ì¸ ì•„ì´ì½˜ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
        /* í°íŠ¸ ì„¤ì • */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        /* ì „ì²´ ìŠ¤íƒ€ì¼ */
        :root {
            --primary-color: #4682B4;
            --primary-dark: #366b96;
            --primary-light: #5a8dcb;
            --success-color: #28a745;
            --success-dark: #218838;
            --error-color: #dc3545;
            --warning-color: #ffc107;
            --light-bg: #f8f9fa;
            --border-color: #ced4da;
            --text-color: #333;
            --text-light: #6c757d;
            --white: #ffffff;
            --card-shadow: 0 4px 6px rgba(0,0,0,0.1);
            --transition-speed: 0.3s;
            
            /* Mobile optimized touch targets */
            --touch-target-size: 44px;
            --touch-spacing: 16px;
        }
        
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html {
            touch-action: manipulation;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--light-bg);
            color: var(--text-color);
            line-height: 1.6;
            overscroll-behavior-y: contain;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: var(--white);
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            padding: 20px;
            overflow: hidden;
        }
        
        /* Header with floating nav button for mobile */
        .app-header {
            position: relative;
            padding: 15px 0;
            text-align: center;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .menu-toggle {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 24px;
            color: var(--primary-color);
            cursor: pointer;
            z-index: 100;
            height: var(--touch-target-size);
            width: var(--touch-target-size);
            display: none;
        }
        
        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-weight: 500;
        }
        
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .loading {
            background-color: #cce5ff;
            color: #004085;
        }
        
        /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
        .tabs-container {
            display: flex;
            margin-bottom: 20px;
            overflow-x: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .tabs-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        
        .tab-btn {
            flex: 1;
            min-width: 100px;
            padding: 15px 5px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-family: 'Noto Sans KR', Arial, sans-serif;
            font-weight: 500;
            font-size: 16px;
            color: var(--text-light);
            cursor: pointer;
            transition: all var(--transition-speed);
            text-align: center;
            white-space: nowrap;
            height: var(--touch-target-size);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .tab-btn.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            font-weight: 700;
        }
        
        .tab-btn:hover:not(.active) {
            background-color: rgba(70, 130, 180, 0.05);
            color: var(--primary-color);
        }
        
        .tab-btn i {
            margin-right: 8px;
            font-size: 18px;
        }
        
        /* íƒ­ ì½˜í…ì¸  */
        .tab-content {
            display: none;
            padding: 10px 0;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* ë ˆì´ì•„ì›ƒ */
        .columns {
            display: flex;
            gap: 20px;
        }
        
        .column {
            flex: 1;
        }
        
        /* í¼ ìš”ì†Œ */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        select, button, input[type="date"], input[type="text"], textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Noto Sans KR', Arial, sans-serif;
            transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
        }
        
        select, input[type="date"] {
            background-color: white;
            height: var(--touch-target-size);
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23333' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 16px;
            padding-right: 30px;
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator {
            opacity: 0;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            cursor: pointer;
        }
        
        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(70, 130, 180, 0.25);
        }
        
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            margin-top: 10px;
            transition: background-color var(--transition-speed);
            height: var(--touch-target-size);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            opacity: 0;
            transform: scale(1, 1) translate(-50%, -50%);
            transform-origin: 50% 50%;
        }
        
        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(100, 100);
                opacity: 0;
            }
        }
        
        button:active::after {
            animation: ripple 0.4s ease-out;
            opacity: 1;
        }
        
        button:hover {
            background-color: var(--primary-dark);
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        button i {
            margin-right: 8px;
        }
        
        /* ë³µì‚¬ ë²„íŠ¼ */
        .copy-button {
            background-color: var(--success-color);
            margin-top: 10px;
            display: none; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
        }
        
        .copy-button:hover {
            background-color: var(--success-dark);
        }
        
        .copy-button.copied {
            background-color: #6c757d;
        }
        
        /* ì„¹ì…˜ ì œëª© */
        h2 {
            margin-top: 0;
            color: var(--primary-color);
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
            font-weight: 500;
            display: flex;
            align-items: center;
        }
        
        h2 i {
            margin-right: 10px;
        }
        
        h3 {
            color: var(--primary-color);
            font-weight: 500;
            margin-top: 25px;
            margin-bottom: 15px;
        }
        
        /* ë¬µìƒ ì˜ì—­ */
        .devotional-container {
            position: relative;
        }
        
        .devotional {
            white-space: pre-wrap;
            line-height: 1.6;
            padding: 20px;
            background-color: var(--light-bg);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            margin-bottom: 15px;
            transition: all var(--transition-speed);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .devotional:active {
            transform: scale(0.99);
        }
        
        strong {
            color: var(--primary-dark);
        }
        
        /* ë³µì‚¬ ì„±ê³µ ë©”ì‹œì§€ */
        .copy-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--success-color);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
            pointer-events: none;
        }
        
        .copy-message.show {
            opacity: 1;
        }
        
        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .spinner {
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary-color);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* í‘¸í„° */
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px 0;
            font-size: 14px;
            color: var(--text-light);
            border-top: 1px solid var(--border-color);
        }
        
        /* ì„±ê²½ì±… ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        .bible-grid-container {
            margin-top: 20px;
            display: none;
        }
        
        .bible-grid-toggle {
            text-align: right;
            margin-bottom: 10px;
        }
        
        .toggle-button {
            background-color: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
            color: #334155;
            transition: all 0.2s;
            width: auto;
            margin-top: 0;
            height: 36px;
        }
        
        .toggle-button:hover {
            background-color: #e2e8f0;
        }
        
        .toggle-icon {
            margin-right: 5px;
        }
        
        .bible-grid {
            margin-top: 10px;
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .bible-categories {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .bible-category h3 {
            color: var(--primary-color);
            margin-top: 0;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 16px;
            font-weight: 600;
        }
        
        .bible-books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }
        
        .bible-book {
            background-color: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 70px;
        }
        
        .bible-book:hover {
            background-color: #e2e8f0;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .bible-book:active {
            transform: translateY(0);
        }
        
        .bible-book.selected {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-dark);
        }
        
        .book-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }
        
        .book-name {
            font-size: 12px;
            line-height: 1.2;
            word-break: keep-all;
        }
        
        .old-testament .bible-book {
            background-color: #f3f8ff;
        }
        
        .new-testament .bible-book {
            background-color: #f0f9ff;
        }
        
        .old-testament .bible-book.selected {
            background-color: var(--primary-light);
        }
        
        .new-testament .bible-book.selected {
            background-color: var(--primary-color);
        }
        
        /* ì½”ë©˜íŠ¸ ì‹œìŠ¤í…œ ìŠ¤íƒ€ì¼ */
        .comments-section {
            margin-top: 30px;
        }
        
        .comment-form {
            margin-bottom: 20px;
        }
        
        .comment-input {
            min-height: 100px;
            resize: vertical;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            font-family: 'Noto Sans KR', Arial, sans-serif;
            font-size: 16px;
        }
        
        .comment-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .comment-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-left: 3px solid var(--primary-color);
            transition: transform var(--transition-speed);
            position: relative;
        }
        
        .comment-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 14px;
            color: var(--text-light);
        }
        
        .comment-date {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .comment-actions {
            display: flex;
            gap: 10px;
        }
        
        .comment-action {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            padding: 5px;
            font-size: 14px;
            width: auto;
            height: auto;
            margin-top: 0;
        }
        
        .comment-action:hover {
            color: var(--primary-color);
            background: none;
        }
        
        .comment-content {
            white-space: pre-wrap;
            line-height: 1.6;
        }
        
        .comment-feedback {
            display: flex;
            gap: 15px;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .comment-reaction {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--text-light);
            cursor: pointer;
            padding: 5px 8px;
            border-radius: 20px;
            transition: background-color var(--transition-speed);
        }
        
        .comment-reaction:hover {
            background-color: rgba(70, 130, 180, 0.1);
        }
        
        .comment-reaction.active {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .empty-comments {
            padding: 20px;
            text-align: center;
            color: var(--text-light);
            background-color: var(--light-bg);
            border-radius: 8px;
            border: 1px dashed var(--border-color);
        }
        
        .comment-pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
        }
        
        .page-btn {
            width: var(--touch-target-size);
            height: var(--touch-target-size);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--primary-color);
            cursor: pointer;
            transition: all var(--transition-speed);
        }
        
        .page-btn:hover {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .page-btn.active {
            background-color: var(--primary-color);
            color: var(--white);
            font-weight: 700;
        }
        
        .page-btn:disabled {
            background-color: var(--light-bg);
            color: var(--text-light);
            cursor: not-allowed;
        }
        
        /* ë‹¬ë ¥ ë³´ê¸° ê´€ë ¨ ìŠ¤íƒ€ì¼ */
        .calendar-view {
            margin-top: 20px;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .month-selector {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .month-title {
            font-size: 18px;
            font-weight: 500;
        }
        
        .month-nav {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            color: var(--primary-color);
            cursor: pointer;
            transition: all var(--transition-speed);
        }
        
        .month-nav:hover {
            background-color: var(--primary-color);
            color: var(--white);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day-header {
            text-align: center;
            font-weight: 500;
            padding: 10px 0;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: var(--white);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            cursor: pointer;
            position: relative;
            transition: all var(--transition-speed);
        }
        
        .calendar-day:hover {
            background-color: rgba(70, 130, 180, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .calendar-day.active {
            background-color: var(--primary-color);
            color: var(--white);
            border-color: var(--primary-dark);
        }
        
        .calendar-day.other-month {
            opacity: 0.4;
        }
        
        .calendar-day.today {
            border: 2px solid var(--primary-color);
            font-weight: 700;
        }
        
        .day-number {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .has-comment {
            position: absolute;
            bottom: 5px;
            width: 8px;
            height: 8px;
            background-color: var(--success-color);
            border-radius: 50%;
        }
        
        .has-devotional {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 10px;
            color: var(--primary-color);
        }
        
        /* ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ */
        @media (max-width: 768px) {
            .container {
                border-radius: 0;
                box-shadow: none;
                padding: 15px 10px;
                margin: 0;
            }
            
            .columns {
                flex-direction: column;
            }
            
            .app-header {
                position: sticky;
                top: 0;
                background-color: var(--white);
                z-index: 100;
                padding: 10px 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .tab-btn {
                min-width: 80px;
                padding: 12px 5px;
                font-size: 14px;
            }
            
            h1 {
                font-size: 20px;
                margin: 0;
            }
            
            h2 {
                font-size: 18px;
            }
            
            .bible-books-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .bible-book {
                height: 60px;
                padding: 8px 5px;
            }
            
            .book-icon {
                font-size: 20px;
                margin-bottom: 4px;
            }
            
            .book-name {
                font-size: 11px;
            }
            
            .calendar-grid {
                gap: 4px;
            }
            
            .calendar-day-header {
                font-size: 14px;
                padding: 5px 0;
            }
            
            .day-number {
                font-size: 14px;
            }
            
            /* Mobile Optimizations for Touch */
            select, input[type="date"], button, textarea {
                font-size: 16px; /* Prevents iOS zoom on focus */
                padding: 12px;
            }
            
            /* Fixed bottom action button for mobile */
            .mobile-action {
                position: fixed;
                bottom: 20px;
                right: 20px;
                width: 56px;
                height: 56px;
                border-radius: 50%;
                background-color: var(--primary-color);
                color: var(--white);
                display: flex;
                align-items: center;
                justify-content: center;
                box-shadow: 0 4px 8px rgba(0,0,0,0.2);
                z-index: 100;
                font-size: 24px;
                transition: all var(--transition-speed);
                transform: scale(1);
            }
            
            .mobile-action:active {
                transform: scale(0.9);
            }
            
            /* Improved tap feedback */
            .button-touch, .calendar-day, .bible-book, .tab-btn {
                -webkit-tap-highlight-color: transparent;
                position: relative;
                overflow: hidden;
            }
            
            .button-touch::after, .calendar-day::after, .bible-book::after, .tab-btn::after {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 5px;
                height: 5px;
                background: rgba(70, 130, 180, 0.3);
                opacity: 0;
                border-radius: 100%;
                transform: scale(1, 1) translate(-50%);
                transform-origin: 50% 50%;
            }
            
            .button-touch:active::after, .calendar-day:active::after, .bible-book:active::after, .tab-btn:active::after {
                animation: ripple 0.4s ease-out;
            }
            
            /* Bottom nav for mobile */
            .bottom-nav {
                display: none;
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background-color: var(--white);
                box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
                padding: 10px 0;
                z-index: 90;
            }
            
            .bottom-nav-items {
                display: flex;
                justify-content: space-around;
            }
            
            .bottom-nav-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                color: var(--text-light);
                font-size: 12px;
                text-decoration: none;
                padding: 8px 0;
                width: 25%;
            }
            
            .bottom-nav-item i {
                font-size: 20px;
                margin-bottom: 5px;
            }
            
            .bottom-nav-item.active {
                color: var(--primary-color);
            }
            
            @media (max-width: 768px) {
                .bottom-nav {
                    display: block;
                }
                
                body {
                    padding-bottom: 60px;
                }
            }
        }
        
        /* ë‹¤í¬ ëª¨ë“œ í† ê¸€ */
        .theme-toggle {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            font-size: 20px;
            color: var(--primary-color);
            cursor: pointer;
            width: var(--touch-target-size);
            height: var(--touch-target-size);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="app-header">
            <button id="menuToggle" class="menu-toggle">
                <i class="fas fa-bars"></i>
            </button>
            <h1>ğŸš ì˜¤ëŠ˜ì˜ ë§Œë‚˜ ğŸš</h1>
            <button id="themeToggle" class="theme-toggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
        
        <div id="status" class="status loading">ì„±ê²½ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...<div class="spinner"></div></div>
        
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="tabs-container">
            <button class="tab-btn active button-touch" data-tab="generator">
                <i class="fas fa-book-bible"></i>ë¬µìƒ ìƒì„±
            </button>
            <button class="tab-btn button-touch" data-tab="comments">
                <i class="fas fa-comments"></i>ì˜¤ëŠ˜ì˜ ëŒ“ê¸€
            </button>
            <button class="tab-btn button-touch" data-tab="calendar">
                <i class="fas fa-calendar-alt"></i>ë‹¬ë ¥ ë³´ê¸°
            </button>
            <button class="tab-btn button-touch" data-tab="settings">
                <i class="fas fa-cog"></i>ì„¤ì •
            </button>
        </div>
        
        <!-- ë¬µìƒ ìƒì„± íƒ­ -->
        <div id="generatorTab" class="tab-content active">
            <div class="columns">
                <div class="column">
                    <h2><i class="fas fa-sliders"></i>ì„¤ì •</h2>
                    
                    <div class="form-group">
                        <label for="date">
                            <i class="fas fa-calendar"></i> ë‚ ì§œ ì„ íƒ (ì„ íƒì‚¬í•­):
                        </label>
                        <input type="date" id="date" class="date-picker">
                    </div>
                    
                    <div class="form-group">
                        <label for="book">
                            <i class="fas fa-book"></i> ì„±ê²½ì±… ì„ íƒ:
                        </label>
                        <div class="select-container">
                            <select id="book">
                                <option value="" disabled selected>ì„±ê²½ì±…ì„ ì„ íƒí•˜ì„¸ìš”</option>
                                <!-- ì„±ê²½ì±… ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                            </select>
                        </div>
                        
                        <div class="bible-grid-toggle">
                            <button id="toggleBibleGrid" class="toggle-button">
                                <i class="fas fa-th toggle-icon"></i>ì„±ê²½ì±… ëª©ë¡ ë³´ê¸°
                            </button>
                        </div>
                        
                        <div id="bibleGridContainer" class="bible-grid-container">
                            <div class="bible-grid">
                                <div class="bible-categories">
                                    <div class="bible-category old-testament">
                                        <h3>êµ¬ì•½</h3>
                                        <div class="bible-books-grid" id="oldTestamentGrid">
                                            <!-- êµ¬ì•½ ì„±ê²½ì±…ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                                        </div>
                                    </div>
                                    <div class="bible-category new-testament">
                                        <h3>ì‹ ì•½</h3>
                                        <div class="bible-books-grid" id="newTestamentGrid">
                                            <!-- ì‹ ì•½ ì„±ê²½ì±…ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="chapter">
                            <i class="fas fa-bookmark"></i> ì¥ ì„ íƒ:
                        </label>
                        <select id="chapter">
                            <option value="" disabled selected>ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>
                            <!-- ì¥ ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                        </select>
                    </div>
                    
                    <button id="generateButton" class="button-touch">
                        <i class="fas fa-magic"></i>ë¬µìƒ ìƒì„±í•˜ê¸°
                    </button>
                    
                    <hr style="margin: 20px 0; border-top: 1px dashed var(--border-color);">
                    
                    <div class="form-group">
                        <label for="secondBook">
                            <i class="fas fa-book"></i> ì¶”ê°€ ì„±ê²½ì±… ì„ íƒ (ì„ íƒì‚¬í•­):
                        </label>
                        <select id="secondBook">
                            <option value="" selected>ì„ íƒí•˜ì§€ ì•ŠìŒ</option>
                            <!-- ì„±ê²½ì±… ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="secondChapter">
                            <i class="fas fa-bookmark"></i> ì¶”ê°€ ì¥ ì„ íƒ (ì„ íƒì‚¬í•­):
                        </label>
                        <select id="secondChapter">
                            <option value="" selected>ì„ íƒí•˜ì§€ ì•ŠìŒ</option>
                            <!-- ì¥ ì˜µì…˜ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                        </select>
                    </div>
                </div>
                
                <div class="column">
                    <h2><i class="fas fa-bread-slice"></i>ì˜¤ëŠ˜ì˜ ë§Œë‚˜</h2>
                    <div class="devotional-container">
                        <div id="devotional" class="devotional">
                            ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•œ í›„ "ë¬µìƒ ìƒì„±í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.
                        </div>
                        <button id="copyButton" class="copy-button button-touch">
                            <i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°
                        </button>
                        <button id="saveButton" class="copy-button button-touch" style="background-color: var(--primary-color); display: none;">
                            <i class="fas fa-save"></i> ì €ì¥í•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ëŒ“ê¸€ íƒ­ -->
        <div id="commentsTab" class="tab-content">
            <h2><i class="fas fa-comments"></i>ì˜¤ëŠ˜ì˜ ëŒ“ê¸€</h2>
            
            <div class="form-group">
                <label for="commentDate">
                    <i class="fas fa-calendar"></i> ë‚ ì§œ ì„ íƒ:
                </label>
                <input type="date" id="commentDate" class="date-picker">
            </div>
            
            <div class="comment-form">
                <textarea id="commentInput" class="comment-input" placeholder="ì˜¤ëŠ˜ì˜ ë¬µìƒì„ ëŒ“ê¸€ë¡œ ë‚˜ëˆ ë³´ì„¸ìš”. ë§ì”€êµ¬ì ˆ, ë¬µìƒ ë‚´ìš©, ì ìš©ì  ë“±ì„ ììœ ë¡­ê²Œ ê³µìœ í•´ì£¼ì„¸ìš”."></textarea>
                <button id="postCommentButton" class="button-touch">
                    <i class="fas fa-paper-plane"></i> ëŒ“ê¸€ ê²Œì‹œí•˜ê¸°
                </button>
            </div>
            
            <div class="comment-list" id="commentList">
                <!-- ëŒ“ê¸€ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                <div class="empty-comments">
                    <i class="fas fa-comment-slash" style="font-size: 24px; margin-bottom: 10px;"></i>
                    <p>ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
                </div>
            </div>
            
            <div class="comment-pagination" id="commentPagination">
                <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ì€ JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
            </div>
        </div>
        
        <!-- ë‹¬ë ¥ ë³´ê¸° íƒ­ -->
        <div id="calendarTab" class="tab-content">
            <h2><i class="fas fa-calendar-alt"></i>ë‹¬ë ¥ ë³´ê¸°</h2>
            
            <div class="calendar-view">
                <div class="calendar-header">
                    <div class="month-selector">
                        <button id="prevMonth" class="month-nav button-touch">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <div id="currentMonth" class="month-title">2025ë…„ 3ì›”</div>
                        <button id="nextMonth" class="month-nav button-touch">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="calendar-grid" id="calendarDaysHeader">
                    <div class="calendar-day-header">ì¼</div>
                    <div class="calendar-day-header">ì›”</div>
                    <div class="calendar-day-header">í™”</div>
                    <div class="calendar-day-header">ìˆ˜</div>
                    <div class="calendar-day-header">ëª©</div>
                    <div class="calendar-day-header">ê¸ˆ</div>
                    <div class="calendar-day-header">í† </div>
                </div>
                
                <div class="calendar-grid" id="calendarDays">
                    <!-- ë‹¬ë ¥ ì¼ìëŠ” JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
        
        <!-- ì„¤ì • íƒ­ -->
        <div id="settingsTab" class="tab-content">
            <h2><i class="fas fa-cog"></i>ì„¤ì •</h2>
            
            <div class="form-group">
                <label for="fontSizeSlider">
                    <i class="fas fa-text-height"></i> ê¸€ì í¬ê¸° ì¡°ì •:
                </label>
                <input type="range" id="fontSizeSlider" min="80" max="150" value="100" step="5">
                <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                    <span>ì‘ê²Œ</span>
                    <span id="fontSizeValue">100%</span>
                    <span>í¬ê²Œ</span>
                </div>
            </div>
            
            <div class="form-group">
                <label for="autoSave">
                    <i class="fas fa-save"></i> ìë™ ì €ì¥:
                </label>
                <div style="display: flex; align-items: center; margin-top: 10px;">
                    <label class="toggle-switch">
                        <input type="checkbox" id="autoSave">
                        <span class="toggle-slider"></span>
                    </label>
                    <span style="margin-left: 10px;">ë¬µìƒ ë‚´ìš©ì„ ìë™ìœ¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤</span>
                </div>
            </div>
            
            <h3><i class="fas fa-database"></i> ë°ì´í„° ê´€ë¦¬</h3>
            
            <button id="exportDataButton" class="button-touch" style="background-color: #6c757d;">
                <i class="fas fa-file-export"></i> ëª¨ë“  ë°ì´í„° ë‚´ë³´ë‚´ê¸°
            </button>
            
            <button id="clearDataButton" class="button-touch" style="background-color: var(--error-color); margin-top: 15px;">
                <i class="fas fa-trash-alt"></i> ëª¨ë“  ë°ì´í„° ì‚­ì œ
            </button>
        </div>
        
        <!-- ëª¨ë°”ì¼ìš© í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="bottom-nav">
            <div class="bottom-nav-items">
                <a href="#" class="bottom-nav-item active" data-tab="generator">
                    <i class="fas fa-book-bible"></i>
                    <span>ë¬µìƒ</span>
                </a>
                <a href="#" class="bottom-nav-item" data-tab="comments">
                    <i class="fas fa-comments"></i>
                    <span>ëŒ“ê¸€</span>
                </a>
                <a href="#" class="bottom-nav-item" data-tab="calendar">
                    <i class="fas fa-calendar-alt"></i>
                    <span>ë‹¬ë ¥</span>
                </a>
                <a href="#" class="bottom-nav-item" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    <span>ì„¤ì •</span>
                </a>
            </div>
        </div>
        
        <!-- ëª¨ë°”ì¼ìš© ì‘ì—… ë²„íŠ¼ -->
        <button id="mobileAction" class="mobile-action">
            <i class="fas fa-plus"></i>
        </button>
        
        <footer>
            <p>Â© 2025 ì˜¤ëŠ˜ì˜ ë§Œë‚˜ | <a href="#" id="aboutLink">ì•± ì •ë³´</a></p>
        </footer>
    </div>
    
    <!-- ë³µì‚¬ ì„±ê³µ ë©”ì‹œì§€ -->
    <div id="copyMessage" class="copy-message">í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let bibleData = null;
        let rawDevotionalText = ""; // ì›ë³¸ í…ìŠ¤íŠ¸ ì €ì¥ìš© ë³€ìˆ˜ ì¶”ê°€
        let commentsData = {}; // ë‚ ì§œë³„ ëŒ“ê¸€ ë°ì´í„° ì €ì¥
        let savedDevotionals = {}; // ë‚ ì§œë³„ ì €ì¥ëœ ë¬µìƒ ë‚´ìš©
        let currentPage = 1;
        let commentsPerPage = 5;
        let currentMonthDate = new Date();
        let darkMode = false;
        
        // DOM ìš”ì†Œ
        const statusElement = document.getElementById('status');
        const dateInput = document.getElementById('date');
        const bookSelect = document.getElementById('book');
        const chapterSelect = document.getElementById('chapter');
        const secondBookSelect = document.getElementById('secondBook');
        const secondChapterSelect = document.getElementById('secondChapter');
        const generateButton = document.getElementById('generateButton');
        const devotionalElement = document.getElementById('devotional');
        const copyButton = document.getElementById('copyButton');
        const saveButton = document.getElementById('saveButton');
        const copyMessage = document.getElementById('copyMessage');
        const commentDateInput = document.getElementById('commentDate');
        const commentInput = document.getElementById('commentInput');
        const postCommentButton = document.getElementById('postCommentButton');
        const commentList = document.getElementById('commentList');
        const commentPagination = document.getElementById('commentPagination');
        const calendarDays = document.getElementById('calendarDays');
        const currentMonthElement = document.getElementById('currentMonth');
        const prevMonthButton = document.getElementById('prevMonth');
        const nextMonthButton = document.getElementById('nextMonth');
        const toggleBibleGridButton = document.getElementById('toggleBibleGrid');
        const bibleGridContainer = document.getElementById('bibleGridContainer');
        const oldTestamentGrid = document.getElementById('oldTestamentGrid');
        const newTestamentGrid = document.getElementById('newTestamentGrid');
        const fontSizeSlider = document.getElementById('fontSizeSlider');
        const fontSizeValue = document.getElementById('fontSizeValue');
        const autoSaveCheckbox = document.getElementById('autoSave');
        const exportDataButton = document.getElementById('exportDataButton');
        const clearDataButton = document.getElementById('clearDataButton');
        const mobileActionButton = document.getElementById('mobileAction');
        const themeToggleButton = document.getElementById('themeToggle');
        const menuToggleButton = document.getElementById('menuToggle');
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        const bottomNavLinks = document.querySelectorAll('.bottom-nav-item');
        
        // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
        function setTodayAsDefault() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const todayStr = `${year}-${month}-${day}`;
            
            dateInput.value = todayStr;
            commentDateInput.value = todayStr;
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ì˜¤ëŠ˜ ë‚ ì§œ ì„¤ì • ë° ì €ì¥ëœ ë°ì´í„° ë¡œë“œ
        setTodayAsDefault();
        loadSavedData();
        
        // ì €ì¥ëœ ë°ì´í„° ë¡œë“œ
        function loadSavedData() {
            // ëŒ“ê¸€ ë°ì´í„° ë¡œë“œ
            const savedComments = localStorage.getItem('commentsData');
            if (savedComments) {
                commentsData = JSON.parse(savedComments);
            }
            
            // ì €ì¥ëœ ë¬µìƒ ë‚´ìš© ë¡œë“œ
            const savedDevotionalData = localStorage.getItem('savedDevotionals');
            if (savedDevotionalData) {
                savedDevotionals = JSON.parse(savedDevotionalData);
            }
            
            // ë‹¤í¬ ëª¨ë“œ ì„¤ì • ë¡œë“œ
            const darkModePreference = localStorage.getItem('darkMode');
            if (darkModePreference === 'true') {
                darkMode = true;
                document.body.classList.add('dark-mode');
                themeToggleButton.innerHTML = '<i class="fas fa-sun"></i>';
            }
            
            // ê¸€ì í¬ê¸° ì„¤ì • ë¡œë“œ
            const fontSizePreference = localStorage.getItem('fontSize');
            if (fontSizePreference) {
                fontSizeSlider.value = fontSizePreference;
                fontSizeValue.textContent = `${fontSizePreference}%`;
                document.documentElement.style.fontSize = `${fontSizePreference}%`;
            }
            
            // ìë™ ì €ì¥ ì„¤ì • ë¡œë“œ
            const autoSavePreference = localStorage.getItem('autoSave');
            if (autoSavePreference === 'true') {
                autoSaveCheckbox.checked = true;
            }
        }
        
        // GitHubì—ì„œ ì„±ê²½ ë°ì´í„° ë¡œë“œ
        async function loadBibleData() {
            try {
                statusElement.className = 'status loading';
                statusElement.innerHTML = 'ì„±ê²½ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...<div class="spinner"></div>';
                
                // GitHubì—ì„œ ë°ì´í„° ìš”ì²­
                const response = await fetch('https://raw.githubusercontent.com/jeriong/bible-data/refs/heads/main/%EC%84%B1%EA%B2%BD.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP ì˜¤ë¥˜: ${response.status}`);
                }
                
                bibleData = await response.json();
                
                // ë°ì´í„° ë¡œë“œ ì„±ê³µ ë©”ì‹œì§€
                statusElement.className = 'status success';
                statusElement.textContent = 'ì„±ê²½ ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!';
                
                // UI ì´ˆê¸°í™”
                initializeUI();
                
                // ëŒ“ê¸€ ë¡œë“œ ë° ë‹¬ë ¥ ì„¤ì •
                loadComments();
                renderCalendar();
                
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                statusElement.className = 'status error';
                statusElement.textContent = `ì„±ê²½ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`;
                
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ë°±ì—… ë°ì´í„° ì‚¬ìš©
                useSampleData();
            }
        }
        
        // ë°±ì—… ë°ì´í„° ì‚¬ìš© (ì˜¤ë¥˜ ì‹œ ìµœì†Œí•œì˜ ê¸°ëŠ¥ ì œê³µ)
        function useSampleData() {
            bibleData = {
                "ì°½ì„¸ê¸°": {
                    "1": {
                        "1": "íƒœì´ˆì— í•˜ë‚˜ë‹˜ì´ ì²œì§€ë¥¼ ì°½ì¡°í•˜ì‹œë‹ˆë¼",
                        "2": "ë•…ì´ í˜¼ëˆí•˜ê³  ê³µí—ˆí•˜ë©° í‘ì•”ì´ ê¹ŠìŒ ìœ„ì— ìˆê³  í•˜ë‚˜ë‹˜ì˜ ì˜ì€ ìˆ˜ë©´ ìœ„ì— ìš´í–‰í•˜ì‹œë‹ˆë¼",
                        "3": "í•˜ë‚˜ë‹˜ì´ ê°€ë¼ì‚¬ëŒ€ ë¹›ì´ ìˆìœ¼ë¼ í•˜ì‹œë§¤ ë¹›ì´ ìˆì—ˆê³ ",
                        "4": "ë¹›ì´ í•˜ë‚˜ë‹˜ì´ ë³´ì‹œê¸°ì— ì¢‹ì•˜ë”ë¼ í•˜ë‚˜ë‹˜ì´ ë¹›ê³¼ ì–´ë‘ ì„ ë‚˜ëˆ„ì‚¬"
                    }
                },
                "ìš”í•œë³µìŒ": {
                    "3": {
                        "16": "í•˜ë‚˜ë‹˜ì´ ì„¸ìƒì„ ì´ì²˜ëŸ¼ ì‚¬ë‘í•˜ì‚¬ ë…ìƒìë¥¼ ì£¼ì…¨ìœ¼ë‹ˆ ì´ëŠ” ì €ë¥¼ ë¯¿ëŠ” ìë§ˆë‹¤ ë©¸ë§ì¹˜ ì•Šê³  ì˜ìƒì„ ì–»ê²Œ í•˜ë ¤ í•˜ì‹¬ì´ë‹ˆë¼"
                    }
                },
                "ì‹œí¸": {
                    "23": {
                        "1": "ì—¬í˜¸ì™€ëŠ” ë‚˜ì˜ ëª©ìì‹œë‹ˆ ë‚´ê²Œ ë¶€ì¡±í•¨ì´ ì—†ìœ¼ë¦¬ë¡œë‹¤",
                        "2": "ê·¸ê°€ ë‚˜ë¥¼ í‘¸ë¥¸ ì´ˆì¥ì— ëˆ„ì´ì‹œë©° ì‰´ ë§Œí•œ ë¬¼ê°€ë¡œ ì¸ë„í•˜ì‹œëŠ”ë„ë‹¤"
                    }
                }
            };
            
            statusElement.innerHTML += "<br><small>(ì¼ë¶€ ì„±ê²½ êµ¬ì ˆë§Œ ì œê³µë©ë‹ˆë‹¤. ë°ì´í„° ì˜¤ë¥˜ê°€ ì§€ì†ë˜ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.)</small>";
            
            // UI ì´ˆê¸°í™”
            initializeUI();
            
            // ëŒ“ê¸€ ë¡œë“œ ë° ë‹¬ë ¥ ì„¤ì •
            loadComments();
            renderCalendar();
        }
        
        // íƒ­ ë³€ê²½ ì²˜ë¦¬
        function setupTabs() {
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // í˜„ì¬ í™œì„± íƒ­ ì œê±°
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    bottomNavLinks.forEach(link => link.classList.remove('active'));
                    
                    // ìƒˆ íƒ­ í™œì„±í™”
                    const tabId = button.getAttribute('data-tab');
                    button.classList.add('active');
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                    
                    // ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë™ê¸°í™”
                    const matchingNavLink = document.querySelector(`.bottom-nav-item[data-tab="${tabId}"]`);
                    if (matchingNavLink) {
                        matchingNavLink.classList.add('active');
                    }
                    
                    // íƒ­ë³„ íŠ¹ìˆ˜ ì²˜ë¦¬
                    if (tabId === 'comments') {
                        loadComments();
                    } else if (tabId === 'calendar') {
                        renderCalendar();
                    }
                });
            });
            
            // ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì²˜ë¦¬
            bottomNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // í˜„ì¬ í™œì„± íƒ­ ì œê±°
                    bottomNavLinks.forEach(l => l.classList.remove('active'));
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // ìƒˆ íƒ­ í™œì„±í™”
                    const tabId = link.getAttribute('data-tab');
                    link.classList.add('active');
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                    
                    // ìƒë‹¨ íƒ­ ë²„íŠ¼ ë™ê¸°í™”
                    const matchingTabButton = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
                    if (matchingTabButton) {
                        matchingTabButton.classList.add('active');
                    }
                    
                    // íƒ­ë³„ íŠ¹ìˆ˜ ì²˜ë¦¬
                    if (tabId === 'comments') {
                        loadComments();
                    } else if (tabId === 'calendar') {
                        renderCalendar();
                    }
                });
            });
        }
        
        // UI ì´ˆê¸°í™”
        function initializeUI() {
            // ì„±ê²½ì±… ì˜µì…˜ ìƒì„±
            generateBookOptions();
            generateSecondBookOptions();
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì—°ê²°
            bookSelect.addEventListener('change', updateChapterOptions);
            chapterSelect.addEventListener('change', checkFormValidity);
            secondBookSelect.addEventListener('change', updateSecondChapterOptions);
            secondChapterSelect.addEventListener('change', checkFormValidity);
            generateButton.addEventListener('click', generateDevotional);
            copyButton.addEventListener('click', copyDevotionalText);
            saveButton.addEventListener('click', saveDevotional);
            commentDateInput.addEventListener('change', loadComments);
            postCommentButton.addEventListener('click', postComment);
            prevMonthButton.addEventListener('click', () => changeMonth(-1));
            nextMonthButton.addEventListener('click', () => changeMonth(1));
            toggleBibleGridButton.addEventListener('click', toggleBibleGrid);
            fontSizeSlider.addEventListener('input', updateFontSize);
            exportDataButton.addEventListener('click', exportData);
            clearDataButton.addEventListener('click', confirmClearData);
            mobileActionButton.addEventListener('click', handleMobileAction);
            themeToggleButton.addEventListener('click', toggleDarkMode);
            
            // ì„±ê²½ì±… ê·¸ë¦¬ë“œ ìƒì„±
            generateBibleGrid();
            
            // íƒ­ ì„¤ì •
            setupTabs();
            
            // ì´ˆê¸° í¼ ìƒíƒœ í™•ì¸
            checkFormValidity();
            
            // í„°ì¹˜ ì´ë²¤íŠ¸ ìµœì í™”
            setupTouchOptimizations();
            
            // ì´ˆê¸° ì €ì¥ëœ ë¬µìƒ ë‚´ìš© í™•ì¸
            checkForSavedDevotional();
        }
        
        // ì„±ê²½ 66ê¶Œ í‘œì¤€ ëª©ë¡
        const standardBooks = [
            'ì°½ì„¸ê¸°', 'ì¶œì• êµ½ê¸°', 'ë ˆìœ„ê¸°', 'ë¯¼ìˆ˜ê¸°', 'ì‹ ëª…ê¸°', 'ì—¬í˜¸ìˆ˜ì•„', 'ì‚¬ì‚¬ê¸°', 'ë£»ê¸°',
            'ì‚¬ë¬´ì—˜ìƒ', 'ì‚¬ë¬´ì—˜í•˜', 'ì—´ì™•ê¸°ìƒ', 'ì—´ì™•ê¸°í•˜', 'ì—­ëŒ€ìƒ', 'ì—­ëŒ€í•˜', 'ì—ìŠ¤ë¼', 'ëŠí—¤ë¯¸ì•¼',
            'ì—ìŠ¤ë”', 'ìš¥ê¸°', 'ì‹œí¸', 'ì ì–¸', 'ì „ë„ì„œ', 'ì•„ê°€', 'ì´ì‚¬ì•¼', 'ì˜ˆë ˆë¯¸ì•¼', 'ì˜ˆë ˆë¯¸ì•¼ì• ê°€',
            'ì—ìŠ¤ê²”', 'ë‹¤ë‹ˆì—˜', 'í˜¸ì„¸ì•„', 'ìš”ì—˜', 'ì•„ëª¨ìŠ¤', 'ì˜¤ë°”ëŒœ', 'ìš”ë‚˜', 'ë¯¸ê°€', 'ë‚˜í›”', 'í•˜ë°•êµ­',
            'ìŠ¤ë°”ëƒ', 'í•™ê°œ', 'ìŠ¤ê°€ë´', 'ë§ë¼ê¸°', 'ë§ˆíƒœë³µìŒ', 'ë§ˆê°€ë³µìŒ', 'ëˆ„ê°€ë³µìŒ', 'ìš”í•œë³µìŒ',
            'ì‚¬ë„í–‰ì „', 'ë¡œë§ˆì„œ', 'ê³ ë¦°ë„ì „ì„œ', 'ê³ ë¦°ë„í›„ì„œ', 'ê°ˆë¼ë””ì•„ì„œ', 'ì—ë² ì†Œì„œ', 'ë¹Œë¦½ë³´ì„œ',
            'ê³¨ë¡œìƒˆì„œ', 'ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ', 'ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ', 'ë””ëª¨ë°ì „ì„œ', 'ë””ëª¨ë°í›„ì„œ', 'ë””ë„ì„œ',
            'ë¹Œë ˆëª¬ì„œ', 'íˆë¸Œë¦¬ì„œ', 'ì•¼ê³ ë³´ì„œ', 'ë² ë“œë¡œì „ì„œ', 'ë² ë“œë¡œí›„ì„œ', 'ìš”í•œ1ì„œ', 'ìš”í•œ2ì„œ',
            'ìš”í•œ3ì„œ', 'ìœ ë‹¤ì„œ', 'ìš”í•œê³„ì‹œë¡'
        ];
        
        // êµ¬ì•½/ì‹ ì•½ êµ¬ë¶„
        const oldTestamentBooks = standardBooks.slice(0, 39);
        const newTestamentBooks = standardBooks.slice(39);
        
        // ì„±ê²½ì±… ì•„ì´ì½˜ ë§¤í•‘
        const bookIcons = {
            'ì°½ì„¸ê¸°': 'ğŸŒ±', 'ì¶œì• êµ½ê¸°': 'ğŸŒŠ', 'ë ˆìœ„ê¸°': 'âš–ï¸', 'ë¯¼ìˆ˜ê¸°': 'ğŸ”¢', 'ì‹ ëª…ê¸°': 'ğŸ“œ',
            'ì—¬í˜¸ìˆ˜ì•„': 'âš”ï¸', 'ì‚¬ì‚¬ê¸°': 'ğŸ‘‘', 'ë£»ê¸°': 'ğŸŒ¾', 'ì‚¬ë¬´ì—˜ìƒ': 'ğŸ‘‘', 'ì‚¬ë¬´ì—˜í•˜': 'ğŸ‘‘',
            'ì—´ì™•ê¸°ìƒ': 'ğŸ‘‘', 'ì—´ì™•ê¸°í•˜': 'ğŸ‘‘', 'ì—­ëŒ€ìƒ': 'ğŸ“š', 'ì—­ëŒ€í•˜': 'ğŸ“š', 'ì—ìŠ¤ë¼': 'ğŸ›ï¸',
            'ëŠí—¤ë¯¸ì•¼': 'ğŸ§±', 'ì—ìŠ¤ë”': 'ğŸ‘¸', 'ìš¥ê¸°': 'ğŸ¤²', 'ì‹œí¸': 'ğŸµ', 'ì ì–¸': 'ğŸ§ ',
            'ì „ë„ì„œ': 'ğŸ•°ï¸', 'ì•„ê°€': 'â¤ï¸', 'ì´ì‚¬ì•¼': 'ğŸ”®', 'ì˜ˆë ˆë¯¸ì•¼': 'ğŸ˜¢', 'ì˜ˆë ˆë¯¸ì•¼ì• ê°€': 'ğŸ˜­',
            'ì—ìŠ¤ê²”': 'ğŸ‘ï¸', 'ë‹¤ë‹ˆì—˜': 'ğŸ¦', 'í˜¸ì„¸ì•„': 'ğŸ’”', 'ìš”ì—˜': 'ğŸ¦—', 'ì•„ëª¨ìŠ¤': 'ğŸ‘',
            'ì˜¤ë°”ëŒœ': 'âš¡', 'ìš”ë‚˜': 'ğŸ‹', 'ë¯¸ê°€': 'âš–ï¸', 'ë‚˜í›”': 'ğŸ™ï¸', 'í•˜ë°•êµ­': 'â“',
            'ìŠ¤ë°”ëƒ': 'ğŸ”', 'í•™ê°œ': 'ğŸ—ï¸', 'ìŠ¤ê°€ë´': 'ğŸ', 'ë§ë¼ê¸°': 'âœ‰ï¸', 'ë§ˆíƒœë³µìŒ': 'ğŸ‘¨â€ğŸ«',
            'ë§ˆê°€ë³µìŒ': 'ğŸ¦', 'ëˆ„ê°€ë³µìŒ': 'ğŸ‘¨â€âš•ï¸', 'ìš”í•œë³µìŒ': 'ğŸ¦…', 'ì‚¬ë„í–‰ì „': 'ğŸ•Šï¸', 'ë¡œë§ˆì„œ': 'âš–ï¸',
            'ê³ ë¦°ë„ì „ì„œ': 'ğŸ’Œ', 'ê³ ë¦°ë„í›„ì„œ': 'ğŸ’Œ', 'ê°ˆë¼ë””ì•„ì„œ': 'â›“ï¸', 'ì—ë² ì†Œì„œ': 'ğŸ›¡ï¸', 'ë¹Œë¦½ë³´ì„œ': 'ğŸ˜Š',
            'ê³¨ë¡œìƒˆì„œ': 'ğŸ”', 'ë°ì‚´ë¡œë‹ˆê°€ì „ì„œ': 'â³', 'ë°ì‚´ë¡œë‹ˆê°€í›„ì„œ': 'â³', 'ë””ëª¨ë°ì „ì„œ': 'ğŸ‘¨â€ğŸ¦±',
            'ë””ëª¨ë°í›„ì„œ': 'ğŸ‘¨â€ğŸ¦±', 'ë””ë„ì„œ': 'ğŸŒ¿', 'ë¹Œë ˆëª¬ì„œ': 'ğŸ¤', 'íˆë¸Œë¦¬ì„œ': 'ğŸ•¯ï¸', 'ì•¼ê³ ë³´ì„œ': 'ğŸ”§',
            'ë² ë“œë¡œì „ì„œ': 'ğŸ—ï¸', 'ë² ë“œë¡œí›„ì„œ': 'ğŸ—ï¸', 'ìš”í•œ1ì„œ': 'â¤ï¸', 'ìš”í•œ2ì„œ': 'â¤ï¸',
            'ìš”í•œ3ì„œ': 'â¤ï¸', 'ìœ ë‹¤ì„œ': 'âš ï¸', 'ìš”í•œê³„ì‹œë¡': 'ğŸ“œ'
        };
        
        // ì„±ê²½ì±… ê·¸ë¦¬ë“œ ìƒì„±
        function generateBibleGrid() {
            oldTestamentGrid.innerHTML = '';
            newTestamentGrid.innerHTML = '';
            
            // ë°ì´í„°ì— ìˆëŠ” ì„±ê²½ì±…ë§Œ í•„í„°ë§
            const validOldTestament = oldTestamentBooks.filter(book => book in bibleData);
            const validNewTestament = newTestamentBooks.filter(book => book in bibleData);
            
            // êµ¬ì•½ ì„±ê²½ì±… ê·¸ë¦¬ë“œ ìƒì„±
            validOldTestament.forEach(book => {
                const bookElement = document.createElement('div');
                bookElement.className = 'bible-book button-touch';
                bookElement.dataset.book = book;
                
                const iconElement = document.createElement('div');
                iconElement.className = 'book-icon';
                iconElement.textContent = bookIcons[book] || 'ğŸ“–';
                
                const nameElement = document.createElement('div');
                nameElement.className = 'book-name';
                nameElement.textContent = book;
                
                bookElement.appendChild(iconElement);
                bookElement.appendChild(nameElement);
                
                bookElement.addEventListener('click', () => {
                    selectBookFromGrid(book);
                });
                
                oldTestamentGrid.appendChild(bookElement);
            });
            
            // ì‹ ì•½ ì„±ê²½ì±… ê·¸ë¦¬ë“œ ìƒì„±
            validNewTestament.forEach(book => {
                const bookElement = document.createElement('div');
                bookElement.className = 'bible-book button-touch';
                bookElement.dataset.book = book;
                
                const iconElement = document.createElement('div');
                iconElement.className = 'book-icon';
                iconElement.textContent = bookIcons[book] || 'ğŸ“–';
                
                const nameElement = document.createElement('div');
                nameElement.className = 'book-name';
                nameElement.textContent = book;
                
                bookElement.appendChild(iconElement);
                bookElement.appendChild(nameElement);
                
                bookElement.addEventListener('click', () => {
                    selectBookFromGrid(book);
                });
                
                newTestamentGrid.appendChild(bookElement);
            });
        }
        
        // ê·¸ë¦¬ë“œì—ì„œ ì„±ê²½ì±… ì„ íƒ
        function selectBookFromGrid(book) {
            // ì„ íƒ í‘œì‹œ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.bible-book').forEach(el => {
                if (el.dataset.book === book) {
                    el.classList.add('selected');
                } else {
                    el.classList.remove('selected');
                }
            });
            
            // ë“œë¡­ë‹¤ìš´ ì„ íƒ ì—…ë°ì´íŠ¸
            bookSelect.value = book;
            
            // ì¥ ëª©ë¡ ì—…ë°ì´íŠ¸
            updateChapterOptions();
            
            // ê·¸ë¦¬ë“œ ë‹«ê¸°
            bibleGridContainer.style.display = 'none';
            toggleBibleGridButton.innerHTML = '<i class="fas fa-th toggle-icon"></i>ì„±ê²½ì±… ëª©ë¡ ë³´ê¸°';
        }
        
        // ì„±ê²½ì±… ëª©ë¡ ê·¸ë¦¬ë“œ í† ê¸€
        function toggleBibleGrid() {
            if (bibleGridContainer.style.display === 'none' || bibleGridContainer.style.display === '') {
                bibleGridContainer.style.display = 'block';
                toggleBibleGridButton.innerHTML = '<i class="fas fa-times toggle-icon"></i>ëª©ë¡ ë‹«ê¸°';
                
                // í˜„ì¬ ì„ íƒëœ ì±…ì— í‘œì‹œ ì¶”ê°€
                const selectedBook = bookSelect.value;
                if (selectedBook) {
                    document.querySelectorAll('.bible-book').forEach(el => {
                        if (el.dataset.book === selectedBook) {
                            el.classList.add('selected');
                            
                            // ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì¡°ì •
                            el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        } else {
                            el.classList.remove('selected');
                        }
                    });
                }
            } else {
                bibleGridContainer.style.display = 'none';
                toggleBibleGridButton.innerHTML = '<i class="fas fa-th toggle-icon"></i>ì„±ê²½ì±… ëª©ë¡ ë³´ê¸°';
            }
        }
        
        // ì„±ê²½ì±… ì˜µì…˜ ìƒì„±
        function generateBookOptions() {
            bookSelect.innerHTML = '<option value="" disabled selected>ì„±ê²½ì±…ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            // ë°ì´í„°ì— ìˆëŠ” ì„±ê²½ì±…ë§Œ í•„í„°ë§
            const validBooks = standardBooks.filter(book => book in bibleData);
            
            // êµ¬ì•½ê³¼ ì‹ ì•½ ì±… êµ¬ë¶„
            let inOldTestament = true;
            
            for (const book of validBooks) {
                // ë§ë¼ê¸°(êµ¬ì•½ ë§ˆì§€ë§‰ ì±…)ì™€ ë§ˆíƒœë³µìŒ(ì‹ ì•½ ì²« ì±…) ì‚¬ì´ì— êµ¬ë¶„ì„  ì¶”ê°€
                if (inOldTestament && book === 'ë§ˆíƒœë³µìŒ') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "-------------------------------------------";
                    bookSelect.appendChild(separator);
                    inOldTestament = false;
                }
                
                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                bookSelect.appendChild(option);
            }
        }
        
        // ë‘ ë²ˆì§¸ ì„±ê²½ì±… ì˜µì…˜ ìƒì„±
        function generateSecondBookOptions() {
            secondBookSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';
            
            // ë°ì´í„°ì— ìˆëŠ” ì„±ê²½ì±…ë§Œ í•„í„°ë§
            const validBooks = standardBooks.filter(book => book in bibleData);
            
            // êµ¬ì•½ê³¼ ì‹ ì•½ ì±… êµ¬ë¶„
            let inOldTestament = true;
            
            for (const book of validBooks) {
                // ë§ë¼ê¸°(êµ¬ì•½ ë§ˆì§€ë§‰ ì±…)ì™€ ë§ˆíƒœë³µìŒ(ì‹ ì•½ ì²« ì±…) ì‚¬ì´ì— êµ¬ë¶„ì„  ì¶”ê°€
                if (inOldTestament && book === 'ë§ˆíƒœë³µìŒ') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "-------------------------------------------";
                    secondBookSelect.appendChild(separator);
                    inOldTestament = false;
                }
                
                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                secondBookSelect.appendChild(option);
            }
        }
        
        // ì¥ ì˜µì…˜ ì—…ë°ì´íŠ¸
        function updateChapterOptions() {
            chapterSelect.innerHTML = '<option value="" disabled selected>ì¥ì„ ì„ íƒí•˜ì„¸ìš”</option>';
            
            const selectedBook = bookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) {
                return;
            }
            
            // ì¥ ë²ˆí˜¸ë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ì •ë ¬
            const chapters = Object.keys(bibleData[selectedBook])
                .map(chapter => parseInt(chapter))
                .sort((a, b) => a - b);
            
            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}ì¥`;
                chapterSelect.appendChild(option);
            }
            
            // í¼ ìƒíƒœ í™•ì¸
            checkFormValidity();
        }
        
        // ë‘ ë²ˆì§¸ ì¥ ì˜µì…˜ ì—…ë°ì´íŠ¸
        function updateSecondChapterOptions() {
            secondChapterSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';
            
            const selectedBook = secondBookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) {
                return;
            }
            
            // ì¥ ë²ˆí˜¸ë¥¼ ì •ìˆ˜ë¡œ ë³€í™˜í•˜ì—¬ ì •ë ¬
            const chapters = Object.keys(bibleData[selectedBook])
                .map(chapter => parseInt(chapter))
                .sort((a, b) => a - b);
            
            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}ì¥`;
                secondChapterSelect.appendChild(option);
            }
            
            // í¼ ìƒíƒœ í™•ì¸
            checkFormValidity();
        }
        
        // í¼ ìƒíƒœ í™•ì¸ - ë‚ ì§œ ì„ íƒ ì—†ì´ë„ ìƒì„± ê°€ëŠ¥í•˜ë„ë¡ ìˆ˜ì •, ë‘ ë²ˆì§¸ ì¥ ì„ íƒì€ ì„ íƒì‚¬í•­
        function checkFormValidity() {
            // ì²« ë²ˆì§¸ ì„±ê²½ì±…ê³¼ ì¥ë§Œ í•„ìˆ˜ë¡œ ì„¤ì •
            const isValid = bookSelect.value && chapterSelect.value;
            
            // ë‘ ë²ˆì§¸ ì„±ê²½ì±… ì„ íƒ ì‹œ, ì¥ë„ ì„ íƒí•´ì•¼ ìœ íš¨
            const isSecondValid = !secondBookSelect.value || 
                                (secondBookSelect.value && secondChapterSelect.value);
            
            generateButton.disabled = !(isValid && isSecondValid);
        }
        
        // ë‚ ì§œ ë¬¸ìì—´ í¬ë§· ë³€í™˜ (YYYY-MM-DD -> M/D(ìš”ì¼))
        function formatDateString(dateStr) {
            if (!dateStr) return null;
            
            const date = new Date(dateStr);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            const weekday = weekdays[date.getDay()];
            
            return {
                formattedDate: `${month}/${day}(${weekday})`,
                weekdayIndex: date.getDay(),
                dateObj: date,
                isoDateStr: dateStr
            };
        }
        
        // ë¬µìƒ ìƒì„±
        function generateDevotional() {
            try {
                // ì…ë ¥ê°’ í™•ì¸
                const selectedBook = bookSelect.value;
                const selectedChapter = chapterSelect.value;
                const secondSelectedBook = secondBookSelect.value;
                const secondSelectedChapter = secondChapterSelect.value;
                
                if (!selectedBook || !selectedChapter) {
                    alert('ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // ë‘ ë²ˆì§¸ ì„±ê²½ì±…ì´ ì„ íƒë˜ì—ˆì§€ë§Œ ì¥ì´ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°
                if (secondSelectedBook && !secondSelectedChapter) {
                    alert('ë‘ ë²ˆì§¸ ì„±ê²½ì±…ì„ ì„ íƒí•œ ê²½ìš° ì¥ë„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // ë‚ ì§œ ì •ë³´ (ì„ íƒì )
                let dateInfo = null;
                if (dateInput.value) {
                    dateInfo = formatDateString(dateInput.value);
                }
                
                // ì¼ìš”ì¼ì´ê³  ë‚ ì§œê°€ ì„ íƒëœ ê²½ìš°
                if (dateInfo && dateInfo.weekdayIndex === 0) {
                    rawDevotionalText = `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - ${dateInfo.formattedDate}\n\nì˜¤ëŠ˜ì€ ì¼ìš”ì¼ì…ë‹ˆë‹¤.\nì£¼ì¼ ì „í•´ì§€ëŠ” ë§ì”€ìœ¼ë¡œ í’ì„±í•œ í•˜ë£¨ ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.`;
                    
                    devotionalElement.textContent = rawDevotionalText;
                    // ë³µì‚¬ ë²„íŠ¼ í‘œì‹œ
                    copyButton.style.display = 'block';
                    saveButton.style.display = 'block';
                    
                    // ìë™ìœ¼ë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬
                    navigator.clipboard.writeText(rawDevotionalText)
                        .then(() => {
                            copyButton.innerHTML = '<i class="fas fa-check"></i> ë³µì‚¬ë¨';
                            copyButton.classList.add('copied');
                            showCopyMessage();
                        })
                        .catch(err => {
                            console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                        });
                    
                    // ìë™ ì €ì¥ ì²˜ë¦¬
                    if (autoSaveCheckbox.checked && dateInfo) {
                        saveDevotional();
                    }
                    
                    return;
                }
                
                // ì²« ë²ˆì§¸ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸°
                const chapterData = bibleData[selectedBook][selectedChapter];
                
                if (!chapterData) {
                    rawDevotionalText = `${selectedBook} ${selectedChapter}ì¥ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
                    devotionalElement.textContent = rawDevotionalText;
                    // ì´ ê²½ìš°ì—ëŠ” ë³µì‚¬ ë²„íŠ¼ ìˆ¨ê¹€
                    copyButton.style.display = 'none';
                    saveButton.style.display = 'none';
                    return;
                }
                
                // ë‘ ë²ˆì§¸ ì„±ê²½ êµ¬ì ˆ ê°€ì ¸ì˜¤ê¸° (ì„ íƒì )
                let secondChapterData = null;
                if (secondSelectedBook && secondSelectedChapter) {
                    secondChapterData = bibleData[secondSelectedBook][secondSelectedChapter];
                    
                    if (!secondChapterData) {
                        rawDevotionalText = `${secondSelectedBook} ${secondSelectedChapter}ì¥ì˜ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
                        devotionalElement.textContent = rawDevotionalText;
                        // ì´ ê²½ìš°ì—ëŠ” ë³µì‚¬ ë²„íŠ¼ ìˆ¨ê¹€
                        copyButton.style.display = 'none';
                        saveButton.style.display = 'none';
                        return;
                    }
                }
                
                // ì²« ë²ˆì§¸ ì ˆ ë°ì´í„° ì²˜ë¦¬
                const verses = [];
                const sortedVerseNumbers = Object.keys(chapterData)
                    .map(verse => parseInt(verse))
                    .sort((a, b) => a - b);
                
                for (const verseNum of sortedVerseNumbers) {
                    verses.push(`${verseNum}. ${chapterData[verseNum.toString()]}`);
                }
                
                // ë‘ ë²ˆì§¸ ì ˆ ë°ì´í„° ì²˜ë¦¬ (ì„ íƒì )
                const secondVerses = [];
                if (secondChapterData) {
                    const sortedSecondVerseNumbers = Object.keys(secondChapterData)
                        .map(verse => parseInt(verse))
                        .sort((a, b) => a - b);
                    
                    for (const verseNum of sortedSecondVerseNumbers) {
                        secondVerses.push(`${verseNum}. ${secondChapterData[verseNum.toString()]}`);
                    }
                }
                
                // ë¬µìƒ ë‚´ìš© ìƒì„± (ì›ë³¸ í…ìŠ¤íŠ¸ ì €ì¥)
                rawDevotionalText = '';
                
                // ë‚ ì§œê°€ ìˆëŠ” ê²½ìš°ì—ë§Œ ë‚ ì§œ ì •ë³´ ì¶”ê°€
                if (dateInfo) {
                    rawDevotionalText += `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš - ${dateInfo.formattedDate}\n\n`;
                } else {
                    rawDevotionalText += `ğŸšì˜¤ëŠ˜ì˜ ë§Œë‚˜ğŸš\n\n`;
                }
                
                // ì„ íƒëœ ì„±ê²½ì±… ì •ë³´ í‘œì‹œ
                if (secondSelectedBook && secondSelectedChapter) {
                    rawDevotionalText += `${selectedBook} ${selectedChapter}ì¥ ë° ${secondSelectedBook} ${secondSelectedChapter}ì¥ ì…ë‹ˆë‹¤\n`;
                } else {
                    rawDevotionalText += `${selectedBook} ${selectedChapter}ì¥ ì…ë‹ˆë‹¤\n`;
                }
                rawDevotionalText += "------------------------------------------------\n\n";
                
                // ì²« ë²ˆì§¸ ì„±ê²½ ë‚´ìš©
                rawDevotionalText += `**${selectedBook} ${selectedChapter}ì¥**\n\n`;
                rawDevotionalText += verses.join('\n\n');
                
                // ë‘ ë²ˆì§¸ ì„±ê²½ ë‚´ìš© (ì„ íƒì )
                if (secondSelectedBook && secondSelectedChapter && secondVerses.length > 0) {
                    rawDevotionalText += '\n\n';
                    rawDevotionalText += "----------------------------------------\n\n";
                    rawDevotionalText += `**${secondSelectedBook} ${secondSelectedChapter}ì¥**\n\n`;
                    rawDevotionalText += secondVerses.join('\n\n');
                }
                
                rawDevotionalText += '\n\n';
                rawDevotionalText += "------------------------------------------------\n\n";
                rawDevotionalText += "ğŸ’Œë¬µìƒë°©ë²•(ì°¸ê³ )ğŸ’Œ\n";
                rawDevotionalText += "1. ì‹œì‘ê¸°ë„ğŸ™ í›„ ë§ì”€ ì½ê¸°(ì²œì²œíˆ ê¹Šê²Œ)\n\n\n";
                rawDevotionalText += "2. ë¬µìƒí•˜ê¸°\n";
                rawDevotionalText += "ğŸ‘‰ë‚˜ì—ê²Œ ë¬µìƒë˜ëŠ” ë§ì”€ë²”ìœ„(êµ¬ì ˆ)ì˜ \"í•µì‹¬ì œëª©<Keyword >\" ì ì–´ë³´ê¸°\n";
                rawDevotionalText += "ğŸ‘‰\"í•µì‹¬ì œëª©<Keyword >\" ì— ë§ëŠ” ë¬µìƒ, ì£¼ë‹˜ê³¼ì˜ ì•½ì†/êµ¬ì²´ì  ì‹¤ì²œê³„íš ì„¸ì›Œë³´ê¸°\n\n\n";
                rawDevotionalText += "3. ë§ˆë¬´ë¦¬ê¸°ë„ğŸ™ í›„ ëŒ“ê¸€ë¡œ ë¬µìƒ ë‚˜ëˆ„ê¸° (ë§ì”€êµ¬ì ˆ/ë¬µìƒ/ì‹¤ì²œ ë“±ì„ ëŒ“ê¸€ë¡œ ë‹¬ì•„ ê³µìœ í•´ì£¼ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤!)\n";
                rawDevotionalText += "------------------------------------------------";
                
                // í…ìŠ¤íŠ¸ì—ì„œ **ë¡œ ê°ì‹¸ì§„ ë¶€ë¶„ì„ <strong> íƒœê·¸ë¡œ ë³€í™˜ (í™”ë©´ í‘œì‹œìš©)
                const formattedDevotional = rawDevotionalText
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                
                devotionalElement.innerHTML = formattedDevotional;
                
                // ë³µì‚¬ ë° ì €ì¥ ë²„íŠ¼ í‘œì‹œ
                copyButton.style.display = 'block';
                copyButton.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°';
                copyButton.classList.remove('copied');
                
                saveButton.style.display = 'block';
                
                // ìë™ìœ¼ë¡œ í´ë¦½ë³´ë“œì— ë³µì‚¬
                navigator.clipboard.writeText(rawDevotionalText)
                    .then(() => {
                        copyButton.innerHTML = '<i class="fas fa-check"></i> ë³µì‚¬ë¨';
                        copyButton.classList.add('copied');
                        showCopyMessage();
                        
                        // 3ì´ˆ í›„ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
                        setTimeout(() => {
                            copyButton.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°';
                            copyButton.classList.remove('copied');
                        }, 3000);
                    })
                    .catch(err => {
                        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                    });
                
                // ìë™ ì €ì¥ ì²˜ë¦¬
                if (autoSaveCheckbox.checked && dateInfo) {
                    saveDevotional();
                }
                
            } catch (error) {
                console.error('ë¬µìƒ ìƒì„± ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
                devotionalElement.textContent = `ì˜¤ë¥˜ ë°œìƒ: ${error.message}`;
                // ì˜¤ë¥˜ ì‹œ ë³µì‚¬ ë²„íŠ¼ ìˆ¨ê¹€
                copyButton.style.display = 'none';
                saveButton.style.display = 'none';
            }
        }
        
        // ë¬µìƒ ë‚´ìš© ì €ì¥
        function saveDevotional() {
            if (!rawDevotionalText || !dateInput.value) return;
            
            const dateKey = dateInput.value;
            
            // ì €ì¥ëœ ë¬µìƒ ë°ì´í„° ì—…ë°ì´íŠ¸
            savedDevotionals[dateKey] = {
                content: rawDevotionalText,
                timestamp: new Date().toISOString(),
                book: bookSelect.value,
                chapter: chapterSelect.value,
                secondBook: secondBookSelect.value || null,
                secondChapter: secondChapterSelect.value || null
            };
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            localStorage.setItem('savedDevotionals', JSON.stringify(savedDevotionals));
            
            // ì €ì¥ ì„±ê³µ ë©”ì‹œì§€
            saveButton.innerHTML = '<i class="fas fa-check"></i> ì €ì¥ë¨';
            setTimeout(() => {
                saveButton.innerHTML = '<i class="fas fa-save"></i> ì €ì¥í•˜ê¸°';
            }, 3000);
            
            // ë‹¬ë ¥ ì—…ë°ì´íŠ¸
            renderCalendar();
        }
        
        // ì €ì¥ëœ ë¬µìƒ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSavedDevotional(dateStr) {
            if (!savedDevotionals[dateStr]) return false;
            
            const devotionalData = savedDevotionals[dateStr];
            
            // ë‚ ì§œ ì„¤ì •
            dateInput.value = dateStr;
            
            // ì„±ê²½ì±… ë° ì¥ ì„¤ì •
            if (devotionalData.book && devotionalData.chapter) {
                bookSelect.value = devotionalData.book;
                updateChapterOptions();
                
                // ì•½ê°„ì˜ ì§€ì—° í›„ ì¥ ì„ íƒ (ì˜µì…˜ì´ ë¡œë“œë  ì‹œê°„ í•„ìš”)
                setTimeout(() => {
                    chapterSelect.value = devotionalData.chapter;
                    
                    // ë‘ ë²ˆì§¸ ì„±ê²½ì±… ì„¤ì • (ìˆëŠ” ê²½ìš°)
                    if (devotionalData.secondBook && devotionalData.secondChapter) {
                        secondBookSelect.value = devotionalData.secondBook;
                        updateSecondChapterOptions();
                        
                        // ì•½ê°„ì˜ ì§€ì—° í›„ ë‘ ë²ˆì§¸ ì¥ ì„ íƒ
                        setTimeout(() => {
                            secondChapterSelect.value = devotionalData.secondChapter;
                            
                            // ë¬µìƒ í‘œì‹œ
                            rawDevotionalText = devotionalData.content;
                            const formattedDevotional = rawDevotionalText
                                .replace(/\n/g, '<br>')
                                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                            
                            devotionalElement.innerHTML = formattedDevotional;
                            
                            // ë²„íŠ¼ í‘œì‹œ
                            copyButton.style.display = 'block';
                            copyButton.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°';
                            copyButton.classList.remove('copied');
                            
                            saveButton.style.display = 'block';
                        }, 100);
                    } else {
                        // ë‘ ë²ˆì§¸ ì„±ê²½ì±…ì´ ì—†ëŠ” ê²½ìš°
                        secondBookSelect.value = '';
                        secondChapterSelect.innerHTML = '<option value="">ì„ íƒí•˜ì§€ ì•ŠìŒ</option>';
                        
                        // ë¬µìƒ í‘œì‹œ
                        rawDevotionalText = devotionalData.content;
                        const formattedDevotional = rawDevotionalText
                            .replace(/\n/g, '<br>')
                            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                        
                        devotionalElement.innerHTML = formattedDevotional;
                        
                        // ë²„íŠ¼ í‘œì‹œ
                        copyButton.style.display = 'block';
                        copyButton.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°';
                        copyButton.classList.remove('copied');
                        
                        saveButton.style.display = 'block';
                    }
                }, 100);
            }
            
            return true;
        }
        
        // í˜„ì¬ ì„ íƒëœ ë‚ ì§œì— ì €ì¥ëœ ë¬µìƒì´ ìˆëŠ”ì§€ í™•ì¸
        function checkForSavedDevotional() {
            const currentDate = dateInput.value;
            if (currentDate && savedDevotionals[currentDate]) {
                loadSavedDevotional(currentDate);
            }
        }
        
        // ë¬µìƒ ë‚´ìš© ë³µì‚¬ ê¸°ëŠ¥
        function copyDevotionalText() {
            if (!rawDevotionalText) return;
            
            // í´ë¦½ë³´ë“œì— ë³µì‚¬
            navigator.clipboard.writeText(rawDevotionalText)
                .then(() => {
                    // ì„±ê³µ ì‹œ ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½
                    copyButton.innerHTML = '<i class="fas fa-check"></i> ë³µì‚¬ë¨';
                    copyButton.classList.add('copied');
                    
                    // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                    showCopyMessage();
                    
                    // 3ì´ˆ í›„ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
                    setTimeout(() => {
                        copyButton.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°';
                        copyButton.classList.remove('copied');
                    }, 3000);
                })
                .catch(err => {
                    console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                    copyButton.innerHTML = '<i class="fas fa-times"></i> ë³µì‚¬ ì‹¤íŒ¨';
                    
                    // 3ì´ˆ í›„ ë²„íŠ¼ í…ìŠ¤íŠ¸ ì›ë³µ
                    setTimeout(() => {
                        copyButton.innerHTML = '<i class="fas fa-copy"></i> ë³µì‚¬í•˜ê¸°';
                    }, 3000);
                });
        }
        
        // ë³µì‚¬ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showCopyMessage() {
            copyMessage.classList.add('show');
            setTimeout(() => {
                copyMessage.classList.remove('show');
            }, 2000);
        }
        
        // ëŒ“ê¸€ ê²Œì‹œ ê¸°ëŠ¥
        function postComment() {
            const commentText = commentInput.value.trim();
            const commentDate = commentDateInput.value;
            
            // í•´ë‹¹ ë‚ ì§œì˜ ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸°
            const dateComments = commentsData[commentDate] || [];
            
            // ëŒ“ê¸€ ëª©ë¡ ìš”ì†Œ ì´ˆê¸°í™”
            commentList.innerHTML = '';
            
            if (dateComments.length === 0) {
                // ëŒ“ê¸€ì´ ì—†ëŠ” ê²½ìš° ë©”ì‹œì§€ í‘œì‹œ
                commentList.innerHTML = `
                    <div class="empty-comments">
                        <i class="fas fa-comment-slash" style="font-size: 24px; margin-bottom: 10px;"></i>
                        <p>ì•„ì§ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ëŒ“ê¸€ì„ ë‚¨ê²¨ë³´ì„¸ìš”!</p>
                    </div>
                `;
                
                // í˜ì´ì§€ë„¤ì´ì…˜ ìˆ¨ê¹€
                commentPagination.innerHTML = '';
                return;
            }
            
            // í˜ì´ì§€ë„¤ì´ì…˜ ê³„ì‚°
            const totalPages = Math.ceil(dateComments.length / commentsPerPage);
            if (currentPage > totalPages) {
                currentPage = 1;
            }
            
            // í˜„ì¬ í˜ì´ì§€ì˜ ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸°
            const startIndex = (currentPage - 1) * commentsPerPage;
            const endIndex = Math.min(startIndex + commentsPerPage, dateComments.length);
            const pageComments = dateComments.slice(startIndex, endIndex);
            
            // ëŒ“ê¸€ ë Œë”ë§
            pageComments.forEach(comment => {
                const commentTime = new Date(comment.timestamp);
                const timeString = commentTime.toLocaleTimeString('ko-KR', { 
                    hour: '2-digit', 
                    minute: '2-digit'
                });
                
                const likeButtonClass = comment.liked ? 'active' : '';
                
                const commentElement = document.createElement('div');
                commentElement.className = 'comment-card';
                commentElement.innerHTML = `
                    <div class="comment-header">
                        <div class="comment-date">
                            <i class="fas fa-clock"></i> ${timeString}
                        </div>
                        <div class="comment-actions">
                            <button class="comment-action" data-action="delete" data-id="${comment.id}">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="comment-content">${comment.content}</div>
                    <div class="comment-feedback">
                        <div class="comment-reaction ${likeButtonClass}" data-action="like" data-id="${comment.id}">
                            <i class="fas fa-heart"></i> <span>${comment.likes}</span>
                        </div>
                    </div>
                `;
                
                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                const deleteButton = commentElement.querySelector('[data-action="delete"]');
                deleteButton.addEventListener('click', () => deleteComment(comment.id, commentDate));
                
                const likeButton = commentElement.querySelector('[data-action="like"]');
                likeButton.addEventListener('click', () => likeComment(comment.id, commentDate));
                
                commentList.appendChild(commentElement);
            });
            
            // í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
            renderPagination(totalPages);
        }
        
        // í˜ì´ì§€ë„¤ì´ì…˜ ë Œë”ë§
        function renderPagination(totalPages) {
            commentPagination.innerHTML = '';
            
            if (totalPages <= 1) {
                return;
            }
            
            // ì´ì „ í˜ì´ì§€ ë²„íŠ¼
            const prevButton = document.createElement('button');
            prevButton.className = `page-btn ${currentPage === 1 ? 'disabled' : ''}`;
            prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevButton.disabled = currentPage === 1;
            prevButton.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    loadComments();
                }
            });
            commentPagination.appendChild(prevButton);
            
            // í˜ì´ì§€ ë²ˆí˜¸ ë²„íŠ¼
            let startPage = Math.max(1, currentPage - 2);
            let endPage = Math.min(totalPages, startPage + 4);
            
            if (endPage - startPage < 4 && startPage > 1) {
                startPage = Math.max(1, endPage - 4);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageButton = document.createElement('button');
                pageButton.className = `page-btn ${i === currentPage ? 'active' : ''}`;
                pageButton.textContent = i;
                pageButton.addEventListener('click', () => {
                    currentPage = i;
                    loadComments();
                });
                commentPagination.appendChild(pageButton);
            }
            
            // ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼
            const nextButton = document.createElement('button');
            nextButton.className = `page-btn ${currentPage === totalPages ? 'disabled' : ''}`;
            nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextButton.disabled = currentPage === totalPages;
            nextButton.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    loadComments();
                }
            });
            commentPagination.appendChild(nextButton);
        }
        
        // ëŒ“ê¸€ ì‚­ì œ
        function deleteComment(commentId, date) {
            if (!confirm('ì •ë§ ì´ ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            if (commentsData[date]) {
                // í•´ë‹¹ IDì˜ ëŒ“ê¸€ ì°¾ê¸° ë° ì‚­ì œ
                commentsData[date] = commentsData[date].filter(comment => comment.id !== commentId);
                
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—…ë°ì´íŠ¸
                localStorage.setItem('commentsData', JSON.stringify(commentsData));
                
                // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                loadComments();
                
                // ë‹¬ë ¥ ì—…ë°ì´íŠ¸
                renderCalendar();
            }
        }
        
        // ëŒ“ê¸€ ì¢‹ì•„ìš”
        function likeComment(commentId, date) {
            if (commentsData[date]) {
                // í•´ë‹¹ IDì˜ ëŒ“ê¸€ ì°¾ê¸°
                const commentIndex = commentsData[date].findIndex(comment => comment.id === commentId);
                
                if (commentIndex !== -1) {
                    const comment = commentsData[date][commentIndex];
                    
                    // ì¢‹ì•„ìš” ìƒíƒœ í† ê¸€
                    if (comment.liked) {
                        comment.likes = Math.max(0, comment.likes - 1);
                        comment.liked = false;
                    } else {
                        comment.likes++;
                        comment.liked = true;
                    }
                    
                    // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì—…ë°ì´íŠ¸
                    localStorage.setItem('commentsData', JSON.stringify(commentsData));
                    
                    // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                    loadComments();
                }
            }
        }
        
        // ë‹¬ë ¥ ë Œë”ë§
        function renderCalendar() {
            const year = currentMonthDate.getFullYear();
            const month = currentMonthDate.getMonth();
            
            // ì›” ì œëª© ì—…ë°ì´íŠ¸
            currentMonthElement.textContent = `${year}ë…„ ${month + 1}ì›”`;
            
            // ë‹¬ë ¥ ì¼ì ì´ˆê¸°í™”
            calendarDays.innerHTML = '';
            
            // í•´ë‹¹ ì›”ì˜ ì²« ë‚ 
            const firstDay = new Date(year, month, 1);
            // í•´ë‹¹ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ 
            const lastDay = new Date(year, month + 1, 0);
            
            // ì²« ë‚ ì˜ ìš”ì¼ (0: ì¼ìš”ì¼, 1: ì›”ìš”ì¼, ...)
            const firstDayOfWeek = firstDay.getDay();
            // ë§ˆì§€ë§‰ ë‚ ì˜ ë‚ ì§œ
            const lastDate = lastDay.getDate();
            
            // ì´ì „ ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ 
            const prevLastDay = new Date(year, month, 0);
            const prevLastDate = prevLastDay.getDate();
            
            // ë‹¬ë ¥ì— í‘œì‹œí•  ì´ ì¼ìˆ˜ (ìµœëŒ€ 42ì¼: 6ì£¼)
            const totalDays = 42;
            
            // ì˜¤ëŠ˜ ë‚ ì§œ
            const today = new Date();
            const todayYear = today.getFullYear();
            const todayMonth = today.getMonth();
            const todayDate = today.getDate();
            
            // ì´ì „ ë‹¬ì˜ ë‚ ì§œ ë Œë”ë§
            for (let i = firstDayOfWeek; i > 0; i--) {
                const day = prevLastDate - i + 1;
                const dateObj = new Date(year, month - 1, day);
                const dateStr = dateToString(dateObj);
                
                // í•´ë‹¹ ë‚ ì§œì— ì €ì¥ëœ ë°ì´í„° í™•ì¸
                const hasDevotional = savedDevotionals[dateStr] ? true : false;
                const hasComments = commentsData[dateStr] && commentsData[dateStr].length > 0 ? true : false;
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.dataset.date = dateStr;
                
                let dayContent = `<div class="day-number">${day}</div>`;
                
                if (hasDevotional) {
                    dayContent += `<div class="has-devotional"><i class="fas fa-book"></i></div>`;
                }
                
                if (hasComments) {
                    dayContent += `<div class="has-comment"></div>`;
                }
                
                dayElement.innerHTML = dayContent;
                
                // í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                dayElement.addEventListener('click', () => selectCalendarDay(dateStr));
                
                calendarDays.appendChild(dayElement);
            }
            
            // í˜„ì¬ ë‹¬ì˜ ë‚ ì§œ ë Œë”ë§
            for (let i = 1; i <= lastDate; i++) {
                const dateObj = new Date(year, month, i);
                const dateStr = dateToString(dateObj);
                
                // í•´ë‹¹ ë‚ ì§œì— ì €ì¥ëœ ë°ì´í„° í™•ì¸
                const hasDevotional = savedDevotionals[dateStr] ? true : false;
                const hasComments = commentsData[dateStr] && commentsData[dateStr].length > 0 ? true : false;
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.dataset.date = dateStr;
                
                // í˜„ì¬ ë‚ ì§œê°€ ì˜¤ëŠ˜ì¸ì§€ í™•ì¸
                if (year === todayYear && month === todayMonth && i === todayDate) {
                    dayElement.classList.add('today');
                }
                
                // ì¼ìš”ì¼ì¸ ê²½ìš° ê°•ì¡°
                if (dateObj.getDay() === 0) {
                    dayElement.style.color = '#dc3545';
                }
                
                let dayContent = `<div class="day-number">${i}</div>`;
                
                if (hasDevotional) {
                    dayContent += `<div class="has-devotional"><i class="fas fa-book"></i></div>`;
                }
                
                if (hasComments) {
                    dayContent += `<div class="has-comment"></div>`;
                }
                
                dayElement.innerHTML = dayContent;
                
                // í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                dayElement.addEventListener('click', () => selectCalendarDay(dateStr));
                
                calendarDays.appendChild(dayElement);
            }
            
            // ë‹¤ìŒ ë‹¬ì˜ ë‚ ì§œë¡œ ë‚˜ë¨¸ì§€ ì±„ìš°ê¸°
            const remainingDays = totalDays - (firstDayOfWeek + lastDate);
            for (let i = 1; i <= remainingDays; i++) {
                const dateObj = new Date(year, month + 1, i);
                const dateStr = dateToString(dateObj);
                
                // í•´ë‹¹ ë‚ ì§œì— ì €ì¥ëœ ë°ì´í„° í™•ì¸
                const hasDevotional = savedDevotionals[dateStr] ? true : false;
                const hasComments = commentsData[dateStr] && commentsData[dateStr].length > 0 ? true : false;
                
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day other-month';
                dayElement.dataset.date = dateStr;
                
                let dayContent = `<div class="day-number">${i}</div>`;
                
                if (hasDevotional) {
                    dayContent += `<div class="has-devotional"><i class="fas fa-book"></i></div>`;
                }
                
                if (hasComments) {
                    dayContent += `<div class="has-comment"></div>`;
                }
                
                dayElement.innerHTML = dayContent;
                
                // í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
                dayElement.addEventListener('click', () => selectCalendarDay(dateStr));
                
                calendarDays.appendChild(dayElement);
            }
        }
        
        // ë‚ ì§œ ì„ íƒ ì²˜ë¦¬
        function selectCalendarDay(dateStr) {
            // ëª¨ë“  íƒ­ ë‚´ ë‚ ì§œ ì…ë ¥ í•„ë“œ ì—…ë°ì´íŠ¸
            dateInput.value = dateStr;
            commentDateInput.value = dateStr;
            
            // ì €ì¥ëœ ë¬µìƒ ë¶ˆëŸ¬ì˜¤ê¸°
            if (savedDevotionals[dateStr]) {
                loadSavedDevotional(dateStr);
                
                // ìƒì„±ê¸° íƒ­ìœ¼ë¡œ ì´ë™
                document.querySelector('.tab-btn[data-tab="generator"]').click();
            }
            
            // ëŒ“ê¸€ ë¡œë“œ
            loadComments();
            
            // ëª¨ë°”ì¼ì¸ ê²½ìš° ëŒ“ê¸€ íƒ­ìœ¼ë¡œ ì´ë™
            if (window.innerWidth <= 768 && commentsData[dateStr] && commentsData[dateStr].length > 0) {
                document.querySelector('.tab-btn[data-tab="comments"]').click();
            }
        }
        
        // ë‚ ì§œë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜ (YYYY-MM-DD)
        function dateToString(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }
        
        // ì›” ë³€ê²½
        function changeMonth(direction) {
            currentMonthDate.setMonth(currentMonthDate.getMonth() + direction);
            renderCalendar();
        }
        
        // ê¸€ì í¬ê¸° ì¡°ì •
        function updateFontSize() {
            const fontSize = fontSizeSlider.value;
            fontSizeValue.textContent = `${fontSize}%`;
            document.documentElement.style.fontSize = `${fontSize}%`;
            
            // ì„¤ì • ì €ì¥
            localStorage.setItem('fontSize', fontSize);
        }
        
        // ë‹¤í¬ ëª¨ë“œ í† ê¸€
        function toggleDarkMode() {
            darkMode = !darkMode;
            document.body.classList.toggle('dark-mode', darkMode);
            
            if (darkMode) {
                themeToggleButton.innerHTML = '<i class="fas fa-sun"></i>';
                document.documentElement.style.setProperty('--primary-color', '#63a4d8');
                document.documentElement.style.setProperty('--primary-dark', '#4d89b8');
                document.documentElement.style.setProperty('--light-bg', '#1e1e1e');
                document.documentElement.style.setProperty('--white', '#2d2d2d');
                document.documentElement.style.setProperty('--text-color', '#e0e0e0');
                document.documentElement.style.setProperty('--text-light', '#a0a0a0');
                document.documentElement.style.setProperty('--border-color', '#444444');
            } else {
                themeToggleButton.innerHTML = '<i class="fas fa-moon"></i>';
                document.documentElement.style.setProperty('--primary-color', '#4682B4');
                document.documentElement.style.setProperty('--primary-dark', '#366b96');
                document.documentElement.style.setProperty('--light-bg', '#f8f9fa');
                document.documentElement.style.setProperty('--white', '#ffffff');
                document.documentElement.style.setProperty('--text-color', '#333');
                document.documentElement.style.setProperty('--text-light', '#6c757d');
                document.documentElement.style.setProperty('--border-color', '#ced4da');
            }
            
            // ì„¤ì • ì €ì¥
            localStorage.setItem('darkMode', darkMode);
        }
        
        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData() {
            const exportData = {
                savedDevotionals,
                commentsData,
                settings: {
                    darkMode,
                    fontSize: fontSizeSlider.value,
                    autoSave: autoSaveCheckbox.checked
                },
                exportDate: new Date().toISOString()
            };
            
            // JSON ë¬¸ìì—´ë¡œ ë³€í™˜
            const jsonString = JSON.stringify(exportData, null, 2);
            
            // Blob ìƒì„±
            const blob = new Blob([jsonString], { type: 'application/json' });
            
            // ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
            const downloadLink = document.createElement('a');
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = `ë§Œë‚˜_ë°ì´í„°_${new Date().toISOString().slice(0, 10)}.json`;
            
            // ë§í¬ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œ
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        }
        
        // ë°ì´í„° ì‚­ì œ í™•ì¸
        function confirmClearData() {
            if (confirm('ì •ë§ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì´ˆê¸°í™”
                localStorage.removeItem('savedDevotionals');
                localStorage.removeItem('commentsData');
                
                // ë°ì´í„° ì´ˆê¸°í™”
                savedDevotionals = {};
                commentsData = {};
                
                // UI ì—…ë°ì´íŠ¸
                devotionalElement.textContent = 'ì„±ê²½ì±…ê³¼ ì¥ì„ ì„ íƒí•œ í›„ "ë¬µìƒ ìƒì„±í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.';
                copyButton.style.display = 'none';
                saveButton.style.display = 'none';
                
                loadComments();
                renderCalendar();
                
                alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }
        
        // ëª¨ë°”ì¼ ì‘ì—… ë²„íŠ¼ ì²˜ë¦¬
        function handleMobileAction() {
            // í˜„ì¬ í™œì„± íƒ­ì— ë”°ë¼ ë‹¤ë¥¸ ë™ì‘ ìˆ˜í–‰
            const activeTab = document.querySelector('.tab-content.active').id;
            
            switch (activeTab) {
                case 'generatorTab':
                    // ë¬µìƒ ìƒì„± íƒ­ì—ì„œëŠ” ë¬µìƒ ìƒì„± ì‹¤í–‰
                    if (!generateButton.disabled) {
                        generateDevotional();
                    } else {
                        // ì„±ê²½ì±… ì„ íƒ ëª©ë¡ í‘œì‹œ
                        toggleBibleGrid();
                    }
                    break;
                    
                case 'commentsTab':
                    // ëŒ“ê¸€ íƒ­ì—ì„œëŠ” ëŒ“ê¸€ í¬ì»¤ìŠ¤
                    commentInput.focus();
                    // ìŠ¤í¬ë¡¤ ì´ë™
                    commentInput.scrollIntoView({ behavior: 'smooth' });
                    break;
                    
                case 'calendarTab':
                    // ë‹¬ë ¥ íƒ­ì—ì„œëŠ” ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ë™
                    currentMonthDate = new Date();
                    renderCalendar();
                    break;
                    
                case 'settingsTab':
                    // ì„¤ì • íƒ­ì—ì„œëŠ” ì•„ë¬´ ë™ì‘ ì—†ìŒ
                    break;
            }
        }
        
        // í„°ì¹˜ ìµœì í™” ì„¤ì •
        function setupTouchOptimizations() {
            // í„°ì¹˜ ì´ë²¤íŠ¸ ì‹œ ì§„ë™ í”¼ë“œë°± (ì§€ì›í•˜ëŠ” ê¸°ê¸°ì—ì„œë§Œ)
            const touchElements = document.querySelectorAll('.button-touch, .calendar-day, .bible-book, .tab-btn');
            
            touchElements.forEach(element => {
                element.addEventListener('touchstart', () => {
                    if (window.navigator.vibrate) {
                        window.navigator.vibrate(10);
                    }
                });
            });
            
            // ë”ë¸” íƒ­ í™•ëŒ€ ë°©ì§€
            document.addEventListener('touchmove', function(event) {
                if (event.scale !== 1) {
                    event.preventDefault();
                }
            }, { passive: false });
            
            // ëª¨ë°”ì¼ í™˜ê²½ ì²´í¬ ë° UI ì¡°ì •
            if (window.innerWidth <= 768) {
                document.body.classList.add('mobile');
            }
            
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 768) {
                    document.body.classList.add('mobile');
                } else {
                    document.body.classList.remove('mobile');
                }
            });
        }
        
        // ì•± ì‹œì‘
        loadBibleData();
    </script>
</body>
</html>
            if (!commentText) {
                alert('ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (!commentDate) {
                alert('ë‚ ì§œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // ëŒ“ê¸€ ê°ì²´ ìƒì„±
            const newComment = {
                id: Date.now().toString(),
                content: commentText,
                timestamp: new Date().toISOString(),
                date: commentDate,
                likes: 0,
                liked: false
            };
            
            // í•´ë‹¹ ë‚ ì§œì˜ ëŒ“ê¸€ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° ë˜ëŠ” ìƒì„±
            if (!commentsData[commentDate]) {
                commentsData[commentDate] = [];
            }
            
            // ìƒˆ ëŒ“ê¸€ ì¶”ê°€
            commentsData[commentDate].unshift(newComment);
            
            // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥
            localStorage.setItem('commentsData', JSON.stringify(commentsData));
            
            // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
            commentInput.value = '';
            
            // ëŒ“ê¸€ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
            loadComments();
            
            // ë‹¬ë ¥ ì—…ë°ì´íŠ¸
            renderCalendar();
        }
        
        // ëŒ“ê¸€ ë¡œë“œ ë° í‘œì‹œ
        function loadComments() {
            const commentDate = commentDateInput.value;
