<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïò§ÎäòÏùò ÎßåÎÇò - ÏÑ±Í≤Ω Î¨µÏÉÅ Ïï±</title>
    <!-- ÌååÎπÑÏΩò -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üçö</text></svg>">
    <!-- Î©îÌÉÄ ÌÉúÍ∑∏ -->
    <meta name="description" content="Ïò§ÎäòÏùò ÎßåÎÇò - 2025ÎÖÑ ÏÑ±Í≤Ω Î¨µÏÉÅ Ïï±">
    <meta name="keywords" content="ÏÑ±Í≤Ω, Î¨µÏÉÅ, ÎßêÏîÄ, Ïò§ÎäòÏùò ÎßåÎÇò">
<style>
        /* Ìè∞Ìä∏ ÏÑ§Ï†ï */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');
        
        /* Ï†ÑÏ≤¥ Ïä§ÌÉÄÏùº */
        body {
            font-family: 'Noto Sans KR', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        /* Ìó§Îçî Ïä§ÌÉÄÏùº */
        h1 {
            text-align: center;
            color: #4682B4;
            margin-bottom: 20px;
            font-weight: 700;
        }
        .status {
            text-align: center;
            padding: 10px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-weight: 500;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .loading {
            background-color: #cce5ff;
            color: #004085;
        }
        
        /* Î†àÏù¥ÏïÑÏõÉ */
        .columns {
            display: flex;
            gap: 20px;
        }
        .column {
            flex: 1;
        }
        
        /* Ìèº ÏöîÏÜå */
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        select, button, input[type="date"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 5px;
            font-size: 16px;
            font-family: 'Noto Sans KR', Arial, sans-serif;
        }
        select, input[type="date"] {
            background-color: white;
        }
        button {
            background-color: #4682B4;
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #366b96;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        /* Î≥µÏÇ¨ Î≤ÑÌäº */
        .copy-button {
            background-color: #28a745;
            margin-top: 10px;
            display: none; /* Ï¥àÍ∏∞ÏóêÎäî Ïà®ÍπÄ */
        }
        .copy-button:hover {
            background-color: #218838;
        }
        .copy-button.copied {
            background-color: #6c757d;
        }
        
        /* ÏÑπÏÖò Ï†úÎ™© */
        h2 {
            margin-top: 0;
            color: #4682B4;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
            font-weight: 500;
        }
        
        /* Î¨µÏÉÅ ÏòÅÏó≠ */
        .devotional-container {
            position: relative;
        }
        .devotional {
            white-space: pre-wrap;
            line-height: 1.6;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 4px solid #4682B4;
        }
        strong {
            color: #366b96;
        }
        
        /* Î≥µÏÇ¨ ÏÑ±Í≥µ Î©îÏãúÏßÄ */
        .copy-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        .copy-message.show {
            opacity: 1;
        }
        
        /* Î∞òÏùëÌòï Î†àÏù¥ÏïÑÏõÉ */
        @media (max-width: 768px) {
            .columns {
                flex-direction: column;
            }
            .container {
                padding: 15px;
            }
        }
        
        /* Î°úÎî© Ïä§ÌîºÎÑà */
        .spinner {
            width: 40px;
            height: 40px;
            margin: 20px auto;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid #4682B4;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Ìë∏ÌÑ∞ */
        footer {
            text-align: center;
            margin-top: 30px;
            font-size: 14px;
            color: #6c757d;
        }
        
        /* ÏÑ±Í≤ΩÏ±Ö Í∑∏Î¶¨Îìú Ïä§ÌÉÄÏùº */
        .bible-grid-toggle {
            text-align: right;
            margin-bottom: 10px;
        }

        .toggle-button {
            background-color: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
            color: #334155;
            transition: all 0.2s;
            width: auto;
            margin-top: 0;
        }

        .toggle-button:hover {
            background-color: #e2e8f0;
        }

        .toggle-icon {
            margin-right: 5px;
        }

        .bible-grid {
            margin-top: 10px;
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .bible-categories {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .bible-category h3 {
            color: #4682B4;
            margin-top: 0;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 16px;
            font-weight: 600;
        }

        .bible-books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }

        .bible-book {
            background-color: #f8f9fa;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 70px;
        }

        .bible-book:hover {
            background-color: #e2e8f0;
            transform: translateY(-2px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .bible-book.selected {
            background-color: #4682B4;
            color: white;
            border-color: #366b96;
        }

        .book-icon {
            font-size: 24px;
            margin-bottom: 6px;
        }

        .book-name {
            font-size: 12px;
            line-height: 1.2;
            word-break: keep-all;
        }

        .old-testament .bible-book {
            background-color: #f3f8ff;
        }

        .new-testament .bible-book {
            background-color: #f0f9ff;
        }

        .old-testament .bible-book.selected {
            background-color: #5a8dcb;
        }

        .new-testament .bible-book.selected {
            background-color: #4682B4;
        }

        /* Î∞òÏùëÌòï Ï°∞Ï†ï */
        @media (max-width: 768px) {
            .bible-books-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
            
            .bible-book {
                height: 60px;
                padding: 8px 5px;
            }
            
            .book-icon {
                font-size: 20px;
                margin-bottom: 4px;
            }
            
            .book-name {
                font-size: 11px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üçö ÎßåÎÇò ÏÉùÏÑ±Í∏∞ üçö</h1>
        
        <div id="status" class="status loading">ÏÑ±Í≤Ω Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...<div class="spinner"></div></div>
        
        <div class="columns">
            <div class="column">
                <h2>ÏÑ§Ï†ï</h2>
                
                <div class="form-group">
                    <label for="date">1. ÎÇ†Ïßú ÏÑ†ÌÉù (ÏÑ†ÌÉùÏÇ¨Ìï≠):</label>
                    <input type="date" id="date" class="date-picker">
                </div>
                
                <div class="form-group">
                    <label for="book">2. ÏÑ±Í≤ΩÏ±Ö ÏÑ†ÌÉù:</label>
                    <select id="book">
                        <option value="" disabled selected>ÏÑ±Í≤ΩÏ±ÖÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                        <!-- ÏÑ±Í≤ΩÏ±Ö ÏòµÏÖòÏùÄ JavaScriptÎ°ú Ï±ÑÏõåÏßëÎãàÎã§ -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="chapter">3. Ïû• ÏÑ†ÌÉù:</label>
                    <select id="chapter">
                        <option value="" disabled selected>Ïû•ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                        <!-- Ïû• ÏòµÏÖòÏùÄ JavaScriptÎ°ú Ï±ÑÏõåÏßëÎãàÎã§ -->
                    </select>
                </div>
                
                <button id="generateButton">Î¨µÏÉÅ ÏÉùÏÑ±ÌïòÍ∏∞</button>
                
                <hr style="margin: 20px 0; border-top: 1px dashed #ced4da;">
                
                <div class="form-group">
                    <label for="secondBook">4. Ï∂îÍ∞Ä ÏÑ±Í≤ΩÏ±Ö ÏÑ†ÌÉù (ÏÑ†ÌÉùÏÇ¨Ìï≠):</label>
                    <select id="secondBook">
                        <option value="" selected>ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏùå</option>
                        <!-- ÏÑ±Í≤ΩÏ±Ö ÏòµÏÖòÏùÄ JavaScriptÎ°ú Ï±ÑÏõåÏßëÎãàÎã§ -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="secondChapter">5. Ï∂îÍ∞Ä Ïû• ÏÑ†ÌÉù (ÏÑ†ÌÉùÏÇ¨Ìï≠):</label>
                    <select id="secondChapter">
                        <option value="" selected>ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏùå</option>
                        <!-- Ïû• ÏòµÏÖòÏùÄ JavaScriptÎ°ú Ï±ÑÏõåÏßëÎãàÎã§ -->
                    </select>
                </div>
            </div>
            
            <div class="column">
                <h2>Ïò§ÎäòÏùò ÎßåÎÇò</h2>
                <div class="devotional-container">
                    <div id="devotional" class="devotional">
                        ÏÑ±Í≤ΩÏ±ÖÍ≥º Ïû•ÏùÑ ÏÑ†ÌÉùÌïú ÌõÑ "Î¨µÏÉÅ ÏÉùÏÑ±ÌïòÍ∏∞" Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî.
                    </div>
                    <button id="copyButton" class="copy-button">üìã Î≥µÏÇ¨ÌïòÍ∏∞</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Ïù¥ Ïï±ÏùÄ GitHubÏóêÏÑú Ìò∏Ïä§ÌåÖÎêòÎäî ÏÑ±Í≤Ω Îç∞Ïù¥ÌÑ∞Î•º ÏÇ¨Ïö©Ìï©ÎãàÎã§.</p>
        </footer>
    </div>
    
    <!-- Î≥µÏÇ¨ ÏÑ±Í≥µ Î©îÏãúÏßÄ -->
    <div id="copyMessage" class="copy-message">ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§!</div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let bibleData = null;
        let rawDevotionalText = ""; // ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Ï†ÄÏû•Ïö© Î≥ÄÏàò Ï∂îÍ∞Ä
        const statusElement = document.getElementById('status');
        const dateInput = document.getElementById('date'); // date inputÏúºÎ°ú Î≥ÄÍ≤Ω
        const bookSelect = document.getElementById('book');
        const chapterSelect = document.getElementById('chapter');
        const secondBookSelect = document.getElementById('secondBook');
        const secondChapterSelect = document.getElementById('secondChapter');
        const generateButton = document.getElementById('generateButton');
        const devotionalElement = document.getElementById('devotional');
        const copyButton = document.getElementById('copyButton');
        const copyMessage = document.getElementById('copyMessage');
        
        // Ïò§Îäò ÎÇ†ÏßúÎ•º Í∏∞Î≥∏Í∞íÏúºÎ°ú ÏÑ§Ï†ï
        function setTodayAsDefault() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            dateInput.value = `${year}-${month}-${day}`;
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìúÏãú Ïò§Îäò ÎÇ†Ïßú ÏÑ§Ï†ï
        setTodayAsDefault();
        
        // GitHubÏóêÏÑú ÏÑ±Í≤Ω Îç∞Ïù¥ÌÑ∞ Î°úÎìú
        async function loadBibleData() {
            try {
                statusElement.className = 'status loading';
                statusElement.innerHTML = 'ÏÑ±Í≤Ω Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò§Îäî Ï§ë...<div class="spinner"></div>';
                
                // GitHubÏóêÏÑú Îç∞Ïù¥ÌÑ∞ ÏöîÏ≤≠
                const response = await fetch('https://raw.githubusercontent.com/jeriong/bible-data/refs/heads/main/%EC%84%B1%EA%B2%BD.json');
                
                if (!response.ok) {
                    throw new Error(`HTTP Ïò§Î•ò: ${response.status}`);
                }
                
                bibleData = await response.json();
                
                // Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ Î©îÏãúÏßÄ
                statusElement.className = 'status success';
                statusElement.textContent = 'ÏÑ±Í≤Ω Îç∞Ïù¥ÌÑ∞Î•º ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Î∂àÎü¨ÏôîÏäµÎãàÎã§!';
                
                // UI Ï¥àÍ∏∞Ìôî
                initializeUI();
                
            } catch (error) {
                console.error('Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                statusElement.className = 'status error';
                statusElement.textContent = `ÏÑ±Í≤Ω Îç∞Ïù¥ÌÑ∞Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§: ${error.message}`;
                
                // Ïò§Î•ò Î∞úÏÉù Ïãú Î∞±ÏóÖ Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
                useSampleData();
            }
        }
        
        // Î∞±ÏóÖ Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö© (Ïò§Î•ò Ïãú ÏµúÏÜåÌïúÏùò Í∏∞Îä• Ï†úÍ≥µ)
        function useSampleData() {
            bibleData = {
                "Ï∞ΩÏÑ∏Í∏∞": {
                    "1": {
                        "1": "ÌÉúÏ¥àÏóê ÌïòÎÇòÎãòÏù¥ Ï≤úÏßÄÎ•º Ï∞ΩÏ°∞ÌïòÏãúÎãàÎùº",
                        "2": "ÎïÖÏù¥ ÌòºÎèàÌïòÍ≥† Í≥µÌóàÌïòÎ©∞ ÌùëÏïîÏù¥ ÍπäÏùå ÏúÑÏóê ÏûàÍ≥† ÌïòÎÇòÎãòÏùò ÏòÅÏùÄ ÏàòÎ©¥ ÏúÑÏóê Ïö¥ÌñâÌïòÏãúÎãàÎùº",
                        "3": "ÌïòÎÇòÎãòÏù¥ Í∞ÄÎùºÏÇ¨ÎåÄ ÎπõÏù¥ ÏûàÏúºÎùº ÌïòÏãúÎß§ ÎπõÏù¥ ÏûàÏóàÍ≥†",
                        "4": "ÎπõÏù¥ ÌïòÎÇòÎãòÏù¥ Î≥¥ÏãúÍ∏∞Ïóê Ï¢ãÏïòÎçîÎùº ÌïòÎÇòÎãòÏù¥ ÎπõÍ≥º Ïñ¥Îë†ÏùÑ ÎÇòÎàÑÏÇ¨"
                    }
                },
                "ÏöîÌïúÎ≥µÏùå": {
                    "3": {
                        "16": "ÌïòÎÇòÎãòÏù¥ ÏÑ∏ÏÉÅÏùÑ Ïù¥Ï≤òÎüº ÏÇ¨ÎûëÌïòÏÇ¨ ÎèÖÏÉùÏûêÎ•º Ï£ºÏÖ®ÏúºÎãà Ïù¥Îäî Ï†ÄÎ•º ÎØøÎäî ÏûêÎßàÎã§ Î©∏ÎßùÏπò ÏïäÍ≥† ÏòÅÏÉùÏùÑ ÏñªÍ≤å ÌïòÎ†§ ÌïòÏã¨Ïù¥ÎãàÎùº"
                    }
                },
                "ÏãúÌé∏": {
                    "23": {
                        "1": "Ïó¨Ìò∏ÏôÄÎäî ÎÇòÏùò Î™©ÏûêÏãúÎãà ÎÇ¥Í≤å Î∂ÄÏ°±Ìï®Ïù¥ ÏóÜÏúºÎ¶¨Î°úÎã§",
                        "2": "Í∑∏Í∞Ä ÎÇòÎ•º Ìë∏Î•∏ Ï¥àÏû•Ïóê ÎàÑÏù¥ÏãúÎ©∞ Ïâ¥ ÎßåÌïú Î¨ºÍ∞ÄÎ°ú Ïù∏ÎèÑÌïòÏãúÎäîÎèÑÎã§"
                    }
                }
            };
            
            statusElement.innerHTML += "<br><small>(ÏùºÎ∂Ä ÏÑ±Í≤Ω Íµ¨Ï†àÎßå Ï†úÍ≥µÎê©ÎãàÎã§. Îç∞Ïù¥ÌÑ∞ Ïò§Î•òÍ∞Ä ÏßÄÏÜçÎêòÎ©¥ Í¥ÄÎ¶¨ÏûêÏóêÍ≤å Î¨∏ÏùòÌïòÏÑ∏Ïöî.)</small>";
            
            // UI Ï¥àÍ∏∞Ìôî
            initializeUI();
        }
        
        // UI Ï¥àÍ∏∞Ìôî
        function initializeUI() {
            // ÏÑ±Í≤ΩÏ±Ö ÏòµÏÖò ÏÉùÏÑ±
            generateBookOptions();
            generateSecondBookOptions();
            
            // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ïó∞Í≤∞
            bookSelect.addEventListener('change', updateChapterOptions);
            chapterSelect.addEventListener('change', checkFormValidity);
            secondBookSelect.addEventListener('change', updateSecondChapterOptions);
            secondChapterSelect.addEventListener('change', checkFormValidity);
            generateButton.addEventListener('click', generateDevotional);
            copyButton.addEventListener('click', copyDevotionalText);
            
            // Ï¥àÍ∏∞ Ìèº ÏÉÅÌÉú ÌôïÏù∏
            checkFormValidity();
        }
        
        // ÏÑ±Í≤Ω 66Í∂å ÌëúÏ§Ä Î™©Î°ù
        const standardBooks = [
            'Ï∞ΩÏÑ∏Í∏∞', 'Ï∂úÏï†ÍµΩÍ∏∞', 'Î†àÏúÑÍ∏∞', 'ÎØºÏàòÍ∏∞', 'Ïã†Î™ÖÍ∏∞', 'Ïó¨Ìò∏ÏàòÏïÑ', 'ÏÇ¨ÏÇ¨Í∏∞', 'Î£ªÍ∏∞',
            'ÏÇ¨Î¨¥ÏóòÏÉÅ', 'ÏÇ¨Î¨¥ÏóòÌïò', 'Ïó¥ÏôïÍ∏∞ÏÉÅ', 'Ïó¥ÏôïÍ∏∞Ìïò', 'Ïó≠ÎåÄÏÉÅ', 'Ïó≠ÎåÄÌïò', 'ÏóêÏä§Îùº', 'ÎäêÌó§ÎØ∏Ïïº',
            'ÏóêÏä§Îçî', 'Ïö•Í∏∞', 'ÏãúÌé∏', 'Ïû†Ïñ∏', 'Ï†ÑÎèÑÏÑú', 'ÏïÑÍ∞Ä', 'Ïù¥ÏÇ¨Ïïº', 'ÏòàÎ†àÎØ∏Ïïº', 'ÏòàÎ†àÎØ∏ÏïºÏï†Í∞Ä',
            'ÏóêÏä§Í≤î', 'Îã§ÎãàÏóò', 'Ìò∏ÏÑ∏ÏïÑ', 'ÏöîÏóò', 'ÏïÑÎ™®Ïä§', 'Ïò§Î∞îÎåú', 'ÏöîÎÇò', 'ÎØ∏Í∞Ä', 'ÎÇòÌõî', 'ÌïòÎ∞ïÍµ≠',
            'Ïä§Î∞îÎÉê', 'ÌïôÍ∞ú', 'Ïä§Í∞ÄÎû¥', 'ÎßêÎùºÍ∏∞', 'ÎßàÌÉúÎ≥µÏùå', 'ÎßàÍ∞ÄÎ≥µÏùå', 'ÎàÑÍ∞ÄÎ≥µÏùå', 'ÏöîÌïúÎ≥µÏùå',
            'ÏÇ¨ÎèÑÌñâÏ†Ñ', 'Î°úÎßàÏÑú', 'Í≥†Î¶∞ÎèÑÏ†ÑÏÑú', 'Í≥†Î¶∞ÎèÑÌõÑÏÑú', 'Í∞àÎùºÎîîÏïÑÏÑú', 'ÏóêÎ≤†ÏÜåÏÑú', 'ÎπåÎ¶ΩÎ≥¥ÏÑú',
            'Í≥®Î°úÏÉàÏÑú', 'Îç∞ÏÇ¥Î°úÎãàÍ∞ÄÏ†ÑÏÑú', 'Îç∞ÏÇ¥Î°úÎãàÍ∞ÄÌõÑÏÑú', 'ÎîîÎ™®Îç∞Ï†ÑÏÑú', 'ÎîîÎ™®Îç∞ÌõÑÏÑú', 'ÎîîÎèÑÏÑú',
            'ÎπåÎ†àÎ™¨ÏÑú', 'ÌûàÎ∏åÎ¶¨ÏÑú', 'ÏïºÍ≥†Î≥¥ÏÑú', 'Î≤†ÎìúÎ°úÏ†ÑÏÑú', 'Î≤†ÎìúÎ°úÌõÑÏÑú', 'ÏöîÌïú1ÏÑú', 'ÏöîÌïú2ÏÑú',
            'ÏöîÌïú3ÏÑú', 'Ïú†Îã§ÏÑú', 'ÏöîÌïúÍ≥ÑÏãúÎ°ù'
        ];
        
        // ÏÑ±Í≤ΩÏ±Ö ÏòµÏÖò ÏÉùÏÑ±
        function generateBookOptions() {
            bookSelect.innerHTML = '<option value="" disabled selected>ÏÑ±Í≤ΩÏ±ÖÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>';
            
            // Îç∞Ïù¥ÌÑ∞Ïóê ÏûàÎäî ÏÑ±Í≤ΩÏ±ÖÎßå ÌïÑÌÑ∞ÎßÅ
            const validBooks = standardBooks.filter(book => book in bibleData);
            
            // Íµ¨ÏïΩÍ≥º Ïã†ÏïΩ Ï±Ö Íµ¨Î∂Ñ
            let inOldTestament = true;
            
            for (const book of validBooks) {
                // ÎßêÎùºÍ∏∞(Íµ¨ÏïΩ ÎßàÏßÄÎßâ Ï±Ö)ÏôÄ ÎßàÌÉúÎ≥µÏùå(Ïã†ÏïΩ Ï≤´ Ï±Ö) ÏÇ¨Ïù¥Ïóê Íµ¨Î∂ÑÏÑ† Ï∂îÍ∞Ä
                if (inOldTestament && book === 'ÎßàÌÉúÎ≥µÏùå') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "-------------------------------------------";
                    bookSelect.appendChild(separator);
                    inOldTestament = false;
                }
                
                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                bookSelect.appendChild(option);
            }
        }
        
        // Îëê Î≤àÏß∏ ÏÑ±Í≤ΩÏ±Ö ÏòµÏÖò ÏÉùÏÑ±
        function generateSecondBookOptions() {
            secondBookSelect.innerHTML = '<option value="">ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏùå</option>';
            
            // Îç∞Ïù¥ÌÑ∞Ïóê ÏûàÎäî ÏÑ±Í≤ΩÏ±ÖÎßå ÌïÑÌÑ∞ÎßÅ
            const validBooks = standardBooks.filter(book => book in bibleData);
            
            // Íµ¨ÏïΩÍ≥º Ïã†ÏïΩ Ï±Ö Íµ¨Î∂Ñ
            let inOldTestament = true;
            
            for (const book of validBooks) {
                // ÎßêÎùºÍ∏∞(Íµ¨ÏïΩ ÎßàÏßÄÎßâ Ï±Ö)ÏôÄ ÎßàÌÉúÎ≥µÏùå(Ïã†ÏïΩ Ï≤´ Ï±Ö) ÏÇ¨Ïù¥Ïóê Íµ¨Î∂ÑÏÑ† Ï∂îÍ∞Ä
                if (inOldTestament && book === 'ÎßàÌÉúÎ≥µÏùå') {
                    const separator = document.createElement('option');
                    separator.disabled = true;
                    separator.textContent = "-------------------------------------------";
                    secondBookSelect.appendChild(separator);
                    inOldTestament = false;
                }
                
                const option = document.createElement('option');
                option.value = book;
                option.textContent = book;
                secondBookSelect.appendChild(option);
            }
        }
        
        // Ïû• ÏòµÏÖò ÏóÖÎç∞Ïù¥Ìä∏
        function updateChapterOptions() {
            chapterSelect.innerHTML = '<option value="" disabled selected>Ïû•ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>';
            
            const selectedBook = bookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) {
                return;
            }
            
            // Ïû• Î≤àÌò∏Î•º Ï†ïÏàòÎ°ú Î≥ÄÌôòÌïòÏó¨ Ï†ïÎ†¨
            const chapters = Object.keys(bibleData[selectedBook])
                .map(chapter => parseInt(chapter))
                .sort((a, b) => a - b);
            
            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}Ïû•`;
                chapterSelect.appendChild(option);
            }
            
            // Ìèº ÏÉÅÌÉú ÌôïÏù∏
            checkFormValidity();
        }
        
        // Îëê Î≤àÏß∏ Ïû• ÏòµÏÖò ÏóÖÎç∞Ïù¥Ìä∏
        function updateSecondChapterOptions() {
            secondChapterSelect.innerHTML = '<option value="">ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏùå</option>';
            
            const selectedBook = secondBookSelect.value;
            if (!selectedBook || !bibleData[selectedBook]) {
                return;
            }
            
            // Ïû• Î≤àÌò∏Î•º Ï†ïÏàòÎ°ú Î≥ÄÌôòÌïòÏó¨ Ï†ïÎ†¨
            const chapters = Object.keys(bibleData[selectedBook])
                .map(chapter => parseInt(chapter))
                .sort((a, b) => a - b);
            
            for (const chapter of chapters) {
                const option = document.createElement('option');
                option.value = chapter;
                option.textContent = `${chapter}Ïû•`;
                secondChapterSelect.appendChild(option);
            }
            
            // Ìèº ÏÉÅÌÉú ÌôïÏù∏
            checkFormValidity();
        }
        
        // Ìèº ÏÉÅÌÉú ÌôïÏù∏ - ÎÇ†Ïßú ÏÑ†ÌÉù ÏóÜÏù¥ÎèÑ ÏÉùÏÑ± Í∞ÄÎä•ÌïòÎèÑÎ°ù ÏàòÏ†ï, Îëê Î≤àÏß∏ Ïû• ÏÑ†ÌÉùÏùÄ ÏÑ†ÌÉùÏÇ¨Ìï≠
        function checkFormValidity() {
            // Ï≤´ Î≤àÏß∏ ÏÑ±Í≤ΩÏ±ÖÍ≥º Ïû•Îßå ÌïÑÏàòÎ°ú ÏÑ§Ï†ï
            const isValid = bookSelect.value && chapterSelect.value;
            
            // Îëê Î≤àÏß∏ ÏÑ±Í≤ΩÏ±Ö ÏÑ†ÌÉù Ïãú, Ïû•ÎèÑ ÏÑ†ÌÉùÌï¥Ïïº Ïú†Ìö®
            const isSecondValid = !secondBookSelect.value || 
                                (secondBookSelect.value && secondChapterSelect.value);
            
            generateButton.disabled = !(isValid && isSecondValid);
        }
        
        // ÎÇ†Ïßú Î¨∏ÏûêÏó¥ Ìè¨Îß∑ Î≥ÄÌôò (YYYY-MM-DD -> M/D(ÏöîÏùº))
        function formatDateString(dateStr) {
            if (!dateStr) return null;
            
            const date = new Date(dateStr);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const weekdays = ['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'];
            const weekday = weekdays[date.getDay()];
            
            return {
                formattedDate: `${month}/${day}(${weekday})`,
                weekdayIndex: date.getDay()
            };
        }
        
        // Î¨µÏÉÅ ÏÉùÏÑ±
        function generateDevotional() {
            try {
                // ÏûÖÎ†•Í∞í ÌôïÏù∏
                const selectedBook = bookSelect.value;
                const selectedChapter = chapterSelect.value;
                const secondSelectedBook = secondBookSelect.value;
                const secondSelectedChapter = secondChapterSelect.value;
                
                if (!selectedBook || !selectedChapter) {
                    alert('ÏÑ±Í≤ΩÏ±ÖÍ≥º Ïû•ÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }
                
                // Îëê Î≤àÏß∏ ÏÑ±Í≤ΩÏ±ÖÏù¥ ÏÑ†ÌÉùÎêòÏóàÏßÄÎßå Ïû•Ïù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞
                if (secondSelectedBook && !secondSelectedChapter) {
                    alert('Îëê Î≤àÏß∏ ÏÑ±Í≤ΩÏ±ÖÏùÑ ÏÑ†ÌÉùÌïú Í≤ΩÏö∞ Ïû•ÎèÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
                    return;
                }
                
                // ÎÇ†Ïßú Ï†ïÎ≥¥ (ÏÑ†ÌÉùÏ†Å)
                let dateInfo = null;
                if (dateInput.value) {
                    dateInfo = formatDateString(dateInput.value);
                }
                
                // ÏùºÏöîÏùºÏù¥Í≥† ÎÇ†ÏßúÍ∞Ä ÏÑ†ÌÉùÎêú Í≤ΩÏö∞
                if (dateInfo && dateInfo.weekdayIndex === 0) {
                    rawDevotionalText = `üçöÏò§ÎäòÏùò ÎßåÎÇòüçö - ${dateInfo.formattedDate}\n\nÏò§ÎäòÏùÄ ÏùºÏöîÏùºÏûÖÎãàÎã§.\nÏ£ºÏùº Ï†ÑÌï¥ÏßÄÎäî ÎßêÏîÄÏúºÎ°ú ÌíçÏÑ±Ìïú ÌïòÎ£® ÎêòÏãúÍ∏∏ Î∞îÎûçÎãàÎã§.`;
                    
                    devotionalElement.textContent = rawDevotionalText;
                    // Î≥µÏÇ¨ Î≤ÑÌäº ÌëúÏãú
                    copyButton.style.display = 'block';
                    
                    // ÏûêÎèôÏúºÎ°ú ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨
                    navigator.clipboard.writeText(rawDevotionalText)
                        .then(() => {
                            copyButton.textContent = '‚úì Î≥µÏÇ¨Îê®';
                            copyButton.classList.add('copied');
                            showCopyMessage();
                        })
                        .catch(err => {
                            console.error('ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Ïã§Ìå®:', err);
                        });
                    
                    return;
                }
                
                // Ï≤´ Î≤àÏß∏ ÏÑ±Í≤Ω Íµ¨Ï†à Í∞ÄÏ†∏Ïò§Í∏∞
                const chapterData = bibleData[selectedBook][selectedChapter];
                
                if (!chapterData) {
                    rawDevotionalText = `${selectedBook} ${selectedChapter}Ïû•Ïùò Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`;
                    devotionalElement.textContent = rawDevotionalText;
                    // Ïù¥ Í≤ΩÏö∞ÏóêÎäî Î≥µÏÇ¨ Î≤ÑÌäº Ïà®ÍπÄ
                    copyButton.style.display = 'none';
                    return;
                }
                
                // Îëê Î≤àÏß∏ ÏÑ±Í≤Ω Íµ¨Ï†à Í∞ÄÏ†∏Ïò§Í∏∞ (ÏÑ†ÌÉùÏ†Å)
                let secondChapterData = null;
                if (secondSelectedBook && secondSelectedChapter) {
                    secondChapterData = bibleData[secondSelectedBook][secondSelectedChapter];
                    
                    if (!secondChapterData) {
                        rawDevotionalText = `${secondSelectedBook} ${secondSelectedChapter}Ïû•Ïùò Îç∞Ïù¥ÌÑ∞Î•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`;
                        devotionalElement.textContent = rawDevotionalText;
                        // Ïù¥ Í≤ΩÏö∞ÏóêÎäî Î≥µÏÇ¨ Î≤ÑÌäº Ïà®ÍπÄ
                        copyButton.style.display = 'none';
                        return;
                    }
                }
                
                // Ï≤´ Î≤àÏß∏ Ï†à Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨
                const verses = [];
                const sortedVerseNumbers = Object.keys(chapterData)
                    .map(verse => parseInt(verse))
                    .sort((a, b) => a - b);
                
                for (const verseNum of sortedVerseNumbers) {
                    verses.push(`${verseNum}. ${chapterData[verseNum.toString()]}`);
                }
                
                // Îëê Î≤àÏß∏ Ï†à Îç∞Ïù¥ÌÑ∞ Ï≤òÎ¶¨ (ÏÑ†ÌÉùÏ†Å)
                const secondVerses = [];
                if (secondChapterData) {
                    const sortedSecondVerseNumbers = Object.keys(secondChapterData)
                        .map(verse => parseInt(verse))
                        .sort((a, b) => a - b);
                    
                    for (const verseNum of sortedSecondVerseNumbers) {
                        secondVerses.push(`${verseNum}. ${secondChapterData[verseNum.toString()]}`);
                    }
                }
                
                // Î¨µÏÉÅ ÎÇ¥Ïö© ÏÉùÏÑ± (ÏõêÎ≥∏ ÌÖçÏä§Ìä∏ Ï†ÄÏû•)
                rawDevotionalText = '';
                
                // ÎÇ†ÏßúÍ∞Ä ÏûàÎäî Í≤ΩÏö∞ÏóêÎßå ÎÇ†Ïßú Ï†ïÎ≥¥ Ï∂îÍ∞Ä
                if (dateInfo) {
                    rawDevotionalText += `üçöÏò§ÎäòÏùò ÎßåÎÇòüçö - ${dateInfo.formattedDate}\n\n`;
                } else {
                    rawDevotionalText += `üçöÏò§ÎäòÏùò ÎßåÎÇòüçö\n\n`;
                }
                
                // ÏÑ†ÌÉùÎêú ÏÑ±Í≤ΩÏ±Ö Ï†ïÎ≥¥ ÌëúÏãú
                if (secondSelectedBook && secondSelectedChapter) {
                    rawDevotionalText += `${selectedBook} ${selectedChapter}Ïû• Î∞è ${secondSelectedBook} ${secondSelectedChapter}Ïû• ÏûÖÎãàÎã§\n`;
                } else {
                    rawDevotionalText += `${selectedBook} ${selectedChapter}Ïû• ÏûÖÎãàÎã§\n`;
                }
                rawDevotionalText += "------------------------------------------------\n\n";
                
                // Ï≤´ Î≤àÏß∏ ÏÑ±Í≤Ω ÎÇ¥Ïö©
                rawDevotionalText += `**${selectedBook} ${selectedChapter}Ïû•**\n\n`;
                rawDevotionalText += verses.join('\n\n');
                
                // Îëê Î≤àÏß∏ ÏÑ±Í≤Ω ÎÇ¥Ïö© (ÏÑ†ÌÉùÏ†Å)
                if (secondSelectedBook && secondSelectedChapter && secondVerses.length > 0) {
                    rawDevotionalText += '\n\n';
                    rawDevotionalText += "----------------------------------------\n\n";
                    rawDevotionalText += `**${secondSelectedBook} ${secondSelectedChapter}Ïû•**\n\n`;
                    rawDevotionalText += secondVerses.join('\n\n');
                }
                
                rawDevotionalText += '\n\n';
                rawDevotionalText += "------------------------------------------------\n\n";
                rawDevotionalText += "üíåÎ¨µÏÉÅÎ∞©Î≤ï(Ï∞∏Í≥†)üíå\n";
                rawDevotionalText += "1. ÏãúÏûëÍ∏∞ÎèÑüôè ÌõÑ ÎßêÏîÄ ÏùΩÍ∏∞(Ï≤úÏ≤úÌûà ÍπäÍ≤å)\n\n\n";
                rawDevotionalText += "2. Î¨µÏÉÅÌïòÍ∏∞\n";
                rawDevotionalText += "üëâÎÇòÏóêÍ≤å Î¨µÏÉÅÎêòÎäî ÎßêÏîÄÎ≤îÏúÑ(Íµ¨Ï†à)Ïùò \"ÌïµÏã¨Ï†úÎ™©<Keyword >\" Ï†ÅÏñ¥Î≥¥Í∏∞\n";
                rawDevotionalText += "üëâ\"ÌïµÏã¨Ï†úÎ™©<Keyword >\" Ïóê ÎßûÎäî Î¨µÏÉÅ, Ï£ºÎãòÍ≥ºÏùò ÏïΩÏÜç/Íµ¨Ï≤¥Ï†Å Ïã§Ï≤úÍ≥ÑÌöç ÏÑ∏ÏõåÎ≥¥Í∏∞\n\n\n";
                rawDevotionalText += "3. ÎßàÎ¨¥Î¶¨Í∏∞ÎèÑüôè ÌõÑ ÎåìÍ∏ÄÎ°ú Î¨µÏÉÅ ÎÇòÎàÑÍ∏∞ (ÎßêÏîÄÍµ¨Ï†à/Î¨µÏÉÅ/Ïã§Ï≤ú Îì±ÏùÑ ÎåìÍ∏ÄÎ°ú Îã¨ÏïÑ Í≥µÏú†Ìï¥Ï£ºÏãúÎ©¥ Ï¢ãÏäµÎãàÎã§!)\n";
                rawDevotionalText += "------------------------------------------------";
                
                // ÌÖçÏä§Ìä∏ÏóêÏÑú **Î°ú Í∞êÏã∏ÏßÑ Î∂ÄÎ∂ÑÏùÑ <strong> ÌÉúÍ∑∏Î°ú Î≥ÄÌôò (ÌôîÎ©¥ ÌëúÏãúÏö©)
                const formattedDevotional = rawDevotionalText
                    .replace(/\n/g, '<br>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                
                devotionalElement.innerHTML = formattedDevotional;
                
                // Î≥µÏÇ¨ Î≤ÑÌäº ÌëúÏãú
                copyButton.style.display = 'block';
                copyButton.textContent = 'üìã Î≥µÏÇ¨ÌïòÍ∏∞';
                copyButton.classList.remove('copied');
                
                // ÏûêÎèôÏúºÎ°ú ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨
                navigator.clipboard.writeText(rawDevotionalText)
                    .then(() => {
                        copyButton.textContent = '‚úì Î≥µÏÇ¨Îê®';
                        copyButton.classList.add('copied');
                        showCopyMessage();
                        
                        // 3Ï¥à ÌõÑ Î≤ÑÌäº ÌÖçÏä§Ìä∏ ÏõêÎ≥µ
                        setTimeout(() => {
                            copyButton.textContent = 'üìã Î≥µÏÇ¨ÌïòÍ∏∞';
                            copyButton.classList.remove('copied');
                        }, 3000);
                    })
                    .catch(err => {
                        console.error('ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Ïã§Ìå®:', err);
                    });
                
            } catch (error) {
                console.error('Î¨µÏÉÅ ÏÉùÏÑ± Ï§ë Ïò§Î•ò Î∞úÏÉù:', error);
                devotionalElement.textContent = `Ïò§Î•ò Î∞úÏÉù: ${error.message}`;
                // Ïò§Î•ò Ïãú Î≥µÏÇ¨ Î≤ÑÌäº Ïà®ÍπÄ
                copyButton.style.display = 'none';
            }
        }
        
        // Î¨µÏÉÅ ÎÇ¥Ïö© Î≥µÏÇ¨ Í∏∞Îä•
        function copyDevotionalText() {
            if (!rawDevotionalText) return;
            
            // ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨
            navigator.clipboard.writeText(rawDevotionalText)
                .then(() => {
                    // ÏÑ±Í≥µ Ïãú Î≤ÑÌäº ÌÖçÏä§Ìä∏ Î≥ÄÍ≤Ω
                    copyButton.textContent = '‚úì Î≥µÏÇ¨Îê®';
                    copyButton.classList.add('copied');
                    
                    // ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
                    showCopyMessage();
                    
                    // 3Ï¥à ÌõÑ Î≤ÑÌäº ÌÖçÏä§Ìä∏ ÏõêÎ≥µ
                    setTimeout(() => {
                        copyButton.textContent = 'üìã Î≥µÏÇ¨ÌïòÍ∏∞';
                        copyButton.classList.remove('copied');
                    }, 3000);
                })
                .catch(err => {
                    console.error('ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Ïã§Ìå®:', err);
                    copyButton.textContent = '‚ùå Î≥µÏÇ¨ Ïã§Ìå®';
                    
                    // 3Ï¥à ÌõÑ Î≤ÑÌäº ÌÖçÏä§Ìä∏ ÏõêÎ≥µ
                    setTimeout(() => {
                        copyButton.textContent = 'üìã Î≥µÏÇ¨ÌïòÍ∏∞';
                    }, 3000);
                });
        }
        
        // Î≥µÏÇ¨ ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
        function showCopyMessage() {
            copyMessage.classList.add('show');
            setTimeout(() => {
                copyMessage.classList.remove('show');
            }, 2000);
        }
        
        // Ïï± ÏãúÏûë
        loadBibleData();
    </script>
</body>
</html>
